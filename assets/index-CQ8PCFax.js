(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tg={exports:{}},tu={},ng={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),mC=Symbol.for("react.portal"),_C=Symbol.for("react.fragment"),gC=Symbol.for("react.strict_mode"),vC=Symbol.for("react.profiler"),yC=Symbol.for("react.provider"),wC=Symbol.for("react.context"),CC=Symbol.for("react.forward_ref"),SC=Symbol.for("react.suspense"),TC=Symbol.for("react.memo"),EC=Symbol.for("react.lazy"),wp=Symbol.iterator;function AC(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sg=Object.assign,ig={};function yi(t,e,n){this.props=t,this.context=e,this.refs=ig,this.updater=n||rg}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function og(){}og.prototype=yi.prototype;function ad(t,e,n){this.props=t,this.context=e,this.refs=ig,this.updater=n||rg}var ld=ad.prototype=new og;ld.constructor=ad;sg(ld,yi.prototype);ld.isPureReactComponent=!0;var Cp=Array.isArray,ag=Object.prototype.hasOwnProperty,ud={current:null},lg={key:!0,ref:!0,__self:!0,__source:!0};function ug(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ag.call(e,r)&&!lg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ho,type:t,key:i,ref:o,props:s,_owner:ud.current}}function kC(t,e){return{$$typeof:Ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ho}function xC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sp=/\/+/g;function Xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xC(""+t.key):e.toString(36)}function Ua(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ho:case mC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xu(o,0):r,Cp(s)?(n="",t!=null&&(n=t.replace(Sp,"$&/")+"/"),Ua(s,e,n,"",function(h){return h})):s!=null&&(cd(s)&&(s=kC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Cp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Xu(i,l);o+=Ua(i,e,n,u,s)}else if(u=AC(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Xu(i,l++),o+=Ua(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ga(t,e,n){if(t==null)return t;var r=[],s=0;return Ua(t,r,"","",function(i){return e.call(n,i,s++)}),r}function IC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},qa={transition:null},NC={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:qa,ReactCurrentOwner:ud};function cg(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ga,forEach:function(t,e,n){ga(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ga(t,function(){e++}),e},toArray:function(t){return ga(t,function(e){return e})||[]},only:function(t){if(!cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=yi;ae.Fragment=_C;ae.Profiler=vC;ae.PureComponent=ad;ae.StrictMode=gC;ae.Suspense=SC;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NC;ae.act=cg;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ud.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ag.call(e,u)&&!lg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ho,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:wC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yC,_context:t},t.Consumer=t};ae.createElement=ug;ae.createFactory=function(t){var e=ug.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:CC,render:t}};ae.isValidElement=cd;ae.lazy=function(t){return{$$typeof:EC,_payload:{_status:-1,_result:t},_init:IC}};ae.memo=function(t,e){return{$$typeof:TC,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=qa.transition;qa.transition={};try{t()}finally{qa.transition=e}};ae.unstable_act=cg;ae.useCallback=function(t,e){return St.current.useCallback(t,e)};ae.useContext=function(t){return St.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return St.current.useDeferredValue(t)};ae.useEffect=function(t,e){return St.current.useEffect(t,e)};ae.useId=function(){return St.current.useId()};ae.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return St.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};ae.useRef=function(t){return St.current.useRef(t)};ae.useState=function(t){return St.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return St.current.useTransition()};ae.version="18.3.1";ng.exports=ae;var re=ng.exports;const DC=eg(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC=re,bC=Symbol.for("react.element"),RC=Symbol.for("react.fragment"),PC=Object.prototype.hasOwnProperty,MC=OC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FC={key:!0,ref:!0,__self:!0,__source:!0};function hg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PC.call(e,r)&&!FC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:bC,type:t,key:i,ref:o,props:s,_owner:MC.current}}tu.Fragment=RC;tu.jsx=hg;tu.jsxs=hg;tg.exports=tu;var Y=tg.exports,Vc={},dg={exports:{}},jt={},fg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,M){var z=O.length;O.push(M);e:for(;0<z;){var H=z-1>>>1,K=O[H];if(0<s(K,M))O[H]=M,O[z]=K,z=H;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],z=O.pop();if(z!==M){O[0]=z;e:for(var H=0,K=O.length,ve=K>>>1;H<ve;){var ye=2*(H+1)-1,J=O[ye],le=ye+1,De=O[le];if(0>s(J,z))le<K&&0>s(De,J)?(O[H]=De,O[le]=z,H=le):(O[H]=J,O[ye]=z,H=ye);else if(le<K&&0>s(De,z))O[H]=De,O[le]=z,H=le;else break e}}return M}function s(O,M){var z=O.sortIndex-M.sortIndex;return z!==0?z:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,a=null,c=3,d=!1,p=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(O){for(var M=n(h);M!==null;){if(M.callback===null)r(h);else if(M.startTime<=O)r(h),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(h)}}function S(O){if(_=!1,y(O),!p)if(n(u)!==null)p=!0,W(w);else{var M=n(h);M!==null&&P(S,M.startTime-O)}}function w(O,M){p=!1,_&&(_=!1,m(T),T=-1),d=!0;var z=c;try{for(y(M),a=n(u);a!==null&&(!(a.expirationTime>M)||O&&!x());){var H=a.callback;if(typeof H=="function"){a.callback=null,c=a.priorityLevel;var K=H(a.expirationTime<=M);M=t.unstable_now(),typeof K=="function"?a.callback=K:a===n(u)&&r(u),y(M)}else r(u);a=n(u)}if(a!==null)var ve=!0;else{var ye=n(h);ye!==null&&P(S,ye.startTime-M),ve=!1}return ve}finally{a=null,c=z,d=!1}}var E=!1,A=null,T=-1,N=5,D=-1;function x(){return!(t.unstable_now()-D<N)}function I(){if(A!==null){var O=t.unstable_now();D=O;var M=!0;try{M=A(!0,O)}finally{M?R():(E=!1,A=null)}}else E=!1}var R;if(typeof g=="function")R=function(){g(I)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,L=b.port2;b.port1.onmessage=I,R=function(){L.postMessage(null)}}else R=function(){v(I,0)};function W(O){A=O,E||(E=!0,R())}function P(O,M){T=v(function(){O(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,W(w))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(c){case 1:case 2:case 3:var M=3;break;default:M=c}var z=c;c=M;try{return O()}finally{c=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=c;c=O;try{return M()}finally{c=z}},t.unstable_scheduleCallback=function(O,M,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,O){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,O={id:f++,callback:M,priorityLevel:O,startTime:z,expirationTime:K,sortIndex:-1},z>H?(O.sortIndex=z,e(h,O),n(u)===null&&O===n(h)&&(_?(m(T),T=-1):_=!0,P(S,z-H))):(O.sortIndex=K,e(u,O),p||d||(p=!0,W(w))),O},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(O){var M=c;return function(){var z=c;c=M;try{return O.apply(this,arguments)}finally{c=z}}}})(pg);fg.exports=pg;var LC=fg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC=re,zt=LC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mg=new Set,ho={};function fs(t,e){ei(t,e),ei(t+"Capture",e)}function ei(t,e){for(ho[t]=e,t=0;t<e.length;t++)mg.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bc=Object.prototype.hasOwnProperty,BC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tp={},Ep={};function zC(t){return Bc.call(Ep,t)?!0:Bc.call(Tp,t)?!1:BC.test(t)?Ep[t]=!0:(Tp[t]=!0,!1)}function WC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jC(t,e,n,r){if(e===null||typeof e>"u"||WC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hd=/[\-:]([a-z])/g;function dd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hd,dd);lt[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hd,dd);lt[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hd,dd);lt[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fd(t,e,n,r){var s=lt.hasOwnProperty(e)?lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jC(e,n,s,r)&&(n=null),r||s===null?zC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=VC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),ks=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),pd=Symbol.for("react.strict_mode"),zc=Symbol.for("react.profiler"),_g=Symbol.for("react.provider"),gg=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),Wc=Symbol.for("react.suspense"),jc=Symbol.for("react.suspense_list"),_d=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),vg=Symbol.for("react.offscreen"),Ap=Symbol.iterator;function Ri(t){return t===null||typeof t!="object"?null:(t=Ap&&t[Ap]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Zu;function $i(t){if(Zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zu=e&&e[1]||""}return`
`+Zu+t}var Ju=!1;function ec(t,e){if(!t||Ju)return"";Ju=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Ju=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$i(t):""}function UC(t){switch(t.tag){case 5:return $i(t.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return t=ec(t.type,!1),t;case 11:return t=ec(t.type.render,!1),t;case 1:return t=ec(t.type,!0),t;default:return""}}function Uc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ks:return"Portal";case zc:return"Profiler";case pd:return"StrictMode";case Wc:return"Suspense";case jc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gg:return(t.displayName||"Context")+".Consumer";case _g:return(t._context.displayName||"Context")+".Provider";case md:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _d:return e=t.displayName||null,e!==null?e:Uc(t.type)||"Memo";case lr:e=t._payload,t=t._init;try{return Uc(t(e))}catch{}}return null}function qC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uc(e);case 8:return e===pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HC(t){var e=yg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ya(t){t._valueTracker||(t._valueTracker=HC(t))}function wg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qc(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cg(t,e){e=e.checked,e!=null&&fd(t,"checked",e,!1)}function Hc(t,e){Cg(t,e);var n=Nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$c(t,e.type,n):e.hasOwnProperty("defaultValue")&&$c(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $c(t,e,n){(e!=="number"||sl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ip(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Gi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function Sg(t,e){var n=Nr(e.value),r=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Np(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,Eg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$C=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(t){$C.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qi[e]=Qi[t]})});function Ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qi.hasOwnProperty(t)&&Qi[t]?(""+e).trim():e+"px"}function kg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var GC=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kc(t,e){if(e){if(GC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Qc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=null;function gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zc=null,Us=null,qs=null;function Dp(t){if(t=Yo(t)){if(typeof Zc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ou(e),Zc(t.stateNode,t.type,e))}}function xg(t){Us?qs?qs.push(t):qs=[t]:Us=t}function Ig(){if(Us){var t=Us,e=qs;if(qs=Us=null,Dp(t),e)for(t=0;t<e.length;t++)Dp(e[t])}}function Ng(t,e){return t(e)}function Dg(){}var tc=!1;function Og(t,e,n){if(tc)return t(e,n);tc=!0;try{return Ng(t,e,n)}finally{tc=!1,(Us!==null||qs!==null)&&(Dg(),Ig())}}function po(t,e){var n=t.stateNode;if(n===null)return null;var r=ou(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Jc=!1;if(qn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Jc=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Jc=!1}function YC(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Xi=!1,il=null,ol=!1,eh=null,KC={onError:function(t){Xi=!0,il=t}};function QC(t,e,n,r,s,i,o,l,u){Xi=!1,il=null,YC.apply(KC,arguments)}function XC(t,e,n,r,s,i,o,l,u){if(QC.apply(this,arguments),Xi){if(Xi){var h=il;Xi=!1,il=null}else throw Error(U(198));ol||(ol=!0,eh=h)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Op(t){if(ps(t)!==t)throw Error(U(188))}function ZC(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Op(s),t;if(i===r)return Op(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Rg(t){return t=ZC(t),t!==null?Pg(t):null}function Pg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pg(t);if(e!==null)return e;t=t.sibling}return null}var Mg=zt.unstable_scheduleCallback,bp=zt.unstable_cancelCallback,JC=zt.unstable_shouldYield,e1=zt.unstable_requestPaint,je=zt.unstable_now,t1=zt.unstable_getCurrentPriorityLevel,vd=zt.unstable_ImmediatePriority,Fg=zt.unstable_UserBlockingPriority,al=zt.unstable_NormalPriority,n1=zt.unstable_LowPriority,Lg=zt.unstable_IdlePriority,nu=null,En=null;function r1(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(nu,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:o1,s1=Math.log,i1=Math.LN2;function o1(t){return t>>>=0,t===0?32:31-(s1(t)/i1|0)|0}var Ca=64,Sa=4194304;function Yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yi(l):(i&=o,i!==0&&(r=Yi(i)))}else o=n&~s,o!==0?r=Yi(o):i!==0&&(r=Yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),s=1<<n,r|=t[n],e&=~s;return r}function a1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=a1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function th(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vg(){var t=Ca;return Ca<<=1,!(Ca&4194240)&&(Ca=64),t}function nc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $o(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function u1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function Bg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zg,wd,Wg,jg,Ug,nh=!1,Ta=[],_r=null,gr=null,vr=null,mo=new Map,_o=new Map,dr=[],c1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rp(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":mo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yo(e),e!==null&&wd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function h1(t,e,n,r,s){switch(e){case"focusin":return _r=Mi(_r,t,e,n,r,s),!0;case"dragenter":return gr=Mi(gr,t,e,n,r,s),!0;case"mouseover":return vr=Mi(vr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return mo.set(i,Mi(mo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_o.set(i,Mi(_o.get(i)||null,t,e,n,r,s)),!0}return!1}function qg(t){var e=$r(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=bg(n),e!==null){t.blockedOn=e,Ug(t.priority,function(){Wg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xc=r,n.target.dispatchEvent(r),Xc=null}else return e=Yo(n),e!==null&&wd(e),t.blockedOn=n,!1;e.shift()}return!0}function Pp(t,e,n){Ha(t)&&n.delete(e)}function d1(){nh=!1,_r!==null&&Ha(_r)&&(_r=null),gr!==null&&Ha(gr)&&(gr=null),vr!==null&&Ha(vr)&&(vr=null),mo.forEach(Pp),_o.forEach(Pp)}function Fi(t,e){t.blockedOn===e&&(t.blockedOn=null,nh||(nh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,d1)))}function go(t){function e(s){return Fi(s,t)}if(0<Ta.length){Fi(Ta[0],t);for(var n=1;n<Ta.length;n++){var r=Ta[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_r!==null&&Fi(_r,t),gr!==null&&Fi(gr,t),vr!==null&&Fi(vr,t),mo.forEach(e),_o.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)qg(n),n.blockedOn===null&&dr.shift()}var Hs=Xn.ReactCurrentBatchConfig,ul=!0;function f1(t,e,n,r){var s=pe,i=Hs.transition;Hs.transition=null;try{pe=1,Cd(t,e,n,r)}finally{pe=s,Hs.transition=i}}function p1(t,e,n,r){var s=pe,i=Hs.transition;Hs.transition=null;try{pe=4,Cd(t,e,n,r)}finally{pe=s,Hs.transition=i}}function Cd(t,e,n,r){if(ul){var s=rh(t,e,n,r);if(s===null)dc(t,e,r,cl,n),Rp(t,r);else if(h1(s,t,e,n,r))r.stopPropagation();else if(Rp(t,r),e&4&&-1<c1.indexOf(t)){for(;s!==null;){var i=Yo(s);if(i!==null&&zg(i),i=rh(t,e,n,r),i===null&&dc(t,e,r,cl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else dc(t,e,r,null,n)}}var cl=null;function rh(t,e,n,r){if(cl=null,t=gd(r),t=$r(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cl=t,null}function Hg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t1()){case vd:return 1;case Fg:return 4;case al:case n1:return 16;case Lg:return 536870912;default:return 16}default:return 16}}var pr=null,Sd=null,$a=null;function $g(){if($a)return $a;var t,e=Sd,n=e.length,r,s="value"in pr?pr.value:pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $a=s.slice(t,1<r?1-r:void 0)}function Ga(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ea(){return!0}function Mp(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ea:Mp,this.isPropagationStopped=Mp,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),e}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Td=Ut(wi),Go=Fe({},wi,{view:0,detail:0}),m1=Ut(Go),rc,sc,Li,ru=Fe({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ed,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Li&&(Li&&t.type==="mousemove"?(rc=t.screenX-Li.screenX,sc=t.screenY-Li.screenY):sc=rc=0,Li=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:sc}}),Fp=Ut(ru),_1=Fe({},ru,{dataTransfer:0}),g1=Ut(_1),v1=Fe({},Go,{relatedTarget:0}),ic=Ut(v1),y1=Fe({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),w1=Ut(y1),C1=Fe({},wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),S1=Ut(C1),T1=Fe({},wi,{data:0}),Lp=Ut(T1),E1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k1[t])?!!e[t]:!1}function Ed(){return x1}var I1=Fe({},Go,{key:function(t){if(t.key){var e=E1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ga(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ed,charCode:function(t){return t.type==="keypress"?Ga(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ga(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),N1=Ut(I1),D1=Fe({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vp=Ut(D1),O1=Fe({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ed}),b1=Ut(O1),R1=Fe({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),P1=Ut(R1),M1=Fe({},ru,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F1=Ut(M1),L1=[9,13,27,32],Ad=qn&&"CompositionEvent"in window,Zi=null;qn&&"documentMode"in document&&(Zi=document.documentMode);var V1=qn&&"TextEvent"in window&&!Zi,Gg=qn&&(!Ad||Zi&&8<Zi&&11>=Zi),Bp=" ",zp=!1;function Yg(t,e){switch(t){case"keyup":return L1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function B1(t,e){switch(t){case"compositionend":return Kg(e);case"keypress":return e.which!==32?null:(zp=!0,Bp);case"textInput":return t=e.data,t===Bp&&zp?null:t;default:return null}}function z1(t,e){if(Is)return t==="compositionend"||!Ad&&Yg(t,e)?(t=$g(),$a=Sd=pr=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gg&&e.locale!=="ko"?null:e.data;default:return null}}var W1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W1[t.type]:e==="textarea"}function Qg(t,e,n,r){xg(r),e=hl(e,"onChange"),0<e.length&&(n=new Td("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ji=null,vo=null;function j1(t){av(t,0)}function su(t){var e=Os(t);if(wg(e))return t}function U1(t,e){if(t==="change")return e}var Xg=!1;if(qn){var oc;if(qn){var ac="oninput"in document;if(!ac){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),ac=typeof jp.oninput=="function"}oc=ac}else oc=!1;Xg=oc&&(!document.documentMode||9<document.documentMode)}function Up(){Ji&&(Ji.detachEvent("onpropertychange",Zg),vo=Ji=null)}function Zg(t){if(t.propertyName==="value"&&su(vo)){var e=[];Qg(e,vo,t,gd(t)),Og(j1,e)}}function q1(t,e,n){t==="focusin"?(Up(),Ji=e,vo=n,Ji.attachEvent("onpropertychange",Zg)):t==="focusout"&&Up()}function H1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(vo)}function $1(t,e){if(t==="click")return su(e)}function G1(t,e){if(t==="input"||t==="change")return su(e)}function Y1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:Y1;function yo(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bc.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function qp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,e){var n=qp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qp(n)}}function Jg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ev(){for(var t=window,e=sl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sl(t.document)}return e}function kd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function K1(t){var e=ev(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jg(n.ownerDocument.documentElement,n)){if(r!==null&&kd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Hp(n,i);var o=Hp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Q1=qn&&"documentMode"in document&&11>=document.documentMode,Ns=null,sh=null,eo=null,ih=!1;function $p(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ih||Ns==null||Ns!==sl(r)||(r=Ns,"selectionStart"in r&&kd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),eo&&yo(eo,r)||(eo=r,r=hl(sh,"onSelect"),0<r.length&&(e=new Td("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function Aa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ds={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionend:Aa("Transition","TransitionEnd")},lc={},tv={};qn&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function iu(t){if(lc[t])return lc[t];if(!Ds[t])return t;var e=Ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tv)return lc[t]=e[n];return t}var nv=iu("animationend"),rv=iu("animationiteration"),sv=iu("animationstart"),iv=iu("transitionend"),ov=new Map,Gp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){ov.set(t,e),fs(e,[t])}for(var uc=0;uc<Gp.length;uc++){var cc=Gp[uc],X1=cc.toLowerCase(),Z1=cc[0].toUpperCase()+cc.slice(1);Fr(X1,"on"+Z1)}Fr(nv,"onAnimationEnd");Fr(rv,"onAnimationIteration");Fr(sv,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(iv,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function Yp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XC(r,e,void 0,t),t.currentTarget=null}function av(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Yp(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Yp(s,l,h),i=u}}}if(ol)throw t=eh,ol=!1,eh=null,t}function ke(t,e){var n=e[ch];n===void 0&&(n=e[ch]=new Set);var r=t+"__bubble";n.has(r)||(lv(e,t,2,!1),n.add(r))}function hc(t,e,n){var r=0;e&&(r|=4),lv(n,t,r,e)}var ka="_reactListening"+Math.random().toString(36).slice(2);function wo(t){if(!t[ka]){t[ka]=!0,mg.forEach(function(n){n!=="selectionchange"&&(J1.has(n)||hc(n,!1,t),hc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ka]||(e[ka]=!0,hc("selectionchange",!1,e))}}function lv(t,e,n,r){switch(Hg(e)){case 1:var s=f1;break;case 4:s=p1;break;default:s=Cd}n=s.bind(null,e,n,t),s=void 0,!Jc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function dc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=$r(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Og(function(){var h=i,f=gd(n),a=[];e:{var c=ov.get(t);if(c!==void 0){var d=Td,p=t;switch(t){case"keypress":if(Ga(n)===0)break e;case"keydown":case"keyup":d=N1;break;case"focusin":p="focus",d=ic;break;case"focusout":p="blur",d=ic;break;case"beforeblur":case"afterblur":d=ic;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=g1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=b1;break;case nv:case rv:case sv:d=w1;break;case iv:d=P1;break;case"scroll":d=m1;break;case"wheel":d=F1;break;case"copy":case"cut":case"paste":d=S1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Vp}var _=(e&4)!==0,v=!_&&t==="scroll",m=_?c!==null?c+"Capture":null:c;_=[];for(var g=h,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,m!==null&&(S=po(g,m),S!=null&&_.push(Co(g,S,y)))),v)break;g=g.return}0<_.length&&(c=new d(c,p,null,n,f),a.push({event:c,listeners:_}))}}if(!(e&7)){e:{if(c=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",c&&n!==Xc&&(p=n.relatedTarget||n.fromElement)&&($r(p)||p[Hn]))break e;if((d||c)&&(c=f.window===f?f:(c=f.ownerDocument)?c.defaultView||c.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=h,p=p?$r(p):null,p!==null&&(v=ps(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=h),d!==p)){if(_=Fp,S="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(_=Vp,S="onPointerLeave",m="onPointerEnter",g="pointer"),v=d==null?c:Os(d),y=p==null?c:Os(p),c=new _(S,g+"leave",d,n,f),c.target=v,c.relatedTarget=y,S=null,$r(f)===h&&(_=new _(m,g+"enter",p,n,f),_.target=y,_.relatedTarget=v,S=_),v=S,d&&p)t:{for(_=d,m=p,g=0,y=_;y;y=Ss(y))g++;for(y=0,S=m;S;S=Ss(S))y++;for(;0<g-y;)_=Ss(_),g--;for(;0<y-g;)m=Ss(m),y--;for(;g--;){if(_===m||m!==null&&_===m.alternate)break t;_=Ss(_),m=Ss(m)}_=null}else _=null;d!==null&&Kp(a,c,d,_,!1),p!==null&&v!==null&&Kp(a,v,p,_,!0)}}e:{if(c=h?Os(h):window,d=c.nodeName&&c.nodeName.toLowerCase(),d==="select"||d==="input"&&c.type==="file")var w=U1;else if(Wp(c))if(Xg)w=G1;else{w=H1;var E=q1}else(d=c.nodeName)&&d.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(w=$1);if(w&&(w=w(t,h))){Qg(a,w,n,f);break e}E&&E(t,c,h),t==="focusout"&&(E=c._wrapperState)&&E.controlled&&c.type==="number"&&$c(c,"number",c.value)}switch(E=h?Os(h):window,t){case"focusin":(Wp(E)||E.contentEditable==="true")&&(Ns=E,sh=h,eo=null);break;case"focusout":eo=sh=Ns=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,$p(a,n,f);break;case"selectionchange":if(Q1)break;case"keydown":case"keyup":$p(a,n,f)}var A;if(Ad)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Is?Yg(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Gg&&n.locale!=="ko"&&(Is||T!=="onCompositionStart"?T==="onCompositionEnd"&&Is&&(A=$g()):(pr=f,Sd="value"in pr?pr.value:pr.textContent,Is=!0)),E=hl(h,T),0<E.length&&(T=new Lp(T,t,null,n,f),a.push({event:T,listeners:E}),A?T.data=A:(A=Kg(n),A!==null&&(T.data=A)))),(A=V1?B1(t,n):z1(t,n))&&(h=hl(h,"onBeforeInput"),0<h.length&&(f=new Lp("onBeforeInput","beforeinput",null,n,f),a.push({event:f,listeners:h}),f.data=A))}av(a,e)})}function Co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=po(t,n),i!=null&&r.unshift(Co(t,i,s)),i=po(t,e),i!=null&&r.push(Co(t,i,s))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=po(n,i),u!=null&&o.unshift(Co(n,u,l))):s||(u=po(n,i),u!=null&&o.push(Co(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eS=/\r\n?/g,tS=/\u0000|\uFFFD/g;function Qp(t){return(typeof t=="string"?t:""+t).replace(eS,`
`).replace(tS,"")}function xa(t,e,n){if(e=Qp(e),Qp(t)!==e&&n)throw Error(U(425))}function dl(){}var oh=null,ah=null;function lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uh=typeof setTimeout=="function"?setTimeout:void 0,nS=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,rS=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(t){return Xp.resolve(null).then(t).catch(sS)}:uh;function sS(t){setTimeout(function(){throw t})}function fc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),go(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);go(e)}function yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Ci,So="__reactProps$"+Ci,Hn="__reactContainer$"+Ci,ch="__reactEvents$"+Ci,iS="__reactListeners$"+Ci,oS="__reactHandles$"+Ci;function $r(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zp(t);t!==null;){if(n=t[Tn])return n;t=Zp(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[Tn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Os(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ou(t){return t[So]||null}var hh=[],bs=-1;function Lr(t){return{current:t}}function Ie(t){0>bs||(t.current=hh[bs],hh[bs]=null,bs--)}function Ee(t,e){bs++,hh[bs]=t.current,t.current=e}var Dr={},mt=Lr(Dr),Nt=Lr(!1),ts=Dr;function ti(t,e){var n=t.type.contextTypes;if(!n)return Dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function fl(){Ie(Nt),Ie(mt)}function Jp(t,e,n){if(mt.current!==Dr)throw Error(U(168));Ee(mt,e),Ee(Nt,n)}function uv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,qC(t)||"Unknown",s));return Fe({},n,r)}function pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,ts=mt.current,Ee(mt,t),Ee(Nt,Nt.current),!0}function em(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=uv(t,e,ts),r.__reactInternalMemoizedMergedChildContext=t,Ie(Nt),Ie(mt),Ee(mt,t)):Ie(Nt),Ee(Nt,n)}var Fn=null,au=!1,pc=!1;function cv(t){Fn===null?Fn=[t]:Fn.push(t)}function aS(t){au=!0,cv(t)}function Vr(){if(!pc&&Fn!==null){pc=!0;var t=0,e=pe;try{var n=Fn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,au=!1}catch(s){throw Fn!==null&&(Fn=Fn.slice(t+1)),Mg(vd,Vr),s}finally{pe=e,pc=!1}}return null}var Rs=[],Ps=0,ml=null,_l=0,Ht=[],$t=0,ns=null,Ln=1,Vn="";function jr(t,e){Rs[Ps++]=_l,Rs[Ps++]=ml,ml=t,_l=e}function hv(t,e,n){Ht[$t++]=Ln,Ht[$t++]=Vn,Ht[$t++]=ns,ns=t;var r=Ln;t=Vn;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ln=1<<32-hn(e)+s|n<<s|r,Vn=i+t}else Ln=1<<i|n<<s|r,Vn=t}function xd(t){t.return!==null&&(jr(t,1),hv(t,1,0))}function Id(t){for(;t===ml;)ml=Rs[--Ps],Rs[Ps]=null,_l=Rs[--Ps],Rs[Ps]=null;for(;t===ns;)ns=Ht[--$t],Ht[$t]=null,Vn=Ht[--$t],Ht[$t]=null,Ln=Ht[--$t],Ht[$t]=null}var Bt=null,Vt=null,be=!1,rn=null;function dv(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Vt=yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:Ln,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bt=t,Vt=null,!0):!1;default:return!1}}function dh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fh(t){if(be){var e=Vt;if(e){var n=e;if(!tm(t,e)){if(dh(t))throw Error(U(418));e=yr(n.nextSibling);var r=Bt;e&&tm(t,e)?dv(r,n):(t.flags=t.flags&-4097|2,be=!1,Bt=t)}}else{if(dh(t))throw Error(U(418));t.flags=t.flags&-4097|2,be=!1,Bt=t}}}function nm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function Ia(t){if(t!==Bt)return!1;if(!be)return nm(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lh(t.type,t.memoizedProps)),e&&(e=Vt)){if(dh(t))throw fv(),Error(U(418));for(;e;)dv(t,e),e=yr(e.nextSibling)}if(nm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=yr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Bt?yr(t.stateNode.nextSibling):null;return!0}function fv(){for(var t=Vt;t;)t=yr(t.nextSibling)}function ni(){Vt=Bt=null,be=!1}function Nd(t){rn===null?rn=[t]:rn.push(t)}var lS=Xn.ReactCurrentBatchConfig;function Vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Na(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rm(t){var e=t._init;return e(t._payload)}function pv(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=Tr(m,g),m.index=0,m.sibling=null,m}function i(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,g,y,S){return g===null||g.tag!==6?(g=Cc(y,m.mode,S),g.return=m,g):(g=s(g,y),g.return=m,g)}function u(m,g,y,S){var w=y.type;return w===xs?f(m,g,y.props.children,S,y.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===lr&&rm(w)===g.type)?(S=s(g,y.props),S.ref=Vi(m,g,y),S.return=m,S):(S=el(y.type,y.key,y.props,null,m.mode,S),S.ref=Vi(m,g,y),S.return=m,S)}function h(m,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Sc(y,m.mode,S),g.return=m,g):(g=s(g,y.children||[]),g.return=m,g)}function f(m,g,y,S,w){return g===null||g.tag!==7?(g=Jr(y,m.mode,S,w),g.return=m,g):(g=s(g,y),g.return=m,g)}function a(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Cc(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case va:return y=el(g.type,g.key,g.props,null,m.mode,y),y.ref=Vi(m,null,g),y.return=m,y;case ks:return g=Sc(g,m.mode,y),g.return=m,g;case lr:var S=g._init;return a(m,S(g._payload),y)}if(Gi(g)||Ri(g))return g=Jr(g,m.mode,y,null),g.return=m,g;Na(m,g)}return null}function c(m,g,y,S){var w=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:l(m,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case va:return y.key===w?u(m,g,y,S):null;case ks:return y.key===w?h(m,g,y,S):null;case lr:return w=y._init,c(m,g,w(y._payload),S)}if(Gi(y)||Ri(y))return w!==null?null:f(m,g,y,S,null);Na(m,y)}return null}function d(m,g,y,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(y)||null,l(g,m,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case va:return m=m.get(S.key===null?y:S.key)||null,u(g,m,S,w);case ks:return m=m.get(S.key===null?y:S.key)||null,h(g,m,S,w);case lr:var E=S._init;return d(m,g,y,E(S._payload),w)}if(Gi(S)||Ri(S))return m=m.get(y)||null,f(g,m,S,w,null);Na(g,S)}return null}function p(m,g,y,S){for(var w=null,E=null,A=g,T=g=0,N=null;A!==null&&T<y.length;T++){A.index>T?(N=A,A=null):N=A.sibling;var D=c(m,A,y[T],S);if(D===null){A===null&&(A=N);break}t&&A&&D.alternate===null&&e(m,A),g=i(D,g,T),E===null?w=D:E.sibling=D,E=D,A=N}if(T===y.length)return n(m,A),be&&jr(m,T),w;if(A===null){for(;T<y.length;T++)A=a(m,y[T],S),A!==null&&(g=i(A,g,T),E===null?w=A:E.sibling=A,E=A);return be&&jr(m,T),w}for(A=r(m,A);T<y.length;T++)N=d(A,m,T,y[T],S),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?T:N.key),g=i(N,g,T),E===null?w=N:E.sibling=N,E=N);return t&&A.forEach(function(x){return e(m,x)}),be&&jr(m,T),w}function _(m,g,y,S){var w=Ri(y);if(typeof w!="function")throw Error(U(150));if(y=w.call(y),y==null)throw Error(U(151));for(var E=w=null,A=g,T=g=0,N=null,D=y.next();A!==null&&!D.done;T++,D=y.next()){A.index>T?(N=A,A=null):N=A.sibling;var x=c(m,A,D.value,S);if(x===null){A===null&&(A=N);break}t&&A&&x.alternate===null&&e(m,A),g=i(x,g,T),E===null?w=x:E.sibling=x,E=x,A=N}if(D.done)return n(m,A),be&&jr(m,T),w;if(A===null){for(;!D.done;T++,D=y.next())D=a(m,D.value,S),D!==null&&(g=i(D,g,T),E===null?w=D:E.sibling=D,E=D);return be&&jr(m,T),w}for(A=r(m,A);!D.done;T++,D=y.next())D=d(A,m,T,D.value,S),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?T:D.key),g=i(D,g,T),E===null?w=D:E.sibling=D,E=D);return t&&A.forEach(function(I){return e(m,I)}),be&&jr(m,T),w}function v(m,g,y,S){if(typeof y=="object"&&y!==null&&y.type===xs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case va:e:{for(var w=y.key,E=g;E!==null;){if(E.key===w){if(w=y.type,w===xs){if(E.tag===7){n(m,E.sibling),g=s(E,y.props.children),g.return=m,m=g;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===lr&&rm(w)===E.type){n(m,E.sibling),g=s(E,y.props),g.ref=Vi(m,E,y),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}y.type===xs?(g=Jr(y.props.children,m.mode,S,y.key),g.return=m,m=g):(S=el(y.type,y.key,y.props,null,m.mode,S),S.ref=Vi(m,g,y),S.return=m,m=S)}return o(m);case ks:e:{for(E=y.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=s(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Sc(y,m.mode,S),g.return=m,m=g}return o(m);case lr:return E=y._init,v(m,g,E(y._payload),S)}if(Gi(y))return p(m,g,y,S);if(Ri(y))return _(m,g,y,S);Na(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,y),g.return=m,m=g):(n(m,g),g=Cc(y,m.mode,S),g.return=m,m=g),o(m)):n(m,g)}return v}var ri=pv(!0),mv=pv(!1),gl=Lr(null),vl=null,Ms=null,Dd=null;function Od(){Dd=Ms=vl=null}function bd(t){var e=gl.current;Ie(gl),t._currentValue=e}function ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $s(t,e){vl=t,Dd=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Dd!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(vl===null)throw Error(U(308));Ms=t,vl.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Gr=null;function Rd(t){Gr===null?Gr=[t]:Gr.push(t)}function _v(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Rd(e)):(n.next=s.next,s.next=n),e.interleaved=n,$n(t,r)}function $n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function Pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$n(t,n)}return s=r.interleaved,s===null?(e.next=e,Rd(r)):(e.next=s.next,s.next=e),r.interleaved=e,$n(t,n)}function Ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yd(t,n)}}function sm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yl(t,e,n,r){var s=t.updateQueue;ur=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var a=s.baseState;o=0,f=h=u=null,l=i;do{var c=l.lane,d=l.eventTime;if((r&c)===c){f!==null&&(f=f.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,_=l;switch(c=e,d=n,_.tag){case 1:if(p=_.payload,typeof p=="function"){a=p.call(d,a,c);break e}a=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=_.payload,c=typeof p=="function"?p.call(d,a,c):p,c==null)break e;a=Fe({},a,c);break e;case 2:ur=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,c=s.effects,c===null?s.effects=[l]:c.push(l))}else d={eventTime:d,lane:c,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=d,u=a):f=f.next=d,o|=c;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;c=l,l=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}while(!0);if(f===null&&(u=a),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ss|=o,t.lanes=o,t.memoizedState=a}}function im(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ko={},An=Lr(Ko),To=Lr(Ko),Eo=Lr(Ko);function Yr(t){if(t===Ko)throw Error(U(174));return t}function Md(t,e){switch(Ee(Eo,e),Ee(To,t),Ee(An,Ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yc(e,t)}Ie(An),Ee(An,e)}function si(){Ie(An),Ie(To),Ie(Eo)}function vv(t){Yr(Eo.current);var e=Yr(An.current),n=Yc(e,t.type);e!==n&&(Ee(To,t),Ee(An,n))}function Fd(t){To.current===t&&(Ie(An),Ie(To))}var Pe=Lr(0);function wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mc=[];function Ld(){for(var t=0;t<mc.length;t++)mc[t]._workInProgressVersionPrimary=null;mc.length=0}var Ka=Xn.ReactCurrentDispatcher,_c=Xn.ReactCurrentBatchConfig,rs=0,Me=null,Ye=null,et=null,Cl=!1,to=!1,Ao=0,uS=0;function ct(){throw Error(U(321))}function Vd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Bd(t,e,n,r,s,i){if(rs=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?fS:pS,t=n(r,s),to){i=0;do{if(to=!1,Ao=0,25<=i)throw Error(U(301));i+=1,et=Ye=null,e.updateQueue=null,Ka.current=mS,t=n(r,s)}while(to)}if(Ka.current=Sl,e=Ye!==null&&Ye.next!==null,rs=0,et=Ye=Me=null,Cl=!1,e)throw Error(U(300));return t}function zd(){var t=Ao!==0;return Ao=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Me.memoizedState=et=t:et=et.next=t,et}function Jt(){if(Ye===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=et===null?Me.memoizedState:et.next;if(e!==null)et=e,Ye=t;else{if(t===null)throw Error(U(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Me.memoizedState=et=t:et=et.next=t}return et}function ko(t,e){return typeof e=="function"?e(t):e}function gc(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var f=h.lane;if((rs&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var a={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=a,o=r):u=u.next=a,Me.lanes|=f,ss|=f}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,mn(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vc(t){var e=Jt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mn(i,e.memoizedState)||(xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yv(){}function wv(t,e){var n=Me,r=Jt(),s=e(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,xt=!0),r=r.queue,Wd(Tv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,xo(9,Sv.bind(null,n,r,s,e),void 0,null),rt===null)throw Error(U(349));rs&30||Cv(n,e,s)}return s}function Cv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sv(t,e,n,r){e.value=n,e.getSnapshot=r,Ev(e)&&Av(t)}function Tv(t,e,n){return n(function(){Ev(e)&&Av(t)})}function Ev(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function Av(t){var e=$n(t,1);e!==null&&dn(e,t,1,-1)}function om(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:t},e.queue=t,t=t.dispatch=dS.bind(null,Me,t),[e.memoizedState,t]}function xo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kv(){return Jt().memoizedState}function Qa(t,e,n,r){var s=Sn();Me.flags|=t,s.memoizedState=xo(1|e,n,void 0,r===void 0?null:r)}function lu(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&Vd(r,o.deps)){s.memoizedState=xo(e,n,i,r);return}}Me.flags|=t,s.memoizedState=xo(1|e,n,i,r)}function am(t,e){return Qa(8390656,8,t,e)}function Wd(t,e){return lu(2048,8,t,e)}function xv(t,e){return lu(4,2,t,e)}function Iv(t,e){return lu(4,4,t,e)}function Nv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dv(t,e,n){return n=n!=null?n.concat([t]):null,lu(4,4,Nv.bind(null,e,t),n)}function jd(){}function Ov(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bv(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Rv(t,e,n){return rs&21?(mn(n,e)||(n=Vg(),Me.lanes|=n,ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function cS(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=_c.transition;_c.transition={};try{t(!1),e()}finally{pe=n,_c.transition=r}}function Pv(){return Jt().memoizedState}function hS(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mv(t))Fv(e,n);else if(n=_v(t,e,n,r),n!==null){var s=Ct();dn(n,t,r,s),Lv(n,e,r)}}function dS(t,e,n){var r=Sr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mv(t))Fv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,mn(l,o)){var u=e.interleaved;u===null?(s.next=s,Rd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=_v(t,e,s,r),n!==null&&(s=Ct(),dn(n,t,r,s),Lv(n,e,r))}}function Mv(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Fv(t,e){to=Cl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yd(t,n)}}var Sl={readContext:Zt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},fS={readContext:Zt,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:am,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qa(4194308,4,Nv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qa(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hS.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:om,useDebugValue:jd,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=om(!1),e=t[0];return t=cS.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Sn();if(be){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),rt===null)throw Error(U(349));rs&30||Cv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,am(Tv.bind(null,r,i,t),[t]),r.flags|=2048,xo(9,Sv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sn(),e=rt.identifierPrefix;if(be){var n=Vn,r=Ln;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ao++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pS={readContext:Zt,useCallback:Ov,useContext:Zt,useEffect:Wd,useImperativeHandle:Dv,useInsertionEffect:xv,useLayoutEffect:Iv,useMemo:bv,useReducer:gc,useRef:kv,useState:function(){return gc(ko)},useDebugValue:jd,useDeferredValue:function(t){var e=Jt();return Rv(e,Ye.memoizedState,t)},useTransition:function(){var t=gc(ko)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:yv,useSyncExternalStore:wv,useId:Pv,unstable_isNewReconciler:!1},mS={readContext:Zt,useCallback:Ov,useContext:Zt,useEffect:Wd,useImperativeHandle:Dv,useInsertionEffect:xv,useLayoutEffect:Iv,useMemo:bv,useReducer:vc,useRef:kv,useState:function(){return vc(ko)},useDebugValue:jd,useDeferredValue:function(t){var e=Jt();return Ye===null?e.memoizedState=t:Rv(e,Ye.memoizedState,t)},useTransition:function(){var t=vc(ko)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:yv,useSyncExternalStore:wv,useId:Pv,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uu={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Sr(t),i=Wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(dn(e,t,s,r),Ya(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Sr(t),i=Wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(dn(e,t,s,r),Ya(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Sr(t),s=Wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=wr(t,s,r),e!==null&&(dn(e,t,r,n),Ya(e,t,r))}};function lm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yo(n,r)||!yo(s,i):!0}function Vv(t,e,n){var r=!1,s=Dr,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Dt(e)?ts:mt.current,r=e.contextTypes,i=(r=r!=null)?ti(t,s):Dr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uu.enqueueReplaceState(e,e.state,null)}function _h(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Pd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Dt(e)?ts:mt.current,s.context=ti(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uu.enqueueReplaceState(s,s.state,null),yl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ii(t,e){try{var n="",r=e;do n+=UC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _S=typeof WeakMap=="function"?WeakMap:Map;function Bv(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){El||(El=!0,xh=r),gh(t,e)},n}function zv(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gh(t,e),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _S;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DS.bind(null,t,e,n),e.then(t,t))}function hm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var gS=Xn.ReactCurrentOwner,xt=!1;function gt(t,e,n,r){e.child=t===null?mv(e,null,n,r):ri(e,t.child,n,r)}function fm(t,e,n,r,s){n=n.render;var i=e.ref;return $s(e,s),r=Bd(t,e,n,r,i,s),n=zd(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(be&&n&&xd(e),e.flags|=1,gt(t,e,r,s),e.child)}function pm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Wv(t,e,i,r,s)):(t=el(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yo,n(o,r)&&t.ref===e.ref)return Gn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Wv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yo(i,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Gn(t,e,s)}return vh(t,e,n,r,s)}function jv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Ls,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(Ls,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ee(Ls,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ee(Ls,Ft),Ft|=r;return gt(t,e,s,n),e.child}function Uv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vh(t,e,n,r,s){var i=Dt(n)?ts:mt.current;return i=ti(e,i),$s(e,s),n=Bd(t,e,n,r,i,s),r=zd(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(be&&r&&xd(e),e.flags|=1,gt(t,e,n,s),e.child)}function mm(t,e,n,r,s){if(Dt(n)){var i=!0;pl(e)}else i=!1;if($s(e,s),e.stateNode===null)Xa(t,e),Vv(e,n,r),_h(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Zt(h):(h=Dt(n)?ts:mt.current,h=ti(e,h));var f=n.getDerivedStateFromProps,a=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";a||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&um(e,o,r,h),ur=!1;var c=e.memoizedState;o.state=c,yl(e,r,o,s),u=e.memoizedState,l!==r||c!==u||Nt.current||ur?(typeof f=="function"&&(mh(e,n,f,r),u=e.memoizedState),(l=ur||lm(e,n,l,r,c,u,h))?(a||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:tn(e.type,l),o.props=h,a=e.pendingProps,c=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zt(u):(u=Dt(n)?ts:mt.current,u=ti(e,u));var d=n.getDerivedStateFromProps;(f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||c!==u)&&um(e,o,r,u),ur=!1,c=e.memoizedState,o.state=c,yl(e,r,o,s);var p=e.memoizedState;l!==a||c!==p||Nt.current||ur?(typeof d=="function"&&(mh(e,n,d,r),p=e.memoizedState),(h=ur||lm(e,n,h,r,c,p,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return yh(t,e,n,r,i,s)}function yh(t,e,n,r,s,i){Uv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&em(e,n,!1),Gn(t,e,i);r=e.stateNode,gS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ri(e,t.child,null,i),e.child=ri(e,null,l,i)):gt(t,e,l,i),e.memoizedState=r.state,s&&em(e,n,!0),e.child}function qv(t){var e=t.stateNode;e.pendingContext?Jp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jp(t,e.context,!1),Md(t,e.containerInfo)}function _m(t,e,n,r,s){return ni(),Nd(s),e.flags|=256,gt(t,e,n,r),e.child}var wh={dehydrated:null,treeContext:null,retryLane:0};function Ch(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hv(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Pe,s&1),t===null)return fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=du(o,r,0,null),t=Jr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ch(n),e.memoizedState=wh,t):Ud(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Tr(l,i):(i=Jr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ch(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wh,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ud(t,e){return e=du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Da(t,e,n,r){return r!==null&&Nd(r),ri(e,t.child,null,n),t=Ud(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yc(Error(U(422))),Da(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=du({mode:"visible",children:r.children},s,0,null),i=Jr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ri(e,t.child,null,o),e.child.memoizedState=Ch(o),e.memoizedState=wh,i);if(!(e.mode&1))return Da(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=yc(i,r,void 0),Da(t,e,o,r)}if(l=(o&t.childLanes)!==0,xt||l){if(r=rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$n(t,s),dn(r,t,s,-1))}return Kd(),r=yc(Error(U(421))),Da(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=OS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=yr(s.nextSibling),Bt=e,be=!0,rn=null,t!==null&&(Ht[$t++]=Ln,Ht[$t++]=Vn,Ht[$t++]=ns,Ln=t.id,Vn=t.overflow,ns=e),e=Ud(e,r.children),e.flags|=4096,e)}function gm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ph(t.return,e,n)}function wc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $v(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gm(t,n,e);else if(t.tag===19)gm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wc(e,!0,n,null,i);break;case"together":wc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yS(t,e,n){switch(e.tag){case 3:qv(e),ni();break;case 5:vv(e);break;case 1:Dt(e.type)&&pl(e);break;case 4:Md(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ee(gl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Hv(t,e,n):(Ee(Pe,Pe.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);Ee(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $v(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,jv(t,e,n)}return Gn(t,e,n)}var Gv,Sh,Yv,Kv;Gv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sh=function(){};Yv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Yr(An.current);var i=null;switch(n){case"input":s=qc(t,s),r=qc(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=Gc(t,s),r=Gc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dl)}Kc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ho.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ho.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ke("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Kv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bi(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wS(t,e,n){var r=e.pendingProps;switch(Id(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Dt(e.type)&&fl(),ht(e),null;case 3:return r=e.stateNode,si(),Ie(Nt),Ie(mt),Ld(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(Dh(rn),rn=null))),Sh(t,e),ht(e),null;case 5:Fd(e);var s=Yr(Eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Yv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ht(e),null}if(t=Yr(An.current),Ia(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tn]=e,r[So]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Ki.length;s++)ke(Ki[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":kp(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":Ip(r,i),ke("invalid",r)}Kc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&xa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&xa(r.textContent,l,t),s=["children",""+l]):ho.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":ya(r),xp(r,i,!0);break;case"textarea":ya(r),Np(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[So]=r,Gv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qc(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ki.length;s++)ke(Ki[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":kp(t,r),s=qc(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Ip(t,r),s=Gc(t,r),ke("invalid",t);break;default:s=r}Kc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?kg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Eg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fo(t,u):typeof u=="number"&&fo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ho.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&fd(t,i,u,o))}switch(n){case"input":ya(t),xp(t,r,!1);break;case"textarea":ya(t),Np(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?js(t,!!r.multiple,i,!1):r.defaultValue!=null&&js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Kv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Yr(Eo.current),Yr(An.current),Ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(i=r.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:xa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return ht(e),null;case 13:if(Ie(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Vt!==null&&e.mode&1&&!(e.flags&128))fv(),ni(),e.flags|=98560,i=!1;else if(i=Ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Tn]=e}else ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),i=!1}else rn!==null&&(Dh(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Xe===0&&(Xe=3):Kd())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return si(),Sh(t,e),t===null&&wo(e.stateNode.containerInfo),ht(e),null;case 10:return bd(e.type._context),ht(e),null;case 17:return Dt(e.type)&&fl(),ht(e),null;case 19:if(Ie(Pe),i=e.memoizedState,i===null)return ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Bi(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wl(t),o!==null){for(e.flags|=128,Bi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>oi&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304)}else{if(!r)if(t=wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!be)return ht(e),null}else 2*je()-i.renderingStartTime>oi&&n!==1073741824&&(e.flags|=128,r=!0,Bi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Pe.current,Ee(Pe,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Yd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function CS(t,e){switch(Id(e),e.tag){case 1:return Dt(e.type)&&fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return si(),Ie(Nt),Ie(mt),Ld(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fd(e),null;case 13:if(Ie(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Pe),null;case 4:return si(),null;case 10:return bd(e.type._context),null;case 22:case 23:return Yd(),null;case 24:return null;default:return null}}var Oa=!1,dt=!1,SS=typeof WeakSet=="function"?WeakSet:Set,G=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Th(t,e,n){try{n()}catch(r){Le(t,e,r)}}var vm=!1;function TS(t,e){if(oh=ul,t=ev(),kd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,a=t,c=null;t:for(;;){for(var d;a!==n||s!==0&&a.nodeType!==3||(l=o+s),a!==i||r!==0&&a.nodeType!==3||(u=o+r),a.nodeType===3&&(o+=a.nodeValue.length),(d=a.firstChild)!==null;)c=a,a=d;for(;;){if(a===t)break t;if(c===n&&++h===s&&(l=o),c===i&&++f===r&&(u=o),(d=a.nextSibling)!==null)break;a=c,c=a.parentNode}a=d}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ah={focusedElem:t,selectionRange:n},ul=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var _=p.memoizedProps,v=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:tn(e.type,_),v);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(S){Le(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return p=vm,vm=!1,p}function no(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Th(e,n,i)}s=s.next}while(s!==r)}}function cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Eh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qv(t){var e=t.alternate;e!==null&&(t.alternate=null,Qv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[So],delete e[ch],delete e[iS],delete e[oS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xv(t){return t.tag===5||t.tag===3||t.tag===4}function ym(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dl));else if(r!==4&&(t=t.child,t!==null))for(Ah(t,e,n),t=t.sibling;t!==null;)Ah(t,e,n),t=t.sibling}function kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kh(t,e,n),t=t.sibling;t!==null;)kh(t,e,n),t=t.sibling}var ot=null,nn=!1;function or(t,e,n){for(n=n.child;n!==null;)Zv(t,e,n),n=n.sibling}function Zv(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(nu,n)}catch{}switch(n.tag){case 5:dt||Fs(n,e);case 6:var r=ot,s=nn;ot=null,or(t,e,n),ot=r,nn=s,ot!==null&&(nn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(nn?(t=ot,n=n.stateNode,t.nodeType===8?fc(t.parentNode,n):t.nodeType===1&&fc(t,n),go(t)):fc(ot,n.stateNode));break;case 4:r=ot,s=nn,ot=n.stateNode.containerInfo,nn=!0,or(t,e,n),ot=r,nn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Th(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!dt&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,or(t,e,n),dt=r):or(t,e,n);break;default:or(t,e,n)}}function wm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SS),e.forEach(function(r){var s=bS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,nn=!1;break e;case 3:ot=l.stateNode.containerInfo,nn=!0;break e;case 4:ot=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(ot===null)throw Error(U(160));Zv(i,o,s),ot=null,nn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Le(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jv(e,t),e=e.sibling}function Jv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),Cn(t),r&4){try{no(3,t,t.return),cu(3,t)}catch(_){Le(t,t.return,_)}try{no(5,t,t.return)}catch(_){Le(t,t.return,_)}}break;case 1:en(e,t),Cn(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(en(e,t),Cn(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var s=t.stateNode;try{fo(s,"")}catch(_){Le(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Cg(s,i),Qc(l,o);var h=Qc(l,i);for(o=0;o<u.length;o+=2){var f=u[o],a=u[o+1];f==="style"?kg(s,a):f==="dangerouslySetInnerHTML"?Eg(s,a):f==="children"?fo(s,a):fd(s,f,a,h)}switch(l){case"input":Hc(s,i);break;case"textarea":Sg(s,i);break;case"select":var c=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var d=i.value;d!=null?js(s,!!i.multiple,d,!1):c!==!!i.multiple&&(i.defaultValue!=null?js(s,!!i.multiple,i.defaultValue,!0):js(s,!!i.multiple,i.multiple?[]:"",!1))}s[So]=i}catch(_){Le(t,t.return,_)}}break;case 6:if(en(e,t),Cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Le(t,t.return,_)}}break;case 3:if(en(e,t),Cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{go(e.containerInfo)}catch(_){Le(t,t.return,_)}break;case 4:en(e,t),Cn(t);break;case 13:en(e,t),Cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($d=je())),r&4&&wm(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(h=dt)||f,en(e,t),dt=h):en(e,t),Cn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(a=G=f;G!==null;){switch(c=G,d=c.child,c.tag){case 0:case 11:case 14:case 15:no(4,c,c.return);break;case 1:Fs(c,c.return);var p=c.stateNode;if(typeof p.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(_){Le(r,n,_)}}break;case 5:Fs(c,c.return);break;case 22:if(c.memoizedState!==null){Sm(a);continue}}d!==null?(d.return=c,G=d):Sm(a)}f=f.sibling}e:for(f=null,a=t;;){if(a.tag===5){if(f===null){f=a;try{s=a.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=a.stateNode,u=a.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ag("display",o))}catch(_){Le(t,t.return,_)}}}else if(a.tag===6){if(f===null)try{a.stateNode.nodeValue=h?"":a.memoizedProps}catch(_){Le(t,t.return,_)}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}}break;case 19:en(e,t),Cn(t),r&4&&wm(t);break;case 21:break;default:en(e,t),Cn(t)}}function Cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fo(s,""),r.flags&=-33);var i=ym(t);kh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ym(t);Ah(t,l,o);break;default:throw Error(U(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ES(t,e,n){G=t,ey(t)}function ey(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Oa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dt;l=Oa;var h=dt;if(Oa=o,(dt=u)&&!h)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Tm(s):u!==null?(u.return=o,G=u):Tm(s);for(;i!==null;)G=i,ey(i),i=i.sibling;G=s,Oa=l,dt=h}Cm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):Cm(t)}}function Cm(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&im(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}im(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var a=f.dehydrated;a!==null&&go(a)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}dt||e.flags&512&&Eh(e)}catch(c){Le(e,e.return,c)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Sm(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Tm(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cu(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{Eh(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{Eh(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var AS=Math.ceil,Tl=Xn.ReactCurrentDispatcher,qd=Xn.ReactCurrentOwner,Kt=Xn.ReactCurrentBatchConfig,he=0,rt=null,$e=null,at=0,Ft=0,Ls=Lr(0),Xe=0,Io=null,ss=0,hu=0,Hd=0,ro=null,At=null,$d=0,oi=1/0,Pn=null,El=!1,xh=null,Cr=null,ba=!1,mr=null,Al=0,so=0,Ih=null,Za=-1,Ja=0;function Ct(){return he&6?je():Za!==-1?Za:Za=je()}function Sr(t){return t.mode&1?he&2&&at!==0?at&-at:lS.transition!==null?(Ja===0&&(Ja=Vg()),Ja):(t=pe,t!==0||(t=window.event,t=t===void 0?16:Hg(t.type)),t):1}function dn(t,e,n,r){if(50<so)throw so=0,Ih=null,Error(U(185));$o(t,n,r),(!(he&2)||t!==rt)&&(t===rt&&(!(he&2)&&(hu|=n),Xe===4&&fr(t,at)),Ot(t,r),n===1&&he===0&&!(e.mode&1)&&(oi=je()+500,au&&Vr()))}function Ot(t,e){var n=t.callbackNode;l1(t,e);var r=ll(t,t===rt?at:0);if(r===0)n!==null&&bp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bp(n),e===1)t.tag===0?aS(Em.bind(null,t)):cv(Em.bind(null,t)),rS(function(){!(he&6)&&Vr()}),n=null;else{switch(Bg(r)){case 1:n=vd;break;case 4:n=Fg;break;case 16:n=al;break;case 536870912:n=Lg;break;default:n=al}n=ly(n,ty.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ty(t,e){if(Za=-1,Ja=0,he&6)throw Error(U(327));var n=t.callbackNode;if(Gs()&&t.callbackNode!==n)return null;var r=ll(t,t===rt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kl(t,r);else{e=r;var s=he;he|=2;var i=ry();(rt!==t||at!==e)&&(Pn=null,oi=je()+500,Zr(t,e));do try{IS();break}catch(l){ny(t,l)}while(!0);Od(),Tl.current=i,he=s,$e!==null?e=0:(rt=null,at=0,e=Xe)}if(e!==0){if(e===2&&(s=th(t),s!==0&&(r=s,e=Nh(t,s))),e===1)throw n=Io,Zr(t,0),fr(t,r),Ot(t,je()),n;if(e===6)fr(t,r);else{if(s=t.current.alternate,!(r&30)&&!kS(s)&&(e=kl(t,r),e===2&&(i=th(t),i!==0&&(r=i,e=Nh(t,i))),e===1))throw n=Io,Zr(t,0),fr(t,r),Ot(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Ur(t,At,Pn);break;case 3:if(fr(t,r),(r&130023424)===r&&(e=$d+500-je(),10<e)){if(ll(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=uh(Ur.bind(null,t,At,Pn),e);break}Ur(t,At,Pn);break;case 4:if(fr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AS(r/1960))-r,10<r){t.timeoutHandle=uh(Ur.bind(null,t,At,Pn),r);break}Ur(t,At,Pn);break;case 5:Ur(t,At,Pn);break;default:throw Error(U(329))}}}return Ot(t,je()),t.callbackNode===n?ty.bind(null,t):null}function Nh(t,e){var n=ro;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=kl(t,e),t!==2&&(e=At,At=n,e!==null&&Dh(e)),t}function Dh(t){At===null?At=t:At.push.apply(At,t)}function kS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fr(t,e){for(e&=~Hd,e&=~hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function Em(t){if(he&6)throw Error(U(327));Gs();var e=ll(t,0);if(!(e&1))return Ot(t,je()),null;var n=kl(t,e);if(t.tag!==0&&n===2){var r=th(t);r!==0&&(e=r,n=Nh(t,r))}if(n===1)throw n=Io,Zr(t,0),fr(t,e),Ot(t,je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,At,Pn),Ot(t,je()),null}function Gd(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(oi=je()+500,au&&Vr())}}function is(t){mr!==null&&mr.tag===0&&!(he&6)&&Gs();var e=he;he|=1;var n=Kt.transition,r=pe;try{if(Kt.transition=null,pe=1,t)return t()}finally{pe=r,Kt.transition=n,he=e,!(he&6)&&Vr()}}function Yd(){Ft=Ls.current,Ie(Ls)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nS(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(Id(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fl();break;case 3:si(),Ie(Nt),Ie(mt),Ld();break;case 5:Fd(r);break;case 4:si();break;case 13:Ie(Pe);break;case 19:Ie(Pe);break;case 10:bd(r.type._context);break;case 22:case 23:Yd()}n=n.return}if(rt=t,$e=t=Tr(t.current,null),at=Ft=e,Xe=0,Io=null,Hd=hu=ss=0,At=ro=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gr=null}return t}function ny(t,e){do{var n=$e;try{if(Od(),Ka.current=Sl,Cl){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cl=!1}if(rs=0,et=Ye=Me=null,to=!1,Ao=0,qd.current=null,n===null||n.return===null){Xe=1,Io=e,$e=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,a=f.tag;if(!(f.mode&1)&&(a===0||a===11||a===15)){var c=f.alternate;c?(f.updateQueue=c.updateQueue,f.memoizedState=c.memoizedState,f.lanes=c.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=hm(o);if(d!==null){d.flags&=-257,dm(d,o,l,i,e),d.mode&1&&cm(i,h,e),e=d,u=h;var p=e.updateQueue;if(p===null){var _=new Set;_.add(u),e.updateQueue=_}else p.add(u);break e}else{if(!(e&1)){cm(i,h,e),Kd();break e}u=Error(U(426))}}else if(be&&l.mode&1){var v=hm(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),dm(v,o,l,i,e),Nd(ii(u,l));break e}}i=u=ii(u,l),Xe!==4&&(Xe=2),ro===null?ro=[i]:ro.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Bv(i,u,e);sm(i,m);break e;case 1:l=u;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cr===null||!Cr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=zv(i,l,e);sm(i,S);break e}}i=i.return}while(i!==null)}iy(n)}catch(w){e=w,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function ry(){var t=Tl.current;return Tl.current=Sl,t===null?Sl:t}function Kd(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),rt===null||!(ss&268435455)&&!(hu&268435455)||fr(rt,at)}function kl(t,e){var n=he;he|=2;var r=ry();(rt!==t||at!==e)&&(Pn=null,Zr(t,e));do try{xS();break}catch(s){ny(t,s)}while(!0);if(Od(),he=n,Tl.current=r,$e!==null)throw Error(U(261));return rt=null,at=0,Xe}function xS(){for(;$e!==null;)sy($e)}function IS(){for(;$e!==null&&!JC();)sy($e)}function sy(t){var e=ay(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?iy(t):$e=e,qd.current=null}function iy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CS(n,e),n!==null){n.flags&=32767,$e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,$e=null;return}}else if(n=wS(n,e,Ft),n!==null){$e=n;return}if(e=e.sibling,e!==null){$e=e;return}$e=e=t}while(e!==null);Xe===0&&(Xe=5)}function Ur(t,e,n){var r=pe,s=Kt.transition;try{Kt.transition=null,pe=1,NS(t,e,n,r)}finally{Kt.transition=s,pe=r}return null}function NS(t,e,n,r){do Gs();while(mr!==null);if(he&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(u1(t,i),t===rt&&($e=rt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ba||(ba=!0,ly(al,function(){return Gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=pe;pe=1;var l=he;he|=4,qd.current=null,TS(t,n),Jv(n,t),K1(ah),ul=!!oh,ah=oh=null,t.current=n,ES(n),e1(),he=l,pe=o,Kt.transition=i}else t.current=n;if(ba&&(ba=!1,mr=t,Al=s),i=t.pendingLanes,i===0&&(Cr=null),r1(n.stateNode),Ot(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(El)throw El=!1,t=xh,xh=null,t;return Al&1&&t.tag!==0&&Gs(),i=t.pendingLanes,i&1?t===Ih?so++:(so=0,Ih=t):so=0,Vr(),null}function Gs(){if(mr!==null){var t=Bg(Al),e=Kt.transition,n=pe;try{if(Kt.transition=null,pe=16>t?16:t,mr===null)var r=!1;else{if(t=mr,mr=null,Al=0,he&6)throw Error(U(331));var s=he;for(he|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(G=h;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:no(8,f,i)}var a=f.child;if(a!==null)a.return=f,G=a;else for(;G!==null;){f=G;var c=f.sibling,d=f.return;if(Qv(f),f===h){G=null;break}if(c!==null){c.return=d,G=c;break}G=d}}}var p=i.alternate;if(p!==null){var _=p.child;if(_!==null){p.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:no(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,G=m;break e}G=i.return}}var g=t.current;for(G=g;G!==null;){o=G;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,G=y;else e:for(o=g;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cu(9,l)}}catch(w){Le(l,l.return,w)}if(l===o){G=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,G=S;break e}G=l.return}}if(he=s,Vr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(nu,t)}catch{}r=!0}return r}finally{pe=n,Kt.transition=e}}return!1}function Am(t,e,n){e=ii(n,e),e=Bv(t,e,1),t=wr(t,e,1),e=Ct(),t!==null&&($o(t,1,e),Ot(t,e))}function Le(t,e,n){if(t.tag===3)Am(t,t,n);else for(;e!==null;){if(e.tag===3){Am(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){t=ii(n,t),t=zv(e,t,1),e=wr(e,t,1),t=Ct(),e!==null&&($o(e,1,t),Ot(e,t));break}}e=e.return}}function DS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(at&n)===n&&(Xe===4||Xe===3&&(at&130023424)===at&&500>je()-$d?Zr(t,0):Hd|=n),Ot(t,e)}function oy(t,e){e===0&&(t.mode&1?(e=Sa,Sa<<=1,!(Sa&130023424)&&(Sa=4194304)):e=1);var n=Ct();t=$n(t,e),t!==null&&($o(t,e,n),Ot(t,n))}function OS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oy(t,n)}function bS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),oy(t,n)}var ay;ay=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,yS(t,e,n);xt=!!(t.flags&131072)}else xt=!1,be&&e.flags&1048576&&hv(e,_l,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xa(t,e),t=e.pendingProps;var s=ti(e,mt.current);$s(e,n),s=Bd(null,e,r,t,s,n);var i=zd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,pl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pd(e),s.updater=uu,e.stateNode=s,s._reactInternals=e,_h(e,r,t,n),e=yh(null,e,r,!0,i,n)):(e.tag=0,be&&i&&xd(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=PS(r),t=tn(r,t),s){case 0:e=vh(null,e,r,t,n);break e;case 1:e=mm(null,e,r,t,n);break e;case 11:e=fm(null,e,r,t,n);break e;case 14:e=pm(null,e,r,tn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),vh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),mm(t,e,r,s,n);case 3:e:{if(qv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,gv(t,e),yl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ii(Error(U(423)),e),e=_m(t,e,r,n,s);break e}else if(r!==s){s=ii(Error(U(424)),e),e=_m(t,e,r,n,s);break e}else for(Vt=yr(e.stateNode.containerInfo.firstChild),Bt=e,be=!0,rn=null,n=mv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ni(),r===s){e=Gn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return vv(e),t===null&&fh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,lh(r,s)?o=null:i!==null&&lh(r,i)&&(e.flags|=32),Uv(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&fh(e),null;case 13:return Hv(t,e,n);case 4:return Md(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ri(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),fm(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ee(gl,r._currentValue),r._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!Nt.current){e=Gn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Wn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ph(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ph(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$s(e,n),s=Zt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),pm(t,e,r,s,n);case 15:return Wv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Xa(t,e),e.tag=1,Dt(r)?(t=!0,pl(e)):t=!1,$s(e,n),Vv(e,r,s),_h(e,r,s,n),yh(null,e,r,!0,t,n);case 19:return $v(t,e,n);case 22:return jv(t,e,n)}throw Error(U(156,e.tag))};function ly(t,e){return Mg(t,e)}function RS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new RS(t,e,n,r)}function Qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PS(t){if(typeof t=="function")return Qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===_d)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function el(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return Jr(n.children,s,i,e);case pd:o=8,s|=8;break;case zc:return t=Gt(12,n,e,s|2),t.elementType=zc,t.lanes=i,t;case Wc:return t=Gt(13,n,e,s),t.elementType=Wc,t.lanes=i,t;case jc:return t=Gt(19,n,e,s),t.elementType=jc,t.lanes=i,t;case vg:return du(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _g:o=10;break e;case gg:o=9;break e;case md:o=11;break e;case _d:o=14;break e;case lr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Jr(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function du(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=vg,t.lanes=n,t.stateNode={isHidden:!1},t}function Cc(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function Sc(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nc(0),this.expirationTimes=nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xd(t,e,n,r,s,i,o,l,u){return t=new MS(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pd(i),t}function FS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uy(t){if(!t)return Dr;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Dt(n))return uv(t,n,e)}return e}function cy(t,e,n,r,s,i,o,l,u){return t=Xd(n,r,!0,t,s,i,o,l,u),t.context=uy(null),n=t.current,r=Ct(),s=Sr(n),i=Wn(r,s),i.callback=e??null,wr(n,i,s),t.current.lanes=s,$o(t,s,r),Ot(t,r),t}function fu(t,e,n,r){var s=e.current,i=Ct(),o=Sr(s);return n=uy(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(s,e,o),t!==null&&(dn(t,s,o,i),Ya(t,s,o)),o}function xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function km(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zd(t,e){km(t,e),(t=t.alternate)&&km(t,e)}function LS(){return null}var hy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jd(t){this._internalRoot=t}pu.prototype.render=Jd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));fu(t,e,null,null)};pu.prototype.unmount=Jd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;is(function(){fu(null,t,null,null)}),e[Hn]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=jg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&qg(t)}};function ef(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xm(){}function VS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=xl(o);i.call(h)}}var o=cy(e,r,t,0,null,!1,!1,"",xm);return t._reactRootContainer=o,t[Hn]=o.current,wo(t.nodeType===8?t.parentNode:t),is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=xl(u);l.call(h)}}var u=Xd(t,0,!1,null,null,!1,!1,"",xm);return t._reactRootContainer=u,t[Hn]=u.current,wo(t.nodeType===8?t.parentNode:t),is(function(){fu(e,u,n,r)}),u}function _u(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=xl(o);l.call(u)}}fu(e,o,t,s)}else o=VS(n,e,t,s,r);return xl(o)}zg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yi(e.pendingLanes);n!==0&&(yd(e,n|1),Ot(e,je()),!(he&6)&&(oi=je()+500,Vr()))}break;case 13:is(function(){var r=$n(t,1);if(r!==null){var s=Ct();dn(r,t,1,s)}}),Zd(t,1)}};wd=function(t){if(t.tag===13){var e=$n(t,134217728);if(e!==null){var n=Ct();dn(e,t,134217728,n)}Zd(t,134217728)}};Wg=function(t){if(t.tag===13){var e=Sr(t),n=$n(t,e);if(n!==null){var r=Ct();dn(n,t,e,r)}Zd(t,e)}};jg=function(){return pe};Ug=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Zc=function(t,e,n){switch(e){case"input":if(Hc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ou(r);if(!s)throw Error(U(90));wg(r),Hc(r,s)}}}break;case"textarea":Sg(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};Ng=Gd;Dg=is;var BS={usingClientEntryPoint:!1,Events:[Yo,Os,ou,xg,Ig,Gd]},zi={findFiberByHostInstance:$r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zS={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rg(t),t===null?null:t.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ra.isDisabled&&Ra.supportsFiber)try{nu=Ra.inject(zS),En=Ra}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BS;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ef(e))throw Error(U(200));return FS(t,e,null,n)};jt.createRoot=function(t,e){if(!ef(t))throw Error(U(299));var n=!1,r="",s=hy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xd(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,wo(t.nodeType===8?t.parentNode:t),new Jd(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Rg(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return is(t)};jt.hydrate=function(t,e,n){if(!mu(e))throw Error(U(200));return _u(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!ef(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cy(e,null,t,1,n??null,s,!1,i,o),t[Hn]=e.current,wo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pu(e)};jt.render=function(t,e,n){if(!mu(e))throw Error(U(200));return _u(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!mu(t))throw Error(U(40));return t._reactRootContainer?(is(function(){_u(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};jt.unstable_batchedUpdates=Gd;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return _u(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function dy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dy)}catch(t){console.error(t)}}dy(),dg.exports=jt;var WS=dg.exports,Im=WS;Vc.createRoot=Im.createRoot,Vc.hydrateRoot=Im.hydrateRoot;var Nm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(t,e){if(!t)throw Si(e)},Si=function(t){return new Error("Firebase Database ("+fy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,a=(i&3)<<4|l>>4;let c=(l&15)<<2|h>>6,d=h&63;u||(d=64,o||(c=64)),r.push(n[f],n[a],n[c],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(py(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const a=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||a==null)throw new US;const c=i<<2|l>>4;if(r.push(c),h!==64){const d=l<<4&240|h>>2;if(r.push(d),a!==64){const p=h<<6&192|a;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class US extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const my=function(t){const e=py(t);return tf.encodeByteArray(e,!0)},Il=function(t){return my(t).replace(/\./g,"")},Oh=function(t){try{return tf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){return _y(void 0,t)}function _y(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!HS(n)||(t[n]=_y(t[n],e[n]));return t}function HS(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=()=>$S().__FIREBASE_DEFAULTS__,YS=()=>{if(typeof process>"u"||typeof Nm>"u")return;const t=Nm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Oh(t[1]);return e&&JSON.parse(e)},gy=()=>{try{return GS()||YS()||KS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QS=t=>{var e,n;return(n=(e=gy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XS=t=>{const e=QS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vy=()=>{var t;return(t=gy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Il(JSON.stringify(n)),Il(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(JS())}function eT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wy(){return fy.NODE_ADMIN===!0}function tT(){try{return typeof indexedDB=="object"}catch{return!1}}function nT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="FirebaseError";class Qo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rT,Object.setPrototypeOf(this,Qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cy.prototype.create)}}class Cy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?sT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Qo(s,l,r)}}function sT(t,e){return t.replace(iT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const iT=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t){return JSON.parse(t)}function Ke(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=No(Oh(i[0])||""),n=No(Oh(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},oT=function(t){const e=Sy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},aT=function(t){const e=Sy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ai(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Dm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nl(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function bh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Om(i)&&Om(o)){if(!bh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Om(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let a=0;a<16;a++)r[a]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let a=0;a<16;a++)r[a]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let a=16;a<80;a++){const c=r[a-3]^r[a-8]^r[a-14]^r[a-16];r[a]=(c<<1|c>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],u=this.chain_[4],h,f;for(let a=0;a<80;a++){a<40?a<20?(h=l^i&(o^l),f=1518500249):(h=i^o^l,f=1859775393):a<60?(h=i&o|l&(i|o),f=2400959708):(h=i^o^l,f=3395469782);const c=(s<<5|s>>>27)+h+u+f+r[a]&4294967295;u=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=c}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function nf(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,q(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t){return t&&t._delegate?t._delegate:t}class Do{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new gu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fT(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dT(t){return t===qr?void 0:t}function fT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const mT={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},_T=Se.INFO,gT={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},vT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=gT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ty{constructor(e){this.name=e,this._logLevel=_T,this._logHandler=vT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const yT=(t,e)=>e.some(n=>t instanceof n);let bm,Rm;function wT(){return bm||(bm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CT(){return Rm||(Rm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ey=new WeakMap,Rh=new WeakMap,Ay=new WeakMap,Tc=new WeakMap,rf=new WeakMap;function ST(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Er(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ey.set(n,t)}).catch(()=>{}),rf.set(e,t),e}function TT(t){if(Rh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rh.set(t,e)}let Ph={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ay.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ET(t){Ph=t(Ph)}function AT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ec(this),e,...n);return Ay.set(r,e.sort?e.sort():[e]),Er(r)}:CT().includes(t)?function(...e){return t.apply(Ec(this),e),Er(Ey.get(this))}:function(...e){return Er(t.apply(Ec(this),e))}}function kT(t){return typeof t=="function"?AT(t):(t instanceof IDBTransaction&&TT(t),yT(t,wT())?new Proxy(t,Ph):t)}function Er(t){if(t instanceof IDBRequest)return ST(t);if(Tc.has(t))return Tc.get(t);const e=kT(t);return e!==t&&(Tc.set(t,e),rf.set(e,t)),e}const Ec=t=>rf.get(t);function xT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Er(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Er(o.result),u.oldVersion,u.newVersion,Er(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const IT=["get","getKey","getAll","getAllKeys","count"],NT=["put","add","delete","clear"],Ac=new Map;function Pm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ac.get(e))return Ac.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=NT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||IT.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Ac.set(e,i),i}ET(t=>({...t,get:(e,n,r)=>Pm(e,n)||t.get(e,n,r),has:(e,n)=>!!Pm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mh="@firebase/app",Mm="0.10.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Ty("@firebase/app"),bT="@firebase/app-compat",RT="@firebase/analytics-compat",PT="@firebase/analytics",MT="@firebase/app-check-compat",FT="@firebase/app-check",LT="@firebase/auth",VT="@firebase/auth-compat",BT="@firebase/database",zT="@firebase/database-compat",WT="@firebase/functions",jT="@firebase/functions-compat",UT="@firebase/installations",qT="@firebase/installations-compat",HT="@firebase/messaging",$T="@firebase/messaging-compat",GT="@firebase/performance",YT="@firebase/performance-compat",KT="@firebase/remote-config",QT="@firebase/remote-config-compat",XT="@firebase/storage",ZT="@firebase/storage-compat",JT="@firebase/firestore",eE="@firebase/vertexai-preview",tE="@firebase/firestore-compat",nE="firebase",rE="10.12.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="[DEFAULT]",sE={[Mh]:"fire-core",[bT]:"fire-core-compat",[PT]:"fire-analytics",[RT]:"fire-analytics-compat",[FT]:"fire-app-check",[MT]:"fire-app-check-compat",[LT]:"fire-auth",[VT]:"fire-auth-compat",[BT]:"fire-rtdb",[zT]:"fire-rtdb-compat",[WT]:"fire-fn",[jT]:"fire-fn-compat",[UT]:"fire-iid",[qT]:"fire-iid-compat",[HT]:"fire-fcm",[$T]:"fire-fcm-compat",[GT]:"fire-perf",[YT]:"fire-perf-compat",[KT]:"fire-rc",[QT]:"fire-rc-compat",[XT]:"fire-gcs",[ZT]:"fire-gcs-compat",[JT]:"fire-fst",[tE]:"fire-fst-compat",[eE]:"fire-vertex","fire-js":"fire-js",[nE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Map,iE=new Map,Lh=new Map;function Fm(t,e){try{t.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ol(t){const e=t.name;if(Lh.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Lh.set(e,t);for(const n of Dl.values())Fm(n,t);for(const n of iE.values())Fm(n,t);return!0}function oE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Cy("app","Firebase",aE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=rE;function sf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=vy()),!n)throw Ar.create("no-options");const i=Dl.get(s);if(i){if(bh(n,i.options)&&bh(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const o=new pT(s);for(const u of Lh.values())o.addComponent(u);const l=new lE(n,r,o);return Dl.set(s,l),l}function cE(t=Fh){const e=Dl.get(t);if(!e&&t===Fh&&vy())return sf();if(!e)throw Ar.create("no-app",{appName:t});return e}function Ys(t,e,n){var r;let s=(r=sE[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(l.join(" "));return}Ol(new Do(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebase-heartbeat-database",dE=1,Oo="firebase-heartbeat-store";let kc=null;function ky(){return kc||(kc=xT(hE,dE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),kc}async function fE(t){try{const n=(await ky()).transaction(Oo),r=await n.objectStore(Oo).get(xy(t));return await n.done,r}catch(e){if(e instanceof Qo)os.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(n.message)}}}async function Lm(t,e){try{const r=(await ky()).transaction(Oo,"readwrite");await r.objectStore(Oo).put(e,xy(t)),await r.done}catch(n){if(n instanceof Qo)os.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});os.warn(r.message)}}}function xy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=1024,mE=30*24*60*60*1e3;class _E{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Vm();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=mE}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vm(),{heartbeatsToSend:r,unsentEntries:s}=gE(this._heartbeatsCache.heartbeats),i=Il(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Vm(){return new Date().toISOString().substring(0,10)}function gE(t,e=pE){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Bm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Bm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tT()?nT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Bm(t){return Il(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){Ol(new Do("platform-logger",e=>new DT(e),"PRIVATE")),Ol(new Do("heartbeat",e=>new _E(e),"PRIVATE")),Ys(Mh,Mm,t),Ys(Mh,Mm,"esm2017"),Ys("fire-js","")}yE("");var zm={};const Wm="@firebase/database",jm="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iy="";function wE(t){Iy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ke(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:No(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Zn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CE(e)}}catch{}return new SE},Kr=Ny("localStorage"),TE=Ny("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Ty("@firebase/database"),EE=function(){let t=1;return function(){return t++}}(),Dy=function(t){const e=cT(t),n=new uT;n.update(e);const r=n.digest();return tf.encodeByteArray(r)},Xo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Xo.apply(null,r):typeof r=="object"?e+=Ke(r):e+=r,e+=" "}return e};let io=null,Um=!0;const AE=function(t,e){q(!e,"Can't turn on custom loggers persistently."),Ks.logLevel=Se.VERBOSE,io=Ks.log.bind(Ks)},ft=function(...t){if(Um===!0&&(Um=!1,io===null&&TE.get("logging_enabled")===!0&&AE()),io){const e=Xo.apply(null,t);io(e)}},Zo=function(t){return function(...e){ft(t,...e)}},Vh=function(...t){const e="FIREBASE INTERNAL ERROR: "+Xo(...t);Ks.error(e)},Yn=function(...t){const e=`FIREBASE FATAL ERROR: ${Xo(...t)}`;throw Ks.error(e),new Error(e)},bt=function(...t){const e="FIREBASE WARNING: "+Xo(...t);Ks.warn(e)},kE=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Oy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},xE=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},li="[MIN_NAME]",as="[MAX_NAME]",Ti=function(t,e){if(t===e)return 0;if(t===li||e===as)return-1;if(e===li||t===as)return 1;{const n=qm(t),r=qm(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},IE=function(t,e){return t===e?0:t<e?-1:1},Wi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ke(e))},of=function(t){if(typeof t!="object"||t===null)return Ke(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ke(e[r]),n+=":",n+=of(t[e[r]]);return n+="}",n},by=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Pt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Ry=function(t){q(!Oy(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,u;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const h=[];for(u=n;u;u-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)h.push(i%2?1:0),i=Math.floor(i/2);h.push(s?1:0),h.reverse();const f=h.join("");let a="";for(u=0;u<64;u+=8){let c=parseInt(f.substr(u,8),2).toString(16);c.length===1&&(c="0"+c),a=a+c}return a.toLowerCase()},NE=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},DE=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OE(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const bE=new RegExp("^-?(0*)\\d{1,10}$"),RE=-2147483648,PE=2147483647,qm=function(t){if(bE.test(t)){const e=Number(t);if(e>=RE&&e<=PE)return e}return null},Ei=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw bt("Exception was thrown by user callback.",n),e},Math.floor(0))}},ME=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},oo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){bt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ft("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bt(e)}}class tl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}tl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="5",Py="v",My="s",Fy="r",Ly="f",Vy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,By="ls",zy="p",Bh="ac",Wy="websocket",jy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r,s,i=!1,o="",l=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function VE(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qy(t,e,n){q(typeof e=="string","typeof type must == string"),q(typeof n=="object","typeof params must == object");let r;if(e===Wy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===jy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);VE(t)&&(n.ns=t.namespace);const s=[];return Pt(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.counters_={}}incrementCounter(e,n=1){Zn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return qS(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc={},Ic={};function lf(t){const e=t.toString();return xc[e]||(xc[e]=new BE),xc[e]}function zE(t,e){const n=t.toString();return Ic[n]||(Ic[n]=e()),Ic[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Ei(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="start",jE="close",UE="pLPCommand",qE="pRTLPCB",Hy="id",$y="pw",Gy="ser",HE="cb",$E="seg",GE="ts",YE="d",KE="dframe",Yy=1870,Ky=30,QE=Yy-Ky,XE=25e3,ZE=3e4;class Vs{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zo(e),this.stats_=lf(n),this.urlFn=u=>(this.appCheckToken&&(u[Bh]=this.appCheckToken),qy(n,jy,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new WE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZE)),xE(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uf((...i)=>{const[o,l,u,h,f]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Hm)this.id=l,this.password=u;else if(o===jE)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Hm]="t",r[Gy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[HE]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Py]=af,this.transportSessionId&&(r[My]=this.transportSessionId),this.lastSessionId&&(r[By]=this.lastSessionId),this.applicationId&&(r[zy]=this.applicationId),this.appCheckToken&&(r[Bh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Vy.test(location.hostname)&&(r[Fy]=Ly);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vs.forceAllow_=!0}static forceDisallow(){Vs.forceDisallow_=!0}static isAvailable(){return Vs.forceAllow_?!0:!Vs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!NE()&&!DE()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=my(n),s=by(r,QE);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[KE]="t",r[Hy]=e,r[$y]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ke(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class uf{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=EE(),window[UE+this.uniqueCallbackIdentifier]=e,window[qE+this.uniqueCallbackIdentifier]=n,this.myIFrame=uf.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){ft("frame writing exception"),l.stack&&ft(l.stack),ft(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ft("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Hy]=this.myID,e[$y]=this.myPW,e[Gy]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ky+r.length<=Yy;){const o=this.pendingSegs.shift();r=r+"&"+$E+s+"="+o.seg+"&"+GE+s+"="+o.ts+"&"+YE+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(XE)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ft("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=16384,eA=45e3;let bl=null;typeof MozWebSocket<"u"?bl=MozWebSocket:typeof WebSocket<"u"&&(bl=WebSocket);class on{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zo(this.connId),this.stats_=lf(n),this.connURL=on.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Py]=af,typeof location<"u"&&location.hostname&&Vy.test(location.hostname)&&(o[Fy]=Ly),n&&(o[My]=n),r&&(o[By]=r),s&&(o[Bh]=s),i&&(o[zy]=i),qy(e,Wy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kr.set("previous_websocket_failure",!0);try{let r;wy(),this.mySock=new bl(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){on.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&bl!==null&&!on.forceDisallow_}static previouslyFailed(){return Kr.isInMemoryStorage||Kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=No(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=by(n,JE);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(eA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}on.responsesRequiredToBeHealthy=2;on.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Vs,on]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=on&&on.isAvailable();let r=n&&!on.previouslyFailed();if(e.webSocketOnly&&(n||bt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[on];else{const s=this.transports_=[];for(const i of bo.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);bo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}bo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=6e4,nA=5e3,rA=10*1024,sA=100*1024,Nc="t",$m="d",iA="s",Gm="r",oA="e",Ym="o",Km="a",Qm="n",Xm="p",aA="h";class lA{constructor(e,n,r,s,i,o,l,u,h,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=u,this.onKill_=h,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zo("c:"+this.id+":"),this.transportManager_=new bo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=oo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>sA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rA?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Nc in e){const n=e[Nc];n===Km?this.upgradeIfSecondaryHealthy_():n===Gm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ym&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Wi("t",e),r=Wi("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Xm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Km,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Qm,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Wi("t",e),r=Wi("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Wi(Nc,e);if($m in e){const r=e[$m];if(n===aA){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Qm){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iA?this.onConnectionShutdown_(r):n===Gm?this.onReset_(r):n===oA?Vh("Server Error: "+r):n===Ym?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),af!==r&&bt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),oo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tA))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nA))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Xm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Xy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Rl}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=32,Jm=768;class ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function fe(){return new ge("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Or(t){return t.pieces_.length-t.pieceNum_}function Te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ge(t.pieces_,e)}function Zy(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function uA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Jy(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function e0(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ge(e,0)}function Qe(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ge(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function yt(t,e){const n=ue(t),r=ue(e);if(n===null)return e;if(n===r)return yt(Te(t),Te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function t0(t,e){if(Or(t)!==Or(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function an(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Or(t)>Or(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class cA{constructor(e,n){this.errorPrefix_=n,this.parts_=Jy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vu(this.parts_[r]);n0(this)}}function hA(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vu(e),n0(t)}function dA(t){const e=t.parts_.pop();t.byteLength_-=vu(e),t.parts_.length>0&&(t.byteLength_-=1)}function n0(t){if(t.byteLength_>Jm)throw new Error(t.errorPrefix_+"has a key path longer than "+Jm+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zm+") or object contains a cycle "+Hr(t))}function Hr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends Xy{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new cf}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=1e3,fA=60*5*1e3,e_=30*1e3,pA=1.3,mA=3e4,_A="server_kill",t_=3;class jn extends Qy{constructor(e,n,r,s,i,o,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=jn.nextPersistentConnectionId_++,this.log_=Zo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ji,this.maxReconnectDelay_=fA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!wy())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Rl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ke(i)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new gu,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const u=l.d,h=l.s;jn.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),h!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(h,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Zn(e,"w")){const r=ai(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();bt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||aT(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=e_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=oT(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ke(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Vh("Unrecognized action received from server: "+Ke(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>mA&&(this.reconnectDelay_=ji),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*pA)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+jn.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const u=function(){l?l.close():(o=!0,r())},h=function(a){q(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(a)};this.realtime_={close:u,sendRequest:h};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,c]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?ft("getToken() completed but was canceled"):(ft("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=c&&c.token,l=new lA(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,d=>{bt(d+" ("+this.repoInfo_.toString()+")"),this.interrupt(_A)},i))}catch(a){this.log_("Failed to get token: "+a),o||(this.repoInfo_.nodeAdmin&&bt(a),u())}}}interrupt(e){ft("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ft("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dm(this.interruptReasons_)&&(this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>of(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ge(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ft("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=t_&&(this.reconnectDelay_=e_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ft("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=t_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Iy.replace(/\./g,"-")]=1,yy()?e["framework.cordova"]=1:eT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Rl.getInstance().currentlyOnline();return Dm(this.interruptReasons_)&&e}}jn.nextPersistentConnectionId_=0;jn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new se(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new se(li,e),s=new se(li,n);return this.compare(r,s)!==0}minPost(){return se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;class r0 extends yu{static get __EMPTY_NODE(){return Pa}static set __EMPTY_NODE(e){Pa=e}compare(e,n){return Ti(e.name,n.name)}isDefinedOn(e){throw Si("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return se.MIN}maxPost(){return new se(as,Pa)}makePost(e,n){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new se(e,Pa)}toString(){return".key"}}const Qs=new r0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??It.EMPTY_NODE,this.right=i??It.EMPTY_NODE}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return It.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return It.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}tt.RED=!0;tt.BLACK=!1;class gA{copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class It{constructor(e,n=It.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new It(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tt.BLACK,null,null))}remove(e){return new It(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ma(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ma(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ma(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ma(this.root_,null,this.comparator_,!0,e)}}It.EMPTY_NODE=new gA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){return Ti(t.name,e.name)}function hf(t,e){return Ti(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh;function yA(t){zh=t}const s0=function(t){return typeof t=="number"?"number:"+Ry(t):"string:"+t},i0=function(t){if(t.isLeafNode()){const e=t.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zn(e,".sv"),"Priority must be a string or number.")}else q(t===zh||t.isEmpty(),"priority of unexpected type.");q(t===zh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;class Je{constructor(e,n=Je.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),i0(this.priorityNode_)}static set __childrenNodeConstructor(e){n_=e}static get __childrenNodeConstructor(){return n_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Je(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:ue(e)===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(q(r!==".priority"||Or(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Je.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+s0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Ry(this.value_):e+=this.value_,this.lazyHash_=Dy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Je.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Je.VALUE_TYPE_ORDER.indexOf(n),i=Je.VALUE_TYPE_ORDER.indexOf(r);return q(s>=0,"Unknown leaf type: "+n),q(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Je.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o0,a0;function wA(t){o0=t}function CA(t){a0=t}class SA extends yu{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Ti(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return se.MIN}maxPost(){return new se(as,new Je("[PRIORITY-POST]",a0))}makePost(e,n){const r=o0(e);return new se(n,new Je("[PRIORITY-POST]",r))}toString(){return".priority"}}const Be=new SA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=Math.log(2);class EA{constructor(e){const n=i=>parseInt(Math.log(i)/TA,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Pl=function(t,e,n,r){t.sort(e);const s=function(u,h){const f=h-u;let a,c;if(f===0)return null;if(f===1)return a=t[u],c=n?n(a):a,new tt(c,a.node,tt.BLACK,null,null);{const d=parseInt(f/2,10)+u,p=s(u,d),_=s(d+1,h);return a=t[d],c=n?n(a):a,new tt(c,a.node,tt.BLACK,p,_)}},i=function(u){let h=null,f=null,a=t.length;const c=function(p,_){const v=a-p,m=a;a-=p;const g=s(v+1,m),y=t[v],S=n?n(y):y;d(new tt(S,y.node,_,null,g))},d=function(p){h?(h.left=p,h=p):(f=p,h=p)};for(let p=0;p<u.count;++p){const _=u.nextBitIsOne(),v=Math.pow(2,u.count-(p+1));_?c(v,tt.BLACK):(c(v,tt.BLACK),c(v,tt.RED))}return f},o=new EA(t.length),l=i(o);return new It(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc;const Ts={};class Bn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return q(Ts&&Be,"ChildrenNode.ts has not been loaded"),Dc=Dc||new Bn({".priority":Ts},{".priority":Be}),Dc}get(e){const n=ai(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof It?n:null}hasIndex(e){return Zn(this.indexSet_,e.toString())}addIndex(e,n){q(e!==Qs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(se.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=Pl(r,e.getCompare()):l=Ts;const u=e.toString(),h=Object.assign({},this.indexSet_);h[u]=e;const f=Object.assign({},this.indexes_);return f[u]=l,new Bn(f,h)}addToIndexes(e,n){const r=Nl(this.indexes_,(s,i)=>{const o=ai(this.indexSet_,i);if(q(o,"Missing index implementation for "+i),s===Ts)if(o.isDefinedOn(e.node)){const l=[],u=n.getIterator(se.Wrap);let h=u.getNext();for(;h;)h.name!==e.name&&l.push(h),h=u.getNext();return l.push(e),Pl(l,o.getCompare())}else return Ts;else{const l=n.get(e.name);let u=s;return l&&(u=u.remove(new se(e.name,l))),u.insert(e,e.node)}});return new Bn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Nl(this.indexes_,s=>{if(s===Ts)return s;{const i=n.get(e.name);return i?s.remove(new se(e.name,i)):s}});return new Bn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui;class X{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&i0(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ui||(Ui=new X(new It(hf),null,Bn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ui}updatePriority(e){return this.children_.isEmpty()?this:new X(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ui:n}}getChild(e){const n=ue(e);return n===null?this:this.getImmediateChild(n).getChild(Te(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new se(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Ui:this.priorityNode_;return new X(s,o,i)}}updateChild(e,n){const r=ue(e);if(r===null)return n;{q(ue(e)!==".priority"||Or(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Te(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Be,(o,l)=>{n[o]=l.val(e),r++,i&&X.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+s0(this.getPriority().val())+":"),this.forEachChild(Be,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Dy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new se(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new se(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new se(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,se.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,se.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Jo?-1:0}withIndex(e){if(e===Qs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new X(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Be),s=n.getIterator(Be);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Qs?null:this.indexMap_.get(e.toString())}}X.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AA extends X{constructor(){super(new It(hf),X.EMPTY_NODE,Bn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return X.EMPTY_NODE}isEmpty(){return!1}}const Jo=new AA;Object.defineProperties(se,{MIN:{value:new se(li,X.EMPTY_NODE)},MAX:{value:new se(as,Jo)}});r0.__EMPTY_NODE=X.EMPTY_NODE;Je.__childrenNodeConstructor=X;yA(Jo);CA(Jo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=!0;function nt(t,e=null){if(t===null)return X.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Je(n,nt(e))}if(!(t instanceof Array)&&kA){const n=[];let r=!1;if(Pt(t,(o,l)=>{if(o.substring(0,1)!=="."){const u=nt(l);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new se(o,u)))}}),n.length===0)return X.EMPTY_NODE;const i=Pl(n,vA,o=>o.name,hf);if(r){const o=Pl(n,Be.getCompare());return new X(i,nt(e),new Bn({".priority":o},{".priority":Be}))}else return new X(i,nt(e),Bn.Default)}else{let n=X.EMPTY_NODE;return Pt(t,(r,s)=>{if(Zn(t,r)&&r.substring(0,1)!=="."){const i=nt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(nt(e))}}wA(nt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends yu{constructor(e){super(),this.indexPath_=e,q(!ie(e)&&ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Ti(e.name,n.name):i}makePost(e,n){const r=nt(e),s=X.EMPTY_NODE.updateChild(this.indexPath_,r);return new se(n,s)}maxPost(){const e=X.EMPTY_NODE.updateChild(this.indexPath_,Jo);return new se(as,e)}toString(){return Jy(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends yu{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ti(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(e,n){const r=nt(e);return new se(n,r)}toString(){return".value"}}const NA=new IA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){return{type:"value",snapshotNode:t}}function ui(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ro(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Po(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function DA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ro(n,l)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(ui(n,r)):o.trackChildChange(Po(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Be,(s,i)=>{n.hasChild(s)||r.trackChildChange(Ro(s,i))}),n.isLeafNode()||n.forEachChild(Be,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Po(s,i,o))}else r.trackChildChange(ui(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?X.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.indexedFilter_=new df(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Mo.getStartPost_(e),this.endPost_=Mo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new se(n,r))||(r=X.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=X.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(X.EMPTY_NODE);const i=this;return n.forEachChild(Be,(o,l)=>{i.matches(new se(o,l))||(s=s.updateImmediateChild(o,X.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Mo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new se(n,r))||(r=X.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=X.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=X.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(X.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,X.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const a=this.index_.getCompare();o=(c,d)=>a(d,c)}else o=this.index_.getCompare();const l=e;q(l.numChildren()===this.limit_,"");const u=new se(n,r),h=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(l.hasChild(n)){const a=l.getImmediateChild(n);let c=s.getChildAfterChild(this.index_,h,this.reverse_);for(;c!=null&&(c.name===n||l.hasChild(c.name));)c=s.getChildAfterChild(this.index_,c,this.reverse_);const d=c==null?1:o(c,u);if(f&&!r.isEmpty()&&d>=0)return i!=null&&i.trackChildChange(Po(n,r,a)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Ro(n,a));const _=l.updateImmediateChild(n,X.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(i!=null&&i.trackChildChange(ui(c.name,c.node)),_.updateImmediateChild(c.name,c.node)):_}}else return r.isEmpty()?e:f&&o(h,u)>=0?(i!=null&&(i.trackChildChange(Ro(h.name,h.node)),i.trackChildChange(ui(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(h.name,X.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Be}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:li}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:as}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Be}copy(){const e=new ff;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bA(t){return t.loadsAllData()?new df(t.getIndex()):t.hasLimit()?new OA(t):new Mo(t)}function r_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Be?n="$priority":t.index_===NA?n="$value":t.index_===Qs?n="$key":(q(t.index_ instanceof xA,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ke(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ke(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ke(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ke(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ke(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function s_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Be&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends Qy{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Zo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Ml.getListenId_(e,r),l={};this.listens_[o]=l;const u=r_(e._queryParams);this.restRequest_(i+".json",u,(h,f)=>{let a=f;if(h===404&&(a=null,h=null),h===null&&this.onDataUpdate_(i,a,!1,r),ai(this.listens_,o)===l){let c;h?h===401?c="permission_denied":c="rest_error:"+h:c="ok",s(c,null)}})}unlisten(e,n){const r=Ml.getListenId_(e,n);delete this.listens_[r]}get(e){const n=r_(e._queryParams),r=e._path.toString(),s=new gu;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+lT(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=No(l.responseText)}catch{bt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,u)}else l.status!==401&&l.status!==404&&bt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.rootNode_=X.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(){return{value:null,children:new Map}}function u0(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ue(e);t.children.has(r)||t.children.set(r,Fl());const s=t.children.get(r);e=Te(e),u0(s,e,n)}}function Wh(t,e,n){t.value!==null?n(e,t.value):PA(t,(r,s)=>{const i=new ge(e.toString()+"/"+r);Wh(s,i,n)})}function PA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Pt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=10*1e3,FA=30*1e3,LA=5*60*1e3;class VA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new MA(e);const r=i_+(FA-i_)*Math.random();oo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Pt(e,(s,i)=>{i>0&&Zn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),oo(this.reportStats_.bind(this),Math.floor(Math.random()*2*LA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ln||(ln={}));function c0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function pf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ln.ACK_USER_WRITE,this.source=c0()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ge(e));return new Ll(fe(),n,this.revert)}}else return q(ue(this.path)===e,"operationForChild called for unrelated child."),new Ll(Te(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.source=e,this.path=n,this.type=ln.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new Fo(this.source,fe()):new Fo(this.source,Te(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ln.OVERWRITE}operationForChild(e){return ie(this.path)?new ls(this.source,fe(),this.snap.getImmediateChild(e)):new ls(this.source,Te(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ln.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new ge(e));return n.isEmpty()?null:n.value?new ls(this.source,fe(),n.value):new Lo(this.source,fe(),n)}else return q(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Lo(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function zA(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(DA(o.childName,o.snapshotNode))}),qi(t,s,"child_removed",e,r,n),qi(t,s,"child_added",e,r,n),qi(t,s,"child_moved",i,r,n),qi(t,s,"child_changed",e,r,n),qi(t,s,"value",e,r,n),s}function qi(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,u)=>jA(t,l,u)),o.forEach(l=>{const u=WA(t,l,i);s.forEach(h=>{h.respondsTo(l.type)&&e.push(h.createEvent(u,t.query_))})})}function WA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function jA(t,e,n){if(e.childName==null||n.childName==null)throw Si("Should only compare child_ events.");const r=new se(e.childName,e.snapshotNode),s=new se(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t,e){return{eventCache:t,serverCache:e}}function ao(t,e,n,r){return wu(new br(e,n,r),t.serverCache)}function h0(t,e,n,r){return wu(t.eventCache,new br(e,n,r))}function Vl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function us(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc;const UA=()=>(Oc||(Oc=new It(IE)),Oc);class xe{constructor(e,n=UA()){this.value=e,this.children=n}static fromObject(e){let n=new xe(null);return Pt(e,(r,s)=>{n=n.set(new ge(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:fe(),value:this.value};if(ie(e))return null;{const r=ue(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Te(e),n);return i!=null?{path:Qe(new ge(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=ue(e),r=this.children.get(n);return r!==null?r.subtree(Te(e)):new xe(null)}}set(e,n){if(ie(e))return new xe(n,this.children);{const r=ue(e),i=(this.children.get(r)||new xe(null)).set(Te(e),n),o=this.children.insert(r,i);return new xe(this.value,o)}}remove(e){if(ie(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=ue(e),r=this.children.get(n);if(r){const s=r.remove(Te(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new xe(null):new xe(this.value,i)}else return this}}get(e){if(ie(e))return this.value;{const n=ue(e),r=this.children.get(n);return r?r.get(Te(e)):null}}setTree(e,n){if(ie(e))return n;{const r=ue(e),i=(this.children.get(r)||new xe(null)).setTree(Te(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new xe(this.value,o)}}fold(e){return this.fold_(fe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Qe(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,fe(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ie(e))return null;{const i=ue(e),o=this.children.get(i);return o?o.findOnPath_(Te(e),Qe(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,fe(),n)}foreachOnPath_(e,n,r){if(ie(e))return this;{this.value&&r(n,this.value);const s=ue(e),i=this.children.get(s);return i?i.foreachOnPath_(Te(e),Qe(n,s),r):new xe(null)}}foreach(e){this.foreach_(fe(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Qe(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.writeTree_=e}static empty(){return new fn(new xe(null))}}function lo(t,e,n){if(ie(e))return new fn(new xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=yt(s,e);return i=i.updateChild(o,n),new fn(t.writeTree_.set(s,i))}else{const s=new xe(n),i=t.writeTree_.setTree(e,s);return new fn(i)}}}function o_(t,e,n){let r=t;return Pt(n,(s,i)=>{r=lo(r,Qe(e,s),i)}),r}function a_(t,e){if(ie(e))return fn.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new fn(n)}}function jh(t,e){return _s(t,e)!=null}function _s(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(yt(n.path,e)):null}function l_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Be,(r,s)=>{e.push(new se(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new se(r,s.value))}),e}function kr(t,e){if(ie(e))return t;{const n=_s(t,e);return n!=null?new fn(new xe(n)):new fn(t.writeTree_.subtree(e))}}function Uh(t){return t.writeTree_.isEmpty()}function ci(t,e){return d0(fe(),t.writeTree_,e)}function d0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(q(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=d0(Qe(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qe(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t,e){return _0(e,t)}function qA(t,e,n,r,s){q(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=lo(t.visibleWrites,e,n)),t.lastWriteId=r}function HA(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function $A(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);q(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&GA(l,r.path)?s=!1:an(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return YA(t),!0;if(r.snap)t.visibleWrites=a_(t.visibleWrites,r.path);else{const l=r.children;Pt(l,u=>{t.visibleWrites=a_(t.visibleWrites,Qe(r.path,u))})}return!0}else return!1}function GA(t,e){if(t.snap)return an(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&an(Qe(t.path,n),e))return!0;return!1}function YA(t){t.visibleWrites=f0(t.allWrites,KA,fe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function KA(t){return t.visible}function f0(t,e,n){let r=fn.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)an(n,o)?(l=yt(n,o),r=lo(r,l,i.snap)):an(o,n)&&(l=yt(o,n),r=lo(r,fe(),i.snap.getChild(l)));else if(i.children){if(an(n,o))l=yt(n,o),r=o_(r,l,i.children);else if(an(o,n))if(l=yt(o,n),ie(l))r=o_(r,fe(),i.children);else{const u=ai(i.children,ue(l));if(u){const h=u.getChild(Te(l));r=lo(r,fe(),h)}}}else throw Si("WriteRecord should have .snap or .children")}}return r}function p0(t,e,n,r,s){if(!r&&!s){const i=_s(t.visibleWrites,e);if(i!=null)return i;{const o=kr(t.visibleWrites,e);if(Uh(o))return n;if(n==null&&!jh(o,fe()))return null;{const l=n||X.EMPTY_NODE;return ci(o,l)}}}else{const i=kr(t.visibleWrites,e);if(!s&&Uh(i))return n;if(!s&&n==null&&!jh(i,fe()))return null;{const o=function(h){return(h.visible||s)&&(!r||!~r.indexOf(h.writeId))&&(an(h.path,e)||an(e,h.path))},l=f0(t.allWrites,o,e),u=n||X.EMPTY_NODE;return ci(l,u)}}}function QA(t,e,n){let r=X.EMPTY_NODE;const s=_s(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Be,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=kr(t.visibleWrites,e);return n.forEachChild(Be,(o,l)=>{const u=ci(kr(i,new ge(o)),l);r=r.updateImmediateChild(o,u)}),l_(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=kr(t.visibleWrites,e);return l_(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function XA(t,e,n,r,s){q(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Qe(e,n);if(jh(t.visibleWrites,i))return null;{const o=kr(t.visibleWrites,i);return Uh(o)?s.getChild(n):ci(o,s.getChild(n))}}function ZA(t,e,n,r){const s=Qe(e,n),i=_s(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=kr(t.visibleWrites,s);return ci(o,r.getNode().getImmediateChild(n))}else return null}function JA(t,e){return _s(t.visibleWrites,e)}function ek(t,e,n,r,s,i,o){let l;const u=kr(t.visibleWrites,e),h=_s(u,fe());if(h!=null)l=h;else if(n!=null)l=ci(u,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const f=[],a=o.getCompare(),c=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let d=c.getNext();for(;d&&f.length<s;)a(d,r)!==0&&f.push(d),d=c.getNext();return f}else return[]}function tk(){return{visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1}}function Bl(t,e,n,r){return p0(t.writeTree,t.treePath,e,n,r)}function _f(t,e){return QA(t.writeTree,t.treePath,e)}function u_(t,e,n,r){return XA(t.writeTree,t.treePath,e,n,r)}function zl(t,e){return JA(t.writeTree,Qe(t.treePath,e))}function nk(t,e,n,r,s,i){return ek(t.writeTree,t.treePath,e,n,r,s,i)}function gf(t,e,n){return ZA(t.writeTree,t.treePath,e,n)}function m0(t,e){return _0(Qe(t.treePath,e),t.writeTree)}function _0(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),q(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Po(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Ro(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ui(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Po(r,e.snapshotNode,s.oldSnap));else throw Si("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const g0=new sk;class vf{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new br(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gf(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:us(this.viewCache_),i=nk(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){return{filter:t}}function ok(t,e){q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ak(t,e,n,r,s){const i=new rk;let o,l;if(n.type===ln.OVERWRITE){const h=n;h.source.fromUser?o=qh(t,e,h.path,h.snap,r,s,i):(q(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.serverCache.isFiltered()&&!ie(h.path),o=Wl(t,e,h.path,h.snap,r,s,l,i))}else if(n.type===ln.MERGE){const h=n;h.source.fromUser?o=uk(t,e,h.path,h.children,r,s,i):(q(h.source.fromServer,"Unknown source."),l=h.source.tagged||e.serverCache.isFiltered(),o=Hh(t,e,h.path,h.children,r,s,l,i))}else if(n.type===ln.ACK_USER_WRITE){const h=n;h.revert?o=dk(t,e,h.path,r,s,i):o=ck(t,e,h.path,h.affectedTree,r,s,i)}else if(n.type===ln.LISTEN_COMPLETE)o=hk(t,e,n.path,r,i);else throw Si("Unknown operation type: "+n.type);const u=i.getChanges();return lk(e,o,u),{viewCache:o,changes:u}}function lk(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Vl(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(l0(Vl(e)))}}function v0(t,e,n,r,s,i){const o=e.eventCache;if(zl(r,n)!=null)return e;{let l,u;if(ie(n))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=us(e),f=h instanceof X?h:X.EMPTY_NODE,a=_f(r,f);l=t.filter.updateFullNode(e.eventCache.getNode(),a,i)}else{const h=Bl(r,us(e));l=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const h=ue(n);if(h===".priority"){q(Or(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const a=u_(r,n,f,u);a!=null?l=t.filter.updatePriority(f,a):l=o.getNode()}else{const f=Te(n);let a;if(o.isCompleteForChild(h)){u=e.serverCache.getNode();const c=u_(r,n,o.getNode(),u);c!=null?a=o.getNode().getImmediateChild(h).updateChild(f,c):a=o.getNode().getImmediateChild(h)}else a=gf(r,h,e.serverCache);a!=null?l=t.filter.updateChild(o.getNode(),h,a,f,s,i):l=o.getNode()}}return ao(e,l,o.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function Wl(t,e,n,r,s,i,o,l){const u=e.serverCache;let h;const f=o?t.filter:t.filter.getIndexedFilter();if(ie(n))h=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const d=u.getNode().updateChild(n,r);h=f.updateFullNode(u.getNode(),d,null)}else{const d=ue(n);if(!u.isCompleteForPath(n)&&Or(n)>1)return e;const p=Te(n),v=u.getNode().getImmediateChild(d).updateChild(p,r);d===".priority"?h=f.updatePriority(u.getNode(),v):h=f.updateChild(u.getNode(),d,v,p,g0,null)}const a=h0(e,h,u.isFullyInitialized()||ie(n),f.filtersNodes()),c=new vf(s,a,i);return v0(t,a,n,s,c,l)}function qh(t,e,n,r,s,i,o){const l=e.eventCache;let u,h;const f=new vf(s,e,i);if(ie(n))h=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=ao(e,h,!0,t.filter.filtersNodes());else{const a=ue(n);if(a===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),r),u=ao(e,h,l.isFullyInitialized(),l.isFiltered());else{const c=Te(n),d=l.getNode().getImmediateChild(a);let p;if(ie(c))p=r;else{const _=f.getCompleteChild(a);_!=null?Zy(c)===".priority"&&_.getChild(e0(c)).isEmpty()?p=_:p=_.updateChild(c,r):p=X.EMPTY_NODE}if(d.equals(p))u=e;else{const _=t.filter.updateChild(l.getNode(),a,p,c,f,o);u=ao(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function c_(t,e){return t.eventCache.isCompleteForChild(e)}function uk(t,e,n,r,s,i,o){let l=e;return r.foreach((u,h)=>{const f=Qe(n,u);c_(e,ue(f))&&(l=qh(t,l,f,h,s,i,o))}),r.foreach((u,h)=>{const f=Qe(n,u);c_(e,ue(f))||(l=qh(t,l,f,h,s,i,o))}),l}function h_(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Hh(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,h;ie(n)?h=r:h=new xe(null).setTree(n,r);const f=e.serverCache.getNode();return h.children.inorderTraversal((a,c)=>{if(f.hasChild(a)){const d=e.serverCache.getNode().getImmediateChild(a),p=h_(t,d,c);u=Wl(t,u,new ge(a),p,s,i,o,l)}}),h.children.inorderTraversal((a,c)=>{const d=!e.serverCache.isCompleteForChild(a)&&c.value===null;if(!f.hasChild(a)&&!d){const p=e.serverCache.getNode().getImmediateChild(a),_=h_(t,p,c);u=Wl(t,u,new ge(a),_,s,i,o,l)}}),u}function ck(t,e,n,r,s,i,o){if(zl(s,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(ie(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Wl(t,e,n,u.getNode().getChild(n),s,i,l,o);if(ie(n)){let h=new xe(null);return u.getNode().forEachChild(Qs,(f,a)=>{h=h.set(new ge(f),a)}),Hh(t,e,n,h,s,i,l,o)}else return e}else{let h=new xe(null);return r.foreach((f,a)=>{const c=Qe(n,f);u.isCompleteForPath(c)&&(h=h.set(f,u.getNode().getChild(c)))}),Hh(t,e,n,h,s,i,l,o)}}function hk(t,e,n,r,s){const i=e.serverCache,o=h0(e,i.getNode(),i.isFullyInitialized()||ie(n),i.isFiltered());return v0(t,o,n,r,g0,s)}function dk(t,e,n,r,s,i){let o;if(zl(r,n)!=null)return e;{const l=new vf(r,e,s),u=e.eventCache.getNode();let h;if(ie(n)||ue(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Bl(r,us(e));else{const a=e.serverCache.getNode();q(a instanceof X,"serverChildren would be complete if leaf node"),f=_f(r,a)}f=f,h=t.filter.updateFullNode(u,f,i)}else{const f=ue(n);let a=gf(r,f,e.serverCache);a==null&&e.serverCache.isCompleteForChild(f)&&(a=u.getImmediateChild(f)),a!=null?h=t.filter.updateChild(u,f,a,Te(n),l,i):e.eventCache.getNode().hasChild(f)?h=t.filter.updateChild(u,f,X.EMPTY_NODE,Te(n),l,i):h=u,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Bl(r,us(e)),o.isLeafNode()&&(h=t.filter.updateFullNode(h,o,i)))}return o=e.serverCache.isFullyInitialized()||zl(r,fe())!=null,ao(e,h,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new df(r.getIndex()),i=bA(r);this.processor_=ik(i);const o=n.serverCache,l=n.eventCache,u=s.updateFullNode(X.EMPTY_NODE,o.getNode(),null),h=i.updateFullNode(X.EMPTY_NODE,l.getNode(),null),f=new br(u,o.isFullyInitialized(),s.filtersNodes()),a=new br(h,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=wu(a,f),this.eventGenerator_=new BA(this.query_)}get query(){return this.query_}}function pk(t){return t.viewCache_.serverCache.getNode()}function mk(t){return Vl(t.viewCache_)}function _k(t,e){const n=us(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function d_(t){return t.eventRegistrations_.length===0}function gk(t,e){t.eventRegistrations_.push(e)}function f_(t,e,n){const r=[];if(n){q(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function p_(t,e,n,r){e.type===ln.MERGE&&e.source.queryId!==null&&(q(us(t.viewCache_),"We should always have a full cache before handling merges"),q(Vl(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=ak(t.processor_,s,e,n,r);return ok(t.processor_,i.viewCache),q(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,y0(t,i.changes,i.viewCache.eventCache.getNode(),null)}function vk(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Be,(i,o)=>{r.push(ui(i,o))}),n.isFullyInitialized()&&r.push(l0(n.getNode())),y0(t,r,n.getNode(),e)}function y0(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return zA(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl;class w0{constructor(){this.views=new Map}}function yk(t){q(!jl,"__referenceConstructor has already been defined"),jl=t}function wk(){return q(jl,"Reference.ts has not been loaded"),jl}function Ck(t){return t.views.size===0}function yf(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return q(i!=null,"SyncTree gave us an op for an invalid query."),p_(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(p_(o,e,n,r));return i}}function C0(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=Bl(n,s?r:null),u=!1;l?u=!0:r instanceof X?(l=_f(n,r),u=!1):(l=X.EMPTY_NODE,u=!1);const h=wu(new br(l,u,!1),new br(r,s,!1));return new fk(e,h)}return o}function Sk(t,e,n,r,s,i){const o=C0(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),gk(o,n),vk(o,n)}function Tk(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=Rr(t);if(s==="default")for(const[u,h]of t.views.entries())o=o.concat(f_(h,n,r)),d_(h)&&(t.views.delete(u),h.query._queryParams.loadsAllData()||i.push(h.query));else{const u=t.views.get(s);u&&(o=o.concat(f_(u,n,r)),d_(u)&&(t.views.delete(s),u.query._queryParams.loadsAllData()||i.push(u.query)))}return l&&!Rr(t)&&i.push(new(wk())(e._repo,e._path)),{removed:i,events:o}}function S0(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xr(t,e){let n=null;for(const r of t.views.values())n=n||_k(r,e);return n}function T0(t,e){if(e._queryParams.loadsAllData())return Su(t);{const r=e._queryIdentifier;return t.views.get(r)}}function E0(t,e){return T0(t,e)!=null}function Rr(t){return Su(t)!=null}function Su(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul;function Ek(t){q(!Ul,"__referenceConstructor has already been defined"),Ul=t}function Ak(){return q(Ul,"Reference.ts has not been loaded"),Ul}let kk=1;class m_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=tk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function A0(t,e,n,r,s){return qA(t.pendingWriteTree_,e,n,r,s),s?ta(t,new ls(c0(),e,n)):[]}function Qr(t,e,n=!1){const r=HA(t.pendingWriteTree_,e);if($A(t.pendingWriteTree_,e)){let i=new xe(null);return r.snap!=null?i=i.set(fe(),!0):Pt(r.children,o=>{i=i.set(new ge(o),!0)}),ta(t,new Ll(r.path,i,n))}else return[]}function ea(t,e,n){return ta(t,new ls(pf(),e,n))}function xk(t,e,n){const r=xe.fromObject(n);return ta(t,new Lo(pf(),e,r))}function Ik(t,e){return ta(t,new Fo(pf(),e))}function Nk(t,e,n){const r=Cf(t,n);if(r){const s=Sf(r),i=s.path,o=s.queryId,l=yt(i,e),u=new Fo(mf(o),l);return Tf(t,i,u)}else return[]}function k0(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||E0(o,e))){const u=Tk(o,e,n,r);Ck(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const h=u.removed;if(l=u.events,!s){const f=h.findIndex(c=>c._queryParams.loadsAllData())!==-1,a=t.syncPointTree_.findOnPath(i,(c,d)=>Rr(d));if(f&&!a){const c=t.syncPointTree_.subtree(i);if(!c.isEmpty()){const d=Rk(c);for(let p=0;p<d.length;++p){const _=d[p],v=_.query,m=D0(t,_);t.listenProvider_.startListening(uo(v),Vo(t,v),m.hashFn,m.onComplete)}}}!a&&h.length>0&&!r&&(f?t.listenProvider_.stopListening(uo(e),null):h.forEach(c=>{const d=t.queryToTagMap.get(Tu(c));t.listenProvider_.stopListening(uo(c),d)}))}Pk(t,h)}return l}function x0(t,e,n,r){const s=Cf(t,r);if(s!=null){const i=Sf(s),o=i.path,l=i.queryId,u=yt(o,e),h=new ls(mf(l),u,n);return Tf(t,o,h)}else return[]}function Dk(t,e,n,r){const s=Cf(t,r);if(s){const i=Sf(s),o=i.path,l=i.queryId,u=yt(o,e),h=xe.fromObject(n),f=new Lo(mf(l),u,h);return Tf(t,o,f)}else return[]}function Ok(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(c,d)=>{const p=yt(c,s);i=i||xr(d,p),o=o||Rr(d)});let l=t.syncPointTree_.get(s);l?(o=o||Rr(l),i=i||xr(l,fe())):(l=new w0,t.syncPointTree_=t.syncPointTree_.set(s,l));let u;i!=null?u=!0:(u=!1,i=X.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((d,p)=>{const _=xr(p,fe());_&&(i=i.updateImmediateChild(d,_))}));const h=E0(l,e);if(!h&&!e._queryParams.loadsAllData()){const c=Tu(e);q(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const d=Mk();t.queryToTagMap.set(c,d),t.tagToQueryMap.set(d,c)}const f=Cu(t.pendingWriteTree_,s);let a=Sk(l,e,n,f,i,u);if(!h&&!o&&!r){const c=T0(l,e);a=a.concat(Fk(t,e,c))}return a}function wf(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const u=yt(o,e),h=xr(l,u);if(h)return h});return p0(s,e,i,n,!0)}function bk(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(h,f)=>{const a=yt(h,n);r=r||xr(f,a)});let s=t.syncPointTree_.get(n);s?r=r||xr(s,fe()):(s=new w0,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new br(r,!0,!1):null,l=Cu(t.pendingWriteTree_,e._path),u=C0(s,e,l,i?o.getNode():X.EMPTY_NODE,i);return mk(u)}function ta(t,e){return I0(e,t.syncPointTree_,null,Cu(t.pendingWriteTree_,fe()))}function I0(t,e,n,r){if(ie(t.path))return N0(t,e,n,r);{const s=e.get(fe());n==null&&s!=null&&(n=xr(s,fe()));let i=[];const o=ue(t.path),l=t.operationForChild(o),u=e.children.get(o);if(u&&l){const h=n?n.getImmediateChild(o):null,f=m0(r,o);i=i.concat(I0(l,u,h,f))}return s&&(i=i.concat(yf(s,t,r,n))),i}}function N0(t,e,n,r){const s=e.get(fe());n==null&&s!=null&&(n=xr(s,fe()));let i=[];return e.children.inorderTraversal((o,l)=>{const u=n?n.getImmediateChild(o):null,h=m0(r,o),f=t.operationForChild(o);f&&(i=i.concat(N0(f,l,u,h)))}),s&&(i=i.concat(yf(s,t,r,n))),i}function D0(t,e){const n=e.query,r=Vo(t,n);return{hashFn:()=>(pk(e)||X.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Nk(t,n._path,r):Ik(t,n._path);{const i=OE(s,n);return k0(t,n,null,i)}}}}function Vo(t,e){const n=Tu(e);return t.queryToTagMap.get(n)}function Tu(t){return t._path.toString()+"$"+t._queryIdentifier}function Cf(t,e){return t.tagToQueryMap.get(e)}function Sf(t){const e=t.indexOf("$");return q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ge(t.substr(0,e))}}function Tf(t,e,n){const r=t.syncPointTree_.get(e);q(r,"Missing sync point for query tag that we're tracking");const s=Cu(t.pendingWriteTree_,e);return yf(r,n,s,null)}function Rk(t){return t.fold((e,n,r)=>{if(n&&Rr(n))return[Su(n)];{let s=[];return n&&(s=S0(n)),Pt(r,(i,o)=>{s=s.concat(o)}),s}})}function uo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Ak())(t._repo,t._path):t}function Pk(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Tu(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Mk(){return kk++}function Fk(t,e,n){const r=e._path,s=Vo(t,e),i=D0(t,n),o=t.listenProvider_.startListening(uo(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)q(!Rr(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((h,f,a)=>{if(!ie(h)&&f&&Rr(f))return[Su(f).query];{let c=[];return f&&(c=c.concat(S0(f).map(d=>d.query))),Pt(a,(d,p)=>{c=c.concat(p)}),c}});for(let h=0;h<u.length;++h){const f=u[h];t.listenProvider_.stopListening(uo(f),Vo(t,f))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ef(n)}node(){return this.node_}}class Af{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qe(this.path_,e);return new Af(this.syncTree_,n)}node(){return wf(this.syncTree_,this.path_)}}const Lk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},__=function(t,e,n){if(!t||typeof t!="object")return t;if(q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Vk(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Bk(t[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Vk=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:q(!1,"Unexpected server value: "+t)}},Bk=function(t,e,n){t.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&q(!1,"Unexpected increment value: "+r);const s=e.node();if(q(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},zk=function(t,e,n,r){return kf(e,new Af(n,t),r)},O0=function(t,e,n){return kf(t,new Ef(e),n)};function kf(t,e,n){const r=t.getPriority().val(),s=__(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=__(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new Je(l,nt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Je(s))),o.forEachChild(Be,(l,u)=>{const h=kf(u,e.getImmediateChild(l),n);h!==u&&(i=i.updateImmediateChild(l,h))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function If(t,e){let n=e instanceof ge?e:new ge(e),r=t,s=ue(n);for(;s!==null;){const i=ai(r.node.children,s)||{children:{},childCount:0};r=new xf(s,r,i),n=Te(n),s=ue(n)}return r}function Ai(t){return t.node.value}function b0(t,e){t.node.value=e,$h(t)}function R0(t){return t.node.childCount>0}function Wk(t){return Ai(t)===void 0&&!R0(t)}function Eu(t,e){Pt(t.node.children,(n,r)=>{e(new xf(n,t,r))})}function P0(t,e,n,r){n&&!r&&e(t),Eu(t,s=>{P0(s,e,!0,r)}),n&&r&&e(t)}function jk(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function na(t){return new ge(t.parent===null?t.name:na(t.parent)+"/"+t.name)}function $h(t){t.parent!==null&&Uk(t.parent,t.name,t)}function Uk(t,e,n){const r=Wk(n),s=Zn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,$h(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,$h(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=/[\[\].#$\/\u0000-\u001F\u007F]/,Hk=/[\[\].#$\u0000-\u001F\u007F]/,bc=10*1024*1024,M0=function(t){return typeof t=="string"&&t.length!==0&&!qk.test(t)},F0=function(t){return typeof t=="string"&&t.length!==0&&!Hk.test(t)},$k=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),F0(t)},L0=function(t,e,n,r){r&&e===void 0||Nf(nf(t,"value"),e,n)},Nf=function(t,e,n){const r=n instanceof ge?new cA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Hr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Hr(r)+" with contents = "+e.toString());if(Oy(e))throw new Error(t+"contains "+e.toString()+" "+Hr(r));if(typeof e=="string"&&e.length>bc/3&&vu(e)>bc)throw new Error(t+"contains a string greater than "+bc+" utf8 bytes "+Hr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Pt(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!M0(o)))throw new Error(t+" contains an invalid key ("+o+") "+Hr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);hA(r,o),Nf(t,l,r),dA(r)}),s&&i)throw new Error(t+' contains ".value" child '+Hr(r)+" in addition to actual children.")}},V0=function(t,e,n,r){if(!F0(n))throw new Error(nf(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Gk=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),V0(t,e,n)},B0=function(t,e){if(ue(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Yk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!M0(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$k(n))throw new Error(nf(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function z0(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!t0(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function kn(t,e,n){z0(t,n),Qk(t,r=>an(r,e)||an(e,r))}function Qk(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Xk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Xk(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();io&&ft("event: "+n.toString()),Ei(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="repo_interrupt",Jk=25;class ex{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fl(),this.transactionQueueTree_=new xf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tx(t,e,n){if(t.stats_=lf(t.repoInfo_),t.forceRestClient_||ME())t.server_=new Ml(t.repoInfo_,(r,s,i,o)=>{g_(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>v_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new jn(t.repoInfo_,e,(r,s,i,o)=>{g_(t,r,s,i,o)},r=>{v_(t,r)},r=>{nx(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=zE(t.repoInfo_,()=>new VA(t.stats_,t.server_)),t.infoData_=new RA,t.infoSyncTree_=new m_({startListening:(r,s,i,o)=>{let l=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(l=ea(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Of(t,"connected",!1),t.serverSyncTree_=new m_({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,u)=>{const h=o(l,u);kn(t.eventQueue_,r._path,h)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function W0(t){const n=t.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Df(t){return Lk({timestamp:W0(t)})}function g_(t,e,n,r,s){t.dataUpdateCount++;const i=new ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const u=Nl(n,h=>nt(h));o=Dk(t.serverSyncTree_,i,u,s)}else{const u=nt(n);o=x0(t.serverSyncTree_,i,u,s)}else if(r){const u=Nl(n,h=>nt(h));o=xk(t.serverSyncTree_,i,u)}else{const u=nt(n);o=ea(t.serverSyncTree_,i,u)}let l=i;o.length>0&&(l=ku(t,i)),kn(t.eventQueue_,l,o)}function v_(t,e){Of(t,"connected",e),e===!1&&ix(t)}function nx(t,e){Pt(e,(n,r)=>{Of(t,n,r)})}function Of(t,e,n){const r=new ge("/.info/"+e),s=nt(n);t.infoData_.updateSnapshot(r,s);const i=ea(t.infoSyncTree_,r,s);kn(t.eventQueue_,r,i)}function j0(t){return t.nextWriteId_++}function rx(t,e,n){const r=bk(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=nt(s).withIndex(e._queryParams.getIndex());Ok(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ea(t.serverSyncTree_,e._path,i);else{const l=Vo(t.serverSyncTree_,e);o=x0(t.serverSyncTree_,e._path,i,l)}return kn(t.eventQueue_,e._path,o),k0(t.serverSyncTree_,e,n,null,!0),i},s=>(Au(t,"get for query "+Ke(e)+" failed: "+s),Promise.reject(new Error(s))))}function sx(t,e,n,r,s){Au(t,"set",{path:e.toString(),value:n,priority:r});const i=Df(t),o=nt(n,r),l=wf(t.serverSyncTree_,e),u=O0(o,l,i),h=j0(t),f=A0(t.serverSyncTree_,e,u,h,!0);z0(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(c,d)=>{const p=c==="ok";p||bt("set at "+e+" failed: "+c);const _=Qr(t.serverSyncTree_,h,!p);kn(t.eventQueue_,e,_),ax(t,s,c,d)});const a=G0(t,e);ku(t,a),kn(t.eventQueue_,a,[])}function ix(t){Au(t,"onDisconnectEvents");const e=Df(t),n=Fl();Wh(t.onDisconnect_,fe(),(s,i)=>{const o=zk(s,i,t.serverSyncTree_,e);u0(n,s,o)});let r=[];Wh(n,fe(),(s,i)=>{r=r.concat(ea(t.serverSyncTree_,s,i));const o=G0(t,s);ku(t,o)}),t.onDisconnect_=Fl(),kn(t.eventQueue_,fe(),r)}function ox(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Zk)}function Au(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ft(n,...e)}function ax(t,e,n,r){e&&Ei(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function U0(t,e,n){return wf(t.serverSyncTree_,e,n)||X.EMPTY_NODE}function bf(t,e=t.transactionQueueTree_){if(e||xu(t,e),Ai(e)){const n=H0(t,e);q(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&lx(t,na(e),n)}else R0(e)&&Eu(e,n=>{bf(t,n)})}function lx(t,e,n){const r=n.map(h=>h.currentWriteId),s=U0(t,e,r);let i=s;const o=s.hash();for(let h=0;h<n.length;h++){const f=n[h];q(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const a=yt(e,f.path);i=i.updateChild(a,f.currentOutputSnapshotRaw)}const l=i.val(!0),u=e;t.server_.put(u.toString(),l,h=>{Au(t,"transaction put response",{path:u.toString(),status:h});let f=[];if(h==="ok"){const a=[];for(let c=0;c<n.length;c++)n[c].status=2,f=f.concat(Qr(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&a.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();xu(t,If(t.transactionQueueTree_,e)),bf(t,t.transactionQueueTree_),kn(t.eventQueue_,e,f);for(let c=0;c<a.length;c++)Ei(a[c])}else{if(h==="datastale")for(let a=0;a<n.length;a++)n[a].status===3?n[a].status=4:n[a].status=0;else{bt("transaction at "+u.toString()+" failed: "+h);for(let a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=h}ku(t,e)}},o)}function ku(t,e){const n=q0(t,e),r=na(n),s=H0(t,n);return ux(t,s,r),r}function ux(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],h=yt(n,u.path);let f=!1,a;if(q(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,a=u.abortReason,s=s.concat(Qr(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=Jk)f=!0,a="maxretry",s=s.concat(Qr(t.serverSyncTree_,u.currentWriteId,!0));else{const c=U0(t,u.path,o);u.currentInputSnapshot=c;const d=e[l].update(c.val());if(d!==void 0){Nf("transaction failed: Data returned ",d,u.path);let p=nt(d);typeof d=="object"&&d!=null&&Zn(d,".priority")||(p=p.updatePriority(c.getPriority()));const v=u.currentWriteId,m=Df(t),g=O0(p,c,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=g,u.currentWriteId=j0(t),o.splice(o.indexOf(v),1),s=s.concat(A0(t.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally)),s=s.concat(Qr(t.serverSyncTree_,v,!0))}else f=!0,a="nodata",s=s.concat(Qr(t.serverSyncTree_,u.currentWriteId,!0))}kn(t.eventQueue_,n,s),s=[],f&&(e[l].status=2,function(c){setTimeout(c,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(a==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(a),!1,null))))}xu(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Ei(r[l]);bf(t,t.transactionQueueTree_)}function q0(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);n!==null&&Ai(r)===void 0;)r=If(r,n),e=Te(e),n=ue(e);return r}function H0(t,e){const n=[];return $0(t,e,n),n.sort((r,s)=>r.order-s.order),n}function $0(t,e,n){const r=Ai(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Eu(e,s=>{$0(t,s,n)})}function xu(t,e){const n=Ai(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,b0(e,n.length>0?n:void 0)}Eu(e,r=>{xu(t,r)})}function G0(t,e){const n=na(q0(t,e)),r=If(t.transactionQueueTree_,e);return jk(r,s=>{Rc(t,s)}),Rc(t,r),P0(r,s=>{Rc(t,s)}),n}function Rc(t,e){const n=Ai(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(q(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(q(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Qr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?b0(e,void 0):n.length=i+1,kn(t.eventQueue_,na(e),s);for(let o=0;o<r.length;o++)Ei(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function hx(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bt(`Invalid query segment '${n}' in query '${t}'`)}return e}const y_=function(t,e){const n=dx(t),r=n.namespace;n.domain==="firebase.com"&&Yn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kE();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Uy(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ge(n.pathString)}},dx=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",u=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(l=t.substring(0,h-1),t=t.substring(h+2));let f=t.indexOf("/");f===-1&&(f=t.length);let a=t.indexOf("?");a===-1&&(a=t.length),e=t.substring(0,Math.min(f,a)),f<a&&(s=cx(t.substring(f,a)));const c=hx(t.substring(Math.min(t.length,a)));h=e.indexOf(":"),h>=0?(o=l==="https"||l==="wss",u=parseInt(e.substring(h+1),10)):h=e.length;const d=e.slice(0,h);if(d.toLowerCase()==="localhost")n="localhost";else if(d.split(".").length<=2)n=d;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in c&&(i=c.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fx=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=w_.charAt(n%64),n=Math.floor(n/64);q(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=w_.charAt(e[s]);return q(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class mx{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ie(this._path)?null:Zy(this._path)}get ref(){return new Jn(this._repo,this._path)}get _queryIdentifier(){const e=s_(this._queryParams),n=of(e);return n==="{}"?"default":n}get _queryObject(){return s_(this._queryParams)}isEqual(e){if(e=ms(e),!(e instanceof Rf))return!1;const n=this._repo===e._repo,r=t0(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+uA(this._path)}}class Jn extends Rf{constructor(e,n){super(e,n,new ff,!1)}get parent(){const e=e0(this._path);return e===null?null:new Jn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Bo{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ge(e),r=zo(this.ref,e);return new Bo(this._node.getChild(n),r,Be)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Bo(s,zo(this.ref,r),Be)))}hasChild(e){const n=new ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y0(t,e){return t=ms(t),t._checkNotDeleted("ref"),zo(t._root,e)}function zo(t,e){return t=ms(t),ue(t._path)===null?Gk("child","path",e):V0("child","path",e),new Jn(t._repo,Qe(t._path,e))}function gx(t,e){t=ms(t),B0("push",t._path),L0("push",e,t._path,!0);const n=W0(t._repo),r=fx(n),s=zo(t,r),i=zo(t,r);let o;return e!=null?o=vx(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function vx(t,e){t=ms(t),B0("set",t._path),L0("set",e,t._path,!1);const n=new gu;return sx(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function yx(t){t=ms(t);const e=new _x(()=>{}),n=new Pf(e);return rx(t._repo,t,n).then(r=>new Bo(r,new Jn(t._repo,t._path),t._queryParams.getIndex()))}class Pf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new px("value",this,new Bo(e.snapshotNode,new Jn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mx(this,e,n):null}matches(e){return e instanceof Pf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}yk(Jn);Ek(Jn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="FIREBASE_DATABASE_EMULATOR_HOST",Gh={};let Cx=!1;function Sx(t,e,n,r){t.repoInfo_=new Uy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Tx(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ft("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=y_(i,s),l=o.repoInfo,u;typeof process<"u"&&zm&&(u=zm[wx]),u?(i=`http://${u}?ns=${l.namespace}`,o=y_(i,s),l=o.repoInfo):o.repoInfo.secure;const h=new LE(t.name,t.options,e);Yk("Invalid Firebase Database URL",o),ie(o.path)||Yn("Database URL must point to the root of a Firebase Database (not including a child path).");const f=Ax(l,t,h,new FE(t.name,n));return new kx(f,t)}function Ex(t,e){const n=Gh[e];(!n||n[t.key]!==t)&&Yn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ox(t),delete n[t.key]}function Ax(t,e,n,r){let s=Gh[e.name];s||(s={},Gh[e.name]=s);let i=s[t.toURLString()];return i&&Yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ex(t,Cx,n,r),s[t.toURLString()]=i,i}class kx{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tx(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jn(this._repo,fe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ex(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yn("Cannot call "+e+" on a deleted database.")}}function K0(t=cE(),e){const n=oE(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=XS("database");r&&xx(n,...r)}return n}function xx(t,e,n,r={}){t=ms(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new tl(tl.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ZS(r.mockUserToken,t.app.options.projectId);i=new tl(o)}Sx(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){wE(uE),Ol(new Do("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Tx(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ys(Wm,jm,t),Ys(Wm,jm,"esm2017")}jn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};jn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Ix();var Nx="firebase",Dx="10.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(Nx,Dx,"app");const Ox=300,bx=600,Yh=2,C_=2,Rx={apiKey:"AIzaSyDMaahQoAqNc2cqX2PKtn6eGM5TpSfAdk8",authDomain:"dev-memorygame.firebaseapp.com",databaseURL:"https://dev-memorygame-default-rtdb.firebaseio.com",projectId:"dev-memorygame",storageBucket:"dev-memorygame.appspot.com",messagingSenderId:"878380505346",appId:"1:878380505346:web:c69ed3af29a061bf7c8a1b"};sf(Rx);K0();const Q0=re.createContext(),Px=({children:t})=>{const[e,n]=re.useState(0),[r,s]=re.useState(0),[i,o]=re.useState([]),[l,u]=re.useState(Yh),[h,f]=re.useState(0),[a,c]=re.useState(!1),[d,p]=re.useState(!1),[_,v]=re.useState(!1),[m,g]=re.useState(!0),[y,S]=re.useState(0);return Y.jsx(Q0.Provider,{value:{score:e,setScore:n,currentSequence:i,setCurrentSequence:o,numberOfTiles:r,setNumberOfTiles:s,sequenceIndex:h,setSequenceIndex:f,sequenceLength:l,setSequenceLength:u,isGameOver:a,setIsGameOver:c,gameStart:d,setGameStart:p,level:y,setLevel:S,inLevelPicker:_,setInLevelPicker:v,inMenu:m,setInMenu:g},children:t})},Kn=()=>re.useContext(Q0),X0=re.createContext(),Mx=({children:t})=>{const[e,n]=re.useState(!1),[r,s]=re.useState(!1),[i,o]=re.useState(!0),[l,u]=re.useState([]);return Y.jsx(X0.Provider,{value:{isTileFlashing:e,setIsTileFlashing:n,isTileClickEnabled:r,setIsTileClickEnabled:s,isPlayBtnEnabled:i,setIsPlayBtnEnabled:o,tileArr:l,setTileArr:u},children:t})},Iu=()=>re.useContext(X0);function Fx(){const[t,e]=re.useState("<(^.^<) | <(^.^)> | (>^.^)>"),{isGameOver:n,sequenceIndex:r}=Kn();Iu();const l=["<(^.^<) | <(^.^)> | (>^.^)>","<(^.^)> | (>^.^)> | <(^.^<)","(>^.^)> | <(^.^<) | <(^.^)>"];re.useEffect(()=>{e(()=>l[(r+1)%3])},[r]),re.useEffect(()=>{u()},[n]);function u(){e(n?"GAME OVER":"<(^.^<) | <(^.^)> | (>^.^)>")}return Y.jsxs("h1",{className:"title",children:[" ",t," "]})}var Mf={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var a=this||n;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var c=this||n;if(a=parseFloat(a),c.ctx||f(),typeof a<"u"&&a>=0&&a<=1){if(c._volume=a,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a,n.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var p=c._howls[d]._getSoundIds(),_=0;_<p.length;_++){var v=c._howls[d]._soundById(p[_]);v&&v._node&&(v._node.volume=v._volume*a)}return c}return c._volume},mute:function(a){var c=this||n;c.ctx||f(),c._muted=a,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a?0:c._volume,n.ctx.currentTime);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var p=c._howls[d]._getSoundIds(),_=0;_<p.length;_++){var v=c._howls[d]._soundById(p[_]);v&&v._node&&(v._node.muted=a?!0:v._muted)}return c},stop:function(){for(var a=this||n,c=0;c<a._howls.length;c++)a._howls[c].stop();return a},unload:function(){for(var a=this||n,c=a._howls.length-1;c>=0;c--)a._howls[c].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,f()),a},codecs:function(a){return(this||n)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||n;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var c=new Audio;c.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||n,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return a}if(!c||typeof c.canPlayType!="function")return a;var d=c.canPlayType("audio/mpeg;").replace(/^no$/,""),p=a._navigator?a._navigator.userAgent:"",_=p.match(/OPR\/(\d+)/g),v=_&&parseInt(_[0].split("/")[1],10)<33,m=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,g=p.match(/Version\/(.*?) /),y=m&&g&&parseInt(g[1],10)<15;return a._codecs={mp3:!!(!v&&(d||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||n;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var c=function(d){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,a._releaseHtml5Audio(p)}catch{a.noAudio=!0;break}for(var _=0;_<a._howls.length;_++)if(!a._howls[_]._webAudio)for(var v=a._howls[_]._getSoundIds(),m=0;m<v.length;m++){var g=a._howls[_]._soundById(v[m]);g&&g._node&&!g._node._unlocked&&(g._node._unlocked=!0,g._node.load())}a._autoResume();var y=a.ctx.createBufferSource();y.buffer=a._scratchBuffer,y.connect(a.ctx.destination),typeof y.start>"u"?y.noteOn(0):y.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),y.onended=function(){y.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var S=0;S<a._howls.length;S++)a._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),a}},_obtainHtml5Audio:function(){var a=this||n;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var c=this||n;return a._unlocked&&c._html5AudioPool.push(a),c},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!n.usingWebAudio)){for(var c=0;c<a._howls.length;c++)if(a._howls[c]._webAudio){for(var d=0;d<a._howls[c]._sounds.length;d++)if(!a._howls[c]._sounds[d]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var p=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(p,p)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!n.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var c=0;c<a._howls.length;c++)a._howls[c]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var n=new e,r=function(a){var c=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(a)};r.prototype={init:function(a){var c=this;return n.ctx||f(),c._autoplay=a.autoplay||!1,c._format=typeof a.format!="string"?a.format:[a.format],c._html5=a.html5||!1,c._muted=a.mute||!1,c._loop=a.loop||!1,c._pool=a.pool||5,c._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,c._rate=a.rate||1,c._sprite=a.sprite||{},c._src=typeof a.src!="string"?a.src:[a.src],c._volume=a.volume!==void 0?a.volume:1,c._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=a.onend?[{fn:a.onend}]:[],c._onfade=a.onfade?[{fn:a.onfade}]:[],c._onload=a.onload?[{fn:a.onload}]:[],c._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],c._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],c._onpause=a.onpause?[{fn:a.onpause}]:[],c._onplay=a.onplay?[{fn:a.onplay}]:[],c._onstop=a.onstop?[{fn:a.onstop}]:[],c._onmute=a.onmute?[{fn:a.onmute}]:[],c._onvolume=a.onvolume?[{fn:a.onvolume}]:[],c._onrate=a.onrate?[{fn:a.onrate}]:[],c._onseek=a.onseek?[{fn:a.onseek}]:[],c._onunlock=a.onunlock?[{fn:a.onunlock}]:[],c._onresume=[],c._webAudio=n.usingWebAudio&&!c._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var a=this,c=null;if(n.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var d=0;d<a._src.length;d++){var p,_;if(a._format&&a._format[d])p=a._format[d];else{if(_=a._src[d],typeof _!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(_),p||(p=/\.([^.]+)$/.exec(_.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){c=a._src[d];break}}if(!c){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=c,a._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new s(a),a._webAudio&&o(a),a},play:function(a,c){var d=this,p=null;if(typeof a=="number")p=a,a=null;else{if(typeof a=="string"&&d._state==="loaded"&&!d._sprite[a])return null;if(typeof a>"u"&&(a="__default",!d._playLock)){for(var _=0,v=0;v<d._sounds.length;v++)d._sounds[v]._paused&&!d._sounds[v]._ended&&(_++,p=d._sounds[v]._id);_===1?a=null:p=null}}var m=p?d._soundById(p):d._inactiveSound();if(!m)return null;if(p&&!a&&(a=m._sprite||"__default"),d._state!=="loaded"){m._sprite=a,m._ended=!1;var g=m._id;return d._queue.push({event:"play",action:function(){d.play(g)}}),g}if(p&&!m._paused)return c||d._loadQueue("play"),m._id;d._webAudio&&n._autoResume();var y=Math.max(0,m._seek>0?m._seek:d._sprite[a][0]/1e3),S=Math.max(0,(d._sprite[a][0]+d._sprite[a][1])/1e3-y),w=S*1e3/Math.abs(m._rate),E=d._sprite[a][0]/1e3,A=(d._sprite[a][0]+d._sprite[a][1])/1e3;m._sprite=a,m._ended=!1;var T=function(){m._paused=!1,m._seek=y,m._start=E,m._stop=A,m._loop=!!(m._loop||d._sprite[a][2])};if(y>=A){d._ended(m);return}var N=m._node;if(d._webAudio){var D=function(){d._playLock=!1,T(),d._refreshBuffer(m);var b=m._muted||d._muted?0:m._volume;N.gain.setValueAtTime(b,n.ctx.currentTime),m._playStart=n.ctx.currentTime,typeof N.bufferSource.start>"u"?m._loop?N.bufferSource.noteGrainOn(0,y,86400):N.bufferSource.noteGrainOn(0,y,S):m._loop?N.bufferSource.start(0,y,86400):N.bufferSource.start(0,y,S),w!==1/0&&(d._endTimers[m._id]=setTimeout(d._ended.bind(d,m),w)),c||setTimeout(function(){d._emit("play",m._id),d._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?D():(d._playLock=!0,d.once("resume",D),d._clearTimer(m._id))}else{var x=function(){N.currentTime=y,N.muted=m._muted||d._muted||n._muted||N.muted,N.volume=m._volume*n.volume(),N.playbackRate=m._rate;try{var b=N.play();if(b&&typeof Promise<"u"&&(b instanceof Promise||typeof b.then=="function")?(d._playLock=!0,T(),b.then(function(){d._playLock=!1,N._unlocked=!0,c?d._loadQueue():d._emit("play",m._id)}).catch(function(){d._playLock=!1,d._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):c||(d._playLock=!1,T(),d._emit("play",m._id)),N.playbackRate=m._rate,N.paused){d._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||m._loop?d._endTimers[m._id]=setTimeout(d._ended.bind(d,m),w):(d._endTimers[m._id]=function(){d._ended(m),N.removeEventListener("ended",d._endTimers[m._id],!1)},N.addEventListener("ended",d._endTimers[m._id],!1))}catch(L){d._emit("playerror",m._id,L)}};N.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(N.src=d._src,N.load());var I=window&&window.ejecta||!N.readyState&&n._navigator.isCocoonJS;if(N.readyState>=3||I)x();else{d._playLock=!0,d._state="loading";var R=function(){d._state="loaded",x(),N.removeEventListener(n._canPlayEvent,R,!1)};N.addEventListener(n._canPlayEvent,R,!1),d._clearTimer(m._id)}}return m._id},pause:function(a){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(a)}}),c;for(var d=c._getSoundIds(a),p=0;p<d.length;p++){c._clearTimer(d[p]);var _=c._soundById(d[p]);if(_&&!_._paused&&(_._seek=c.seek(d[p]),_._rateSeek=0,_._paused=!0,c._stopFade(d[p]),_._node))if(c._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),c._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||c._emit("pause",_?_._id:null)}return c},stop:function(a,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(a)}}),d;for(var p=d._getSoundIds(a),_=0;_<p.length;_++){d._clearTimer(p[_]);var v=d._soundById(p[_]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,d._stopFade(p[_]),v._node&&(d._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&d._clearSound(v._node))),c||d._emit("stop",v._id))}return d},mute:function(a,c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(a,c)}}),d;if(typeof c>"u")if(typeof a=="boolean")d._muted=a;else return d._muted;for(var p=d._getSoundIds(c),_=0;_<p.length;_++){var v=d._soundById(p[_]);v&&(v._muted=a,v._interval&&d._stopFade(v._id),d._webAudio&&v._node?v._node.gain.setValueAtTime(a?0:v._volume,n.ctx.currentTime):v._node&&(v._node.muted=n._muted?!0:a),d._emit("mute",v._id))}return d},volume:function(){var a=this,c=arguments,d,p;if(c.length===0)return a._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var _=a._getSoundIds(),v=_.indexOf(c[0]);v>=0?p=parseInt(c[0],10):d=parseFloat(c[0])}else c.length>=2&&(d=parseFloat(c[0]),p=parseInt(c[1],10));var m;if(typeof d<"u"&&d>=0&&d<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,c)}}),a;typeof p>"u"&&(a._volume=d),p=a._getSoundIds(p);for(var g=0;g<p.length;g++)m=a._soundById(p[g]),m&&(m._volume=d,c[2]||a._stopFade(p[g]),a._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(d,n.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=d*n.volume()),a._emit("volume",m._id))}else return m=p?a._soundById(p):a._sounds[0],m?m._volume:0;return a},fade:function(a,c,d,p){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(a,c,d,p)}}),_;a=Math.min(Math.max(0,parseFloat(a)),1),c=Math.min(Math.max(0,parseFloat(c)),1),d=parseFloat(d),_.volume(a,p);for(var v=_._getSoundIds(p),m=0;m<v.length;m++){var g=_._soundById(v[m]);if(g){if(p||_._stopFade(v[m]),_._webAudio&&!g._muted){var y=n.ctx.currentTime,S=y+d/1e3;g._volume=a,g._node.gain.setValueAtTime(a,y),g._node.gain.linearRampToValueAtTime(c,S)}_._startFadeInterval(g,a,c,d,v[m],typeof p>"u")}}return _},_startFadeInterval:function(a,c,d,p,_,v){var m=this,g=c,y=d-c,S=Math.abs(y/.01),w=Math.max(4,S>0?p/S:p),E=Date.now();a._fadeTo=d,a._interval=setInterval(function(){var A=(Date.now()-E)/p;E=Date.now(),g+=y*A,g=Math.round(g*100)/100,y<0?g=Math.max(d,g):g=Math.min(d,g),m._webAudio?a._volume=g:m.volume(g,a._id,!0),v&&(m._volume=g),(d<c&&g<=d||d>c&&g>=d)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,m.volume(d,a._id),m._emit("fade",a._id))},w)},_stopFade:function(a){var c=this,d=c._soundById(a);return d&&d._interval&&(c._webAudio&&d._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(d._interval),d._interval=null,c.volume(d._fadeTo,a),d._fadeTo=null,c._emit("fade",a)),c},loop:function(){var a=this,c=arguments,d,p,_;if(c.length===0)return a._loop;if(c.length===1)if(typeof c[0]=="boolean")d=c[0],a._loop=d;else return _=a._soundById(parseInt(c[0],10)),_?_._loop:!1;else c.length===2&&(d=c[0],p=parseInt(c[1],10));for(var v=a._getSoundIds(p),m=0;m<v.length;m++)_=a._soundById(v[m]),_&&(_._loop=d,a._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=d,d&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,a.playing(v[m])&&(a.pause(v[m],!0),a.play(v[m],!0)))));return a},rate:function(){var a=this,c=arguments,d,p;if(c.length===0)p=a._sounds[0]._id;else if(c.length===1){var _=a._getSoundIds(),v=_.indexOf(c[0]);v>=0?p=parseInt(c[0],10):d=parseFloat(c[0])}else c.length===2&&(d=parseFloat(c[0]),p=parseInt(c[1],10));var m;if(typeof d=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,c)}}),a;typeof p>"u"&&(a._rate=d),p=a._getSoundIds(p);for(var g=0;g<p.length;g++)if(m=a._soundById(p[g]),m){a.playing(p[g])&&(m._rateSeek=a.seek(p[g]),m._playStart=a._webAudio?n.ctx.currentTime:m._playStart),m._rate=d,a._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(d,n.ctx.currentTime):m._node&&(m._node.playbackRate=d);var y=a.seek(p[g]),S=(a._sprite[m._sprite][0]+a._sprite[m._sprite][1])/1e3-y,w=S*1e3/Math.abs(m._rate);(a._endTimers[p[g]]||!m._paused)&&(a._clearTimer(p[g]),a._endTimers[p[g]]=setTimeout(a._ended.bind(a,m),w)),a._emit("rate",m._id)}}else return m=a._soundById(p),m?m._rate:a._rate;return a},seek:function(){var a=this,c=arguments,d,p;if(c.length===0)a._sounds.length&&(p=a._sounds[0]._id);else if(c.length===1){var _=a._getSoundIds(),v=_.indexOf(c[0]);v>=0?p=parseInt(c[0],10):a._sounds.length&&(p=a._sounds[0]._id,d=parseFloat(c[0]))}else c.length===2&&(d=parseFloat(c[0]),p=parseInt(c[1],10));if(typeof p>"u")return 0;if(typeof d=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,c)}}),a;var m=a._soundById(p);if(m)if(typeof d=="number"&&d>=0){var g=a.playing(p);g&&a.pause(p,!0),m._seek=d,m._ended=!1,a._clearTimer(p),!a._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=d);var y=function(){g&&a.play(p,!0),a._emit("seek",p)};if(g&&!a._webAudio){var S=function(){a._playLock?setTimeout(S,0):y()};setTimeout(S,0)}else y()}else if(a._webAudio){var w=a.playing(p)?n.ctx.currentTime-m._playStart:0,E=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(E+w*Math.abs(m._rate))}else return m._node.currentTime;return a},playing:function(a){var c=this;if(typeof a=="number"){var d=c._soundById(a);return d?!d._paused:!1}for(var p=0;p<c._sounds.length;p++)if(!c._sounds[p]._paused)return!0;return!1},duration:function(a){var c=this,d=c._duration,p=c._soundById(a);return p&&(d=c._sprite[p._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var a=this,c=a._sounds,d=0;d<c.length;d++)c[d]._paused||a.stop(c[d]._id),a._webAudio||(a._clearSound(c[d]._node),c[d]._node.removeEventListener("error",c[d]._errorFn,!1),c[d]._node.removeEventListener(n._canPlayEvent,c[d]._loadFn,!1),c[d]._node.removeEventListener("ended",c[d]._endFn,!1),n._releaseHtml5Audio(c[d]._node)),delete c[d]._node,a._clearTimer(c[d]._id);var p=n._howls.indexOf(a);p>=0&&n._howls.splice(p,1);var _=!0;for(d=0;d<n._howls.length;d++)if(n._howls[d]._src===a._src||a._src.indexOf(n._howls[d]._src)>=0){_=!1;break}return i&&_&&delete i[a._src],n.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,c,d,p){var _=this,v=_["_on"+a];return typeof c=="function"&&v.push(p?{id:d,fn:c,once:p}:{id:d,fn:c}),_},off:function(a,c,d){var p=this,_=p["_on"+a],v=0;if(typeof c=="number"&&(d=c,c=null),c||d)for(v=0;v<_.length;v++){var m=d===_[v].id;if(c===_[v].fn&&m||!c&&m){_.splice(v,1);break}}else if(a)p["_on"+a]=[];else{var g=Object.keys(p);for(v=0;v<g.length;v++)g[v].indexOf("_on")===0&&Array.isArray(p[g[v]])&&(p[g[v]]=[])}return p},once:function(a,c,d){var p=this;return p.on(a,c,d,1),p},_emit:function(a,c,d){for(var p=this,_=p["_on"+a],v=_.length-1;v>=0;v--)(!_[v].id||_[v].id===c||a==="load")&&(setTimeout((function(m){m.call(this,c,d)}).bind(p,_[v].fn),0),_[v].once&&p.off(a,_[v].fn,_[v].id));return p._loadQueue(a),p},_loadQueue:function(a){var c=this;if(c._queue.length>0){var d=c._queue[0];d.event===a&&(c._queue.shift(),c._loadQueue()),a||d.action()}return c},_ended:function(a){var c=this,d=a._sprite;if(!c._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(c._ended.bind(c,a),100),c;var p=!!(a._loop||c._sprite[d][2]);if(c._emit("end",a._id),!c._webAudio&&p&&c.stop(a._id,!0).play(a._id),c._webAudio&&p){c._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=n.ctx.currentTime;var _=(a._stop-a._start)*1e3/Math.abs(a._rate);c._endTimers[a._id]=setTimeout(c._ended.bind(c,a),_)}return c._webAudio&&!p&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,c._clearTimer(a._id),c._cleanBuffer(a._node),n._autoSuspend()),!c._webAudio&&!p&&c.stop(a._id,!0),c},_clearTimer:function(a){var c=this;if(c._endTimers[a]){if(typeof c._endTimers[a]!="function")clearTimeout(c._endTimers[a]);else{var d=c._soundById(a);d&&d._node&&d._node.removeEventListener("ended",c._endTimers[a],!1)}delete c._endTimers[a]}return c},_soundById:function(a){for(var c=this,d=0;d<c._sounds.length;d++)if(a===c._sounds[d]._id)return c._sounds[d];return null},_inactiveSound:function(){var a=this;a._drain();for(var c=0;c<a._sounds.length;c++)if(a._sounds[c]._ended)return a._sounds[c].reset();return new s(a)},_drain:function(){var a=this,c=a._pool,d=0,p=0;if(!(a._sounds.length<c)){for(p=0;p<a._sounds.length;p++)a._sounds[p]._ended&&d++;for(p=a._sounds.length-1;p>=0;p--){if(d<=c)return;a._sounds[p]._ended&&(a._webAudio&&a._sounds[p]._node&&a._sounds[p]._node.disconnect(0),a._sounds.splice(p,1),d--)}}},_getSoundIds:function(a){var c=this;if(typeof a>"u"){for(var d=[],p=0;p<c._sounds.length;p++)d.push(c._sounds[p]._id);return d}else return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=n.ctx.createBufferSource(),a._node.bufferSource.buffer=i[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,n.ctx.currentTime),c},_cleanBuffer:function(a){var c=this,d=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return c;if(n._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),d))try{a.bufferSource.buffer=n._scratchBuffer}catch{}return a.bufferSource=null,c},_clearSound:function(a){var c=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);c||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(a){this._parent=a,this.init()};s.prototype={init:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,c._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,d=n._muted||a._muted||a._parent._muted?0:a._volume;return c._webAudio?(a._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),a._node.gain.setValueAtTime(d,n.ctx.currentTime),a._node.paused=!0,a._node.connect(n.masterGain)):n.noAudio||(a._node=n._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(n._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=c._src,a._node.preload=c._preload===!0?"auto":c._preload,a._node.volume=d*n.volume(),a._node.load()),a},reset:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,c=a._parent;c._duration=Math.ceil(a._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),a._node.removeEventListener(n._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,c=a._parent;c._duration===1/0&&(c._duration=Math.ceil(a._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var i={},o=function(a){var c=a._src;if(i[c]){a._duration=i[c].duration,h(a);return}if(/^data:[^;]+;base64,/.test(c)){for(var d=atob(c.split(",")[1]),p=new Uint8Array(d.length),_=0;_<d.length;++_)p[_]=d.charCodeAt(_);u(p.buffer,a)}else{var v=new XMLHttpRequest;v.open(a._xhr.method,c,!0),v.withCredentials=a._xhr.withCredentials,v.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(m){v.setRequestHeader(m,a._xhr.headers[m])}),v.onload=function(){var m=(v.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}u(v.response,a)},v.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete i[c],a.load())},l(v)}},l=function(a){try{a.send()}catch{a.onerror()}},u=function(a,c){var d=function(){c._emit("loaderror",null,"Decoding audio data failed.")},p=function(_){_&&c._sounds.length>0?(i[c._src]=_,h(c,_)):d()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(a).then(p).catch(d):n.ctx.decodeAudioData(a,p,d)},h=function(a,c){c&&!a._duration&&(a._duration=c.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},f=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),c=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=c?parseInt(c[1],10):null;if(a&&d&&d<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof hr<"u"?(hr.HowlerGlobal=e,hr.Howler=n,hr.Howl=r,hr.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(r=typeof r!="number"?i._pos[1]:r,s=typeof s!="number"?i._pos[2]:s,typeof n=="number")i._pos=[n,r,s],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(n,r,s,i,o,l){var u=this;if(!u.ctx||!u.ctx.listener)return u;var h=u._orientation;if(r=typeof r!="number"?h[1]:r,s=typeof s!="number"?h[2]:s,i=typeof i!="number"?h[3]:i,o=typeof o!="number"?h[4]:o,l=typeof l!="number"?h[5]:l,typeof n=="number")u._orientation=[n,r,s,i,o,l],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,r,s,i,o,l);else return h;return u},Howl.prototype.init=function(n){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(n,r)}}),s;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")s._stereo=n,s._pos=[n,0,0];else return s._stereo;for(var o=s._getSoundIds(r),l=0;l<o.length;l++){var u=s._soundById(o[l]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,i),i==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),s._emit("stereo",u._id);else return u._stereo}return s},Howl.prototype.pos=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,s,i)}}),o;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof i>"u")if(typeof n=="number")o._pos=[n,r,s];else return o._pos;for(var l=o._getSoundIds(i),u=0;u<l.length;u++){var h=o._soundById(l[u]);if(h)if(typeof n=="number")h._pos=[n,r,s],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):h._panner.setPosition(n,r,s)),o._emit("pos",h._id);else return h._pos}return o},Howl.prototype.orientation=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,s,i)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,s=typeof s!="number"?o._orientation[2]:s,typeof i>"u")if(typeof n=="number")o._orientation=[n,r,s];else return o._orientation;for(var l=o._getSoundIds(i),u=0;u<l.length;u++){var h=o._soundById(l[u]);if(h)if(typeof n=="number")h._orientation=[n,r,s],h._node&&(h._panner||(h._pos||(h._pos=o._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):h._panner.setOrientation(n,r,s)),o._emit("orientation",h._id);else return h._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,s,i,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof i>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),n._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(s=r[0],i=parseInt(r[1],10));for(var l=n._getSoundIds(i),u=0;u<l.length;u++)if(o=n._soundById(l[u]),o){var h=o._pannerAttr;h={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:h.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:h.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:h.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:h.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:h.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:h.panningModel};var f=o._panner;f||(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"),f=o._panner),f.coneInnerAngle=h.coneInnerAngle,f.coneOuterAngle=h.coneOuterAngle,f.coneOuterGain=h.coneOuterGain,f.distanceModel=h.distanceModel,f.maxDistance=h.maxDistance,f.refDistance=h.refDistance,f.rolloffFactor=h.rolloffFactor,f.panningModel=h.panningModel}return n},Sound.prototype.init=function(n){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,n.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(Mf);const Lx=()=>Math.random().toString(36).slice(2,11),Kh=(t,e)=>{let n=[];for(let r=0;r<t;r++)n.push(Math.floor(Math.random()*(e*e)));return console.log("Current Sequence:",n.map(r=>r+1)),n},Vx="/ReactMemoryGame/assets/correct_12-BCa4MVdJ.mp3",Bx="/ReactMemoryGame/assets/wrong_01-C8-gHQ0L.mp3",zx="/ReactMemoryGame/assets/correct_11-DxNEn1o1.mp3",Wx="/ReactMemoryGame/assets/correct_10-DmZfZ_Ih.mp3",jx="/ReactMemoryGame/assets/correct_09-D0uh1pTV.mp3",Ux="/ReactMemoryGame/assets/correct_08-DL1sa7e8.mp3",qx=[Ux,jx,Wx,zx,Vx],Hx=new Mf.Howl({src:[Bx],volume:.1});qx.map(t=>new Mf.Howl({src:[t],volume:.1}));const $x=()=>{Hx.play()},Z0="15.0.4",S_=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),T_=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Qh=(t,e)=>({startTime:e,type:"setValue",value:t}),J0=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),ew=(t,e,{startTime:n,target:r,timeConstant:s})=>r+(e-r)*Math.exp((n-t)/s),Bs=t=>t.type==="exponentialRampToValue",ql=t=>t.type==="linearRampToValue",cr=t=>Bs(t)||ql(t),Ff=t=>t.type==="setValue",Mn=t=>t.type==="setValueCurve",Hl=(t,e,n,r)=>{const s=t[e];return s===void 0?r:cr(s)||Ff(s)?s.value:Mn(s)?s.values[s.values.length-1]:ew(n,Hl(t,e-1,s.startTime,r),s)},E_=(t,e,n,r,s)=>n===void 0?[r.insertTime,s]:cr(n)?[n.endTime,n.value]:Ff(n)?[n.startTime,n.value]:Mn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Hl(t,e-1,n.startTime,s)],Xh=t=>t.type==="cancelAndHold",Zh=t=>t.type==="cancelScheduledValues",ar=t=>Xh(t)||Zh(t)?t.cancelTime:Bs(t)||ql(t)?t.endTime:t.startTime,A_=(t,e,n,{endTime:r,value:s})=>n===s?s:0<n&&0<s||n<0&&s<0?n*(s/n)**((t-e)/(r-e)):0,k_=(t,e,n,{endTime:r,value:s})=>n+(t-e)/(r-e)*(s-n),Gx=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},Yx=(t,{duration:e,startTime:n,values:r})=>{const s=(t-n)/e*(r.length-1);return Gx(r,s)},Fa=t=>t.type==="setTarget";class Kx{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=ar(e);if(Xh(e)||Zh(e)){const r=this._automationEvents.findIndex(i=>Zh(e)&&Mn(i)?i.startTime+i.duration>=n:ar(i)>=n),s=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Xh(e)){const i=this._automationEvents[this._automationEvents.length-1];if(s!==void 0&&cr(s)){if(i!==void 0&&Fa(i))throw new Error("The internal list is malformed.");const o=i===void 0?s.insertTime:Mn(i)?i.startTime+i.duration:ar(i),l=i===void 0?this._defaultValue:Mn(i)?i.values[i.values.length-1]:i.value,u=Bs(s)?A_(n,o,l,s):k_(n,o,l,s),h=Bs(s)?S_(u,n,this._currenTime):T_(u,n,this._currenTime);this._automationEvents.push(h)}if(i!==void 0&&Fa(i)&&this._automationEvents.push(Qh(this.getValue(n),n)),i!==void 0&&Mn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,l=(i.values.length-1)/i.duration,u=Math.max(2,1+Math.ceil(o*l)),h=o/(u-1)*l,f=i.values.slice(0,u);if(h<1)for(let a=1;a<u;a+=1){const c=h*a%1;f[a]=i.values[a-1]*(1-c)+i.values[a]*c}this._automationEvents[this._automationEvents.length-1]=J0(f,i.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>ar(o)>n),s=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(s!==void 0&&Mn(s)&&ar(s)+s.duration>n)return!1;const i=Bs(e)?S_(e.value,e.endTime,this._currenTime):ql(e)?T_(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(i);else{if(Mn(e)&&n+e.duration>ar(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>ar(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),s=r[0];Fa(s)&&r.unshift(Qh(Hl(this._automationEvents,n-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>ar(o)>e),r=this._automationEvents[n],s=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(i!==void 0&&Fa(i)&&(r===void 0||!cr(r)||r.insertTime>e))return ew(e,Hl(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Ff(i)&&(r===void 0||!cr(r)))return i.value;if(i!==void 0&&Mn(i)&&(r===void 0||!cr(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Yx(e,i):i.values[i.values.length-1];if(i!==void 0&&cr(i)&&(r===void 0||!cr(r)))return i.value;if(r!==void 0&&Bs(r)){const[o,l]=E_(this._automationEvents,s,i,r,this._defaultValue);return A_(e,o,l,r)}if(r!==void 0&&ql(r)){const[o,l]=E_(this._automationEvents,s,i,r,this._defaultValue);return k_(e,o,l,r)}return this._defaultValue}}const Qx=t=>({cancelTime:t,type:"cancelAndHold"}),Xx=t=>({cancelTime:t,type:"cancelScheduledValues"}),Zx=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),Jx=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),eI=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),tI=()=>new DOMException("","AbortError"),nI=t=>(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],l=>l[0]===n&&l[1]===r,o)},rI=t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},sI=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},hi=new WeakSet,tw=new WeakMap,Lf=new WeakMap,nw=new WeakMap,Vf=new WeakMap,Nu=new WeakMap,rw=new WeakMap,Jh=new WeakMap,ed=new WeakMap,td=new WeakMap,sw={construct(){return sw}},iI=t=>{try{const e=new Proxy(t,sw);new e}catch{return!1}return!0},x_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,I_=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(x_);for(;s!==null;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(x_)}return[n.join(";"),r]},N_=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},D_=t=>{if(!iI(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},oI=(t,e,n,r,s,i,o,l,u,h,f,a,c)=>{let d=0;return(p,_,v={credentials:"omit"})=>{const m=f.get(p);if(m!==void 0&&m.has(_))return Promise.resolve();const g=h.get(p);if(g!==void 0){const w=g.get(_);if(w!==void 0)return w}const y=i(p),S=y.audioWorklet===void 0?s(_).then(([w,E])=>{const[A,T]=I_(w,E),N=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return n(N)}).then(()=>{const w=c._AWGS.pop();if(w===void 0)throw new SyntaxError;r(y.currentTime,y.sampleRate,()=>w(class{},void 0,(E,A)=>{if(E.trim()==="")throw e();const T=ed.get(y);if(T!==void 0){if(T.has(E))throw e();D_(A),N_(A.parameterDescriptors),T.set(E,A)}else D_(A),N_(A.parameterDescriptors),ed.set(y,new Map([[E,A]]))},y.sampleRate,void 0,void 0))}):Promise.all([s(_),Promise.resolve(t(a,a))]).then(([[w,E],A])=>{const T=d+1;d=T;const[N,D]=I_(w,E),b=`${N};((AudioWorkletProcessor,registerProcessor)=>{${D}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,L=new Blob([b],{type:"application/javascript; charset=utf-8"}),W=URL.createObjectURL(L);return y.audioWorklet.addModule(W,v).then(()=>{if(l(y))return y;const P=o(y);return P.audioWorklet.addModule(W,v).then(()=>P)}).then(P=>{if(u===null)throw new SyntaxError;try{new u(P,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(W))});return g===void 0?h.set(p,new Map([[_,S]])):g.set(_,S),S.then(()=>{const w=f.get(p);w===void 0?f.set(p,new Set([_])):w.add(_)}).finally(()=>{const w=h.get(p);w!==void 0&&w.delete(_)}),S}},_n=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Du=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},iw=(t,e,n,r)=>{const s=_n(t,e),i=Du(s,o=>o[0]===n&&o[1]===r);return s.size===0&&t.delete(e),i},ra=t=>_n(rw,t),di=t=>{if(hi.has(t))throw new Error("The AudioNode is already stored.");hi.add(t),ra(t).forEach(e=>e(!0))},ow=t=>"port"in t,sa=t=>{if(!hi.has(t))throw new Error("The AudioNode is not stored.");hi.delete(t),ra(t).forEach(e=>e(!1))},nd=(t,e)=>{!ow(t)&&e.every(n=>n.size===0)&&sa(t)},aI=(t,e,n,r,s,i,o,l,u,h,f,a,c)=>{const d=new WeakMap;return(p,_,v,m,g)=>{const{activeInputs:y,passiveInputs:S}=i(_),{outputs:w}=i(p),E=l(p),A=T=>{const N=u(_),D=u(p);if(T){const x=iw(S,p,v,m);t(y,p,x,!1),!g&&!a(p)&&n(D,N,v,m),c(_)&&di(_)}else{const x=r(y,p,v,m);e(S,m,x,!1),!g&&!a(p)&&s(D,N,v,m);const I=o(_);if(I===0)f(_)&&nd(_,y);else{const R=d.get(_);R!==void 0&&clearTimeout(R),d.set(_,setTimeout(()=>{f(_)&&nd(_,y)},I*1e3))}}};return h(w,[_,v,m],T=>T[0]===_&&T[1]===v&&T[2]===m,!0)?(E.add(A),f(p)?t(y,p,[v,m,A],!0):e(S,m,[p,v,A],!0),!0):!1}},lI=t=>(e,n,[r,s,i],o)=>{const l=e.get(r);l===void 0?e.set(r,new Set([[s,n,i]])):t(l,[s,n,i],u=>u[0]===s&&u[1]===n,o)},uI=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)},cI=t=>(e,n)=>{t(e).add(n)},hI={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},dI=(t,e,n,r,s,i)=>class extends t{constructor(l,u){const h=s(l),f={...hI,...u},a=r(h,f),c=i(h)?e():null;super(l,!1,a,c),this._nativeAnalyserNode=a}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(l){this._nativeAnalyserNode.fftSize=l}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(l){const u=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=l,!(l>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=u,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(l){const u=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=l,!(this._nativeAnalyserNode.maxDecibels>l))throw this._nativeAnalyserNode.minDecibels=u,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(l){this._nativeAnalyserNode.smoothingTimeConstant=l}getByteFrequencyData(l){this._nativeAnalyserNode.getByteFrequencyData(l)}getByteTimeDomainData(l){this._nativeAnalyserNode.getByteTimeDomainData(l)}getFloatFrequencyData(l){this._nativeAnalyserNode.getFloatFrequencyData(l)}getFloatTimeDomainData(l){this._nativeAnalyserNode.getFloatTimeDomainData(l)}},_t=(t,e)=>t.context===e,fI=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let l=e(i);if(!_t(l,o)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,fftSize:l.fftSize,maxDecibels:l.maxDecibels,minDecibels:l.minDecibels,smoothingTimeConstant:l.smoothingTimeConstant};l=t(o,h)}return r.set(o,l),await n(i,o,l),l};return{render(i,o){const l=r.get(o);return l!==void 0?Promise.resolve(l):s(i,o)}}},$l=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},In=()=>new DOMException("","IndexSizeError"),Bf=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?In():r}})(t.getChannelData)},pI={numberOfChannels:1},mI=(t,e,n,r,s,i,o,l)=>{let u=null;return class aw{constructor(f){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:a,numberOfChannels:c,sampleRate:d}={...pI,...f};u===null&&(u=new s(1,1,44100));const p=r!==null&&e(i,i)?new r({length:a,numberOfChannels:c,sampleRate:d}):u.createBuffer(c,a,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),Bf(p)):e($l,()=>$l(p))||l(p),t.add(p),p}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===aw.prototype||t.has(f)}}},kt=-34028234663852886e22,vt=-kt,Un=t=>hi.has(t),_I={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},gI=(t,e,n,r,s,i,o,l)=>class extends t{constructor(h,f){const a=i(h),c={..._I,...f},d=s(a,c),p=o(a),_=p?e():null;super(h,!1,d,_),this._audioBufferSourceNodeRenderer=_,this._isBufferNullified=!1,this._isBufferSet=c.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,vt,kt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(h){if(this._nativeAudioBufferSourceNode.buffer=h,h!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(h){this._nativeAudioBufferSourceNode.loop=h}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(h){this._nativeAudioBufferSourceNode.loopEnd=h}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(h){this._nativeAudioBufferSourceNode.loopStart=h}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?l(this,h):null;this._nativeAudioBufferSourceNode.onended=f;const a=this._nativeAudioBufferSourceNode.onended;this._onended=a!==null&&a===f?h:a}get playbackRate(){return this._playbackRate}start(h=0,f=0,a){if(this._nativeAudioBufferSourceNode.start(h,f,a),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=a===void 0?[h,f]:[h,f,a]),this.context.state!=="closed"){di(this);const c=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",c),Un(this)&&sa(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",c)}}stop(h=0){this._nativeAudioBufferSourceNode.stop(h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=h)}},vI=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,l=null;const u=async(h,f)=>{let a=n(h);const c=_t(a,f);if(!c){const d={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,loop:a.loop,loopEnd:a.loopEnd,loopStart:a.loopStart,playbackRate:a.playbackRate.value};a=e(f,d),o!==null&&a.start(...o),l!==null&&a.stop(l)}return i.set(f,a),c?await t(f,h.playbackRate,a.playbackRate):await r(f,h.playbackRate,a.playbackRate),await s(h,f,a),a};return{set start(h){o=h},set stop(h){l=h},render(h,f){const a=i.get(f);return a!==void 0?Promise.resolve(a):u(h,f)}}},yI=t=>"playbackRate"in t,wI=t=>"frequency"in t&&"gain"in t,CI=t=>"offset"in t,SI=t=>!("frequency"in t)&&"gain"in t,TI=t=>"detune"in t&&"frequency"in t,EI=t=>"pan"in t,wt=t=>_n(tw,t),ia=t=>_n(nw,t),rd=(t,e)=>{const{activeInputs:n}=wt(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||rd(i,[...e,t])}));const r=yI(t)?[t.playbackRate]:ow(t)?Array.from(t.parameters.values()):wI(t)?[t.Q,t.detune,t.frequency,t.gain]:CI(t)?[t.offset]:SI(t)?[t.gain]:TI(t)?[t.detune,t.frequency]:EI(t)?[t.pan]:[];for(const s of r){const i=ia(s);i!==void 0&&i.activeInputs.forEach(([o])=>rd(o,e))}Un(t)&&sa(t)},lw=t=>{rd(t.destination,[])},AI=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),kI=(t,e,n,r,s,i,o,l,u)=>class extends t{constructor(f={}){if(u===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new u(f)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(a===null)throw r();if(!AI(f.latencyHint))throw new TypeError(`The provided value '${f.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(f.sampleRate!==void 0&&a.sampleRate!==f.sampleRate)throw n();super(a,2);const{latencyHint:c}=f,{sampleRate:d}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:c==="balanced"?512/d:c==="interactive"||c===void 0?256/d:c==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(c*d/128)))*128/d,this._nativeAudioContext=a,u.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",p)};a.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),lw(this)}))}createMediaElementSource(f){return new s(this,{mediaElement:f})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(f){return new o(this,{mediaStream:f})}createMediaStreamTrackSource(f){return new l(this,{mediaStreamTrack:f})}resume(){return this._state==="suspended"?new Promise((f,a)=>{const c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?f():this.resume().then(f,a)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(f=>{throw f===void 0||f.code===15?e():f})}suspend(){return this._nativeAudioContext.suspend().catch(f=>{throw f===void 0?e():f})}},xI=(t,e,n,r,s,i,o,l)=>class extends t{constructor(h,f){const a=i(h),c=o(a),d=s(a,f,c),p=c?e(l):null;super(h,!1,d,p),this._isNodeOfNativeOfflineAudioContext=c,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(h){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(h>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=h}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(h){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=h}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},II=t=>{const e=new WeakMap,n=async(r,s)=>{const i=s.destination;return e.set(s,i),await t(r,s,i),i};return{render(r,s){const i=e.get(s);return i!==void 0?Promise.resolve(i):n(r,s)}}},NI=(t,e,n,r,s,i,o,l)=>(u,h)=>{const f=h.listener,a=()=>{const w=new Float32Array(1),E=e(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(h);let T=!1,N=[0,0,-1,0,1,0],D=[0,0,0];const x=()=>{if(T)return;T=!0;const L=r(h,256,9,0);L.onaudioprocess=({inputBuffer:W})=>{const P=[i(W,w,0),i(W,w,1),i(W,w,2),i(W,w,3),i(W,w,4),i(W,w,5)];P.some((M,z)=>M!==N[z])&&(f.setOrientation(...P),N=P);const O=[i(W,w,6),i(W,w,7),i(W,w,8)];O.some((M,z)=>M!==D[z])&&(f.setPosition(...O),D=O)},E.connect(L)},I=L=>W=>{W!==N[L]&&(N[L]=W,f.setOrientation(...N))},R=L=>W=>{W!==D[L]&&(D[L]=W,f.setPosition(...D))},b=(L,W,P)=>{const O=n(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W});O.connect(E,0,L),O.start(),Object.defineProperty(O.offset,"defaultValue",{get(){return W}});const M=t({context:u},A,O.offset,vt,kt);return l(M,"value",z=>()=>z.call(M),z=>H=>{try{z.call(M,H)}catch(K){if(K.code!==9)throw K}x(),A&&P(H)}),M.cancelAndHoldAtTime=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.cancelAndHoldAtTime),M.cancelScheduledValues=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.cancelScheduledValues),M.exponentialRampToValueAtTime=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.exponentialRampToValueAtTime),M.linearRampToValueAtTime=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.linearRampToValueAtTime),M.setTargetAtTime=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.setTargetAtTime),M.setValueAtTime=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.setValueAtTime),M.setValueCurveAtTime=(z=>A?()=>{throw s()}:(...H)=>{const K=z.apply(M,H);return x(),K})(M.setValueCurveAtTime),M};return{forwardX:b(0,0,I(0)),forwardY:b(1,0,I(1)),forwardZ:b(2,-1,I(2)),positionX:b(6,0,R(0)),positionY:b(7,0,R(1)),positionZ:b(8,0,R(2)),upX:b(3,0,I(3)),upY:b(4,1,I(4)),upZ:b(5,0,I(5))}},{forwardX:c,forwardY:d,forwardZ:p,positionX:_,positionY:v,positionZ:m,upX:g,upY:y,upZ:S}=f.forwardX===void 0?a():f;return{get forwardX(){return c},get forwardY(){return d},get forwardZ(){return p},get positionX(){return _},get positionY(){return v},get positionZ(){return m},get upX(){return g},get upY(){return y},get upZ(){return S}}},Gl=t=>"context"in t,oa=t=>Gl(t[0]),gs=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},O_=(t,e,[n,r],s)=>{gs(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},b_=(t,[e,n,r],s)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,r]])):gs(i,[n,r],o=>o[0]===n,s)},ki=t=>"inputs"in t,Yl=(t,e,n,r)=>{if(ki(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},uw=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},DI=(t,e,n)=>Du(t,r=>r[0]===e&&r[1]===n),cw=(t,e)=>{if(!ra(t).delete(e))throw new Error("Missing the expected event listener.")},hw=(t,e,n)=>{const r=_n(t,e),s=Du(r,i=>i[0]===n);return r.size===0&&t.delete(e),s},Kl=(t,e,n,r)=>{ki(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Ne=t=>_n(Lf,t),Wo=t=>_n(Vf,t),cs=t=>Jh.has(t),nl=t=>!hi.has(t),R_=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const l=t.createBufferSource();l.buffer=i,l.loop=!0,l.connect(r).connect(t.destination),l.connect(s),l.disconnect(s),r.onaudioprocess=u=>{const h=u.inputBuffer.getChannelData(0);Array.prototype.some.call(h,f=>f===1)?n(!0):n(!1),l.stop(),r.onaudioprocess=null,l.disconnect(r),r.disconnect(t.destination)},l.start()}}),Pc=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,i===void 0?1:i+1)}n.forEach((r,s)=>e(s,r))},Ql=t=>"context"in t,OI=t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=Ql(r)?n(r,s,i):n(r,s),l=e.get(r);return l===void 0?e.set(r,[{input:i,output:s}]):l.every(u=>u.input!==i||u.output!==s)&&l.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,l]of e){const u=l.filter(h=>h.output!==r);u.length===0?e.delete(o):e.set(o,u)}else if(e.has(r))if(s===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const l=o.filter(u=>u.output!==s&&(u.input!==i||i===void 0));l.length===0?e.delete(r):e.set(r,l)}}for(const[o,l]of e)l.forEach(u=>{Ql(o)?t.connect(o,u.output,u.input):t.connect(o,u.output)})})(t.disconnect)},bI=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=ia(e),{outputs:o}=wt(t),l=ra(t),u=h=>{const f=Ne(t),a=Wo(e);if(h){const c=hw(i,t,n);O_(s,t,c,!1),!r&&!cs(t)&&f.connect(a,n)}else{const c=DI(s,t,n);b_(i,c,!1),!r&&!cs(t)&&f.disconnect(a,n)}};return gs(o,[e,n],h=>h[0]===e&&h[1]===n,!0)?(l.add(u),Un(t)?O_(s,t,[n,u],!0):b_(i,[t,n,u],!0),!0):!1},RI=(t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=wt(e),o=uw(s[r],t,n);return o===null?[iw(i,t,n,r)[2],!1]:[o[2],!0]},PI=(t,e,n)=>{const{activeInputs:r,passiveInputs:s}=ia(e),i=uw(r,t,n);return i===null?[hw(s,t,n)[1],!1]:[i[2],!0]},zf=(t,e,n,r,s)=>{const[i,o]=RI(t,n,r,s);if(i!==null&&(cw(t,i),o&&!e&&!cs(t)&&Kl(Ne(t),Ne(n),r,s)),Un(n)){const{activeInputs:l}=wt(n);nd(n,l)}},Wf=(t,e,n,r)=>{const[s,i]=PI(t,n,r);s!==null&&(cw(t,s),i&&!e&&!cs(t)&&Ne(t).disconnect(Wo(n),r))},MI=(t,e)=>{const n=wt(t),r=[];for(const s of n.outputs)oa(s)?zf(t,e,...s):Wf(t,e,...s),r.push(s[0]);return n.outputs.clear(),r},FI=(t,e,n)=>{const r=wt(t),s=[];for(const i of r.outputs)i[1]===n&&(oa(i)?zf(t,e,...i):Wf(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s},LI=(t,e,n,r,s)=>{const i=wt(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(s===void 0||o[2]===s)).map(o=>(oa(o)?zf(t,e,...o):Wf(t,e,...o),i.outputs.delete(o),o[0]))},VI=(t,e,n,r,s,i,o,l,u,h,f,a,c,d,p,_)=>class extends h{constructor(m,g,y,S){super(y),this._context=m,this._nativeAudioNode=y;const w=f(m);a(w)&&n(R_,()=>R_(w,_))!==!0&&OI(y),Lf.set(this,y),rw.set(this,new Set),m.state!=="closed"&&g&&di(this),t(this,S,y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(m){this._nativeAudioNode.channelCount=m}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(m){this._nativeAudioNode.channelCountMode=m}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(m){this._nativeAudioNode.channelInterpretation=m}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(m,g=0,y=0){if(g<0||g>=this._nativeAudioNode.numberOfOutputs)throw s();const S=f(this._context),w=p(S);if(c(m)||d(m))throw i();if(Gl(m)){const T=Ne(m);try{const D=Yl(this._nativeAudioNode,T,g,y),x=nl(this);(w||x)&&this._nativeAudioNode.disconnect(...D),this.context.state!=="closed"&&!x&&nl(m)&&di(m)}catch(D){throw D.code===12?i():D}if(e(this,m,g,y,w)){const D=u([this],m);Pc(D,r(w))}return m}const E=Wo(m);if(E.name==="playbackRate"&&E.maxValue===1024)throw o();try{this._nativeAudioNode.connect(E,g),(w||nl(this))&&this._nativeAudioNode.disconnect(E,g)}catch(T){throw T.code===12?i():T}if(bI(this,m,g,w)){const T=u([this],m);Pc(T,r(w))}}disconnect(m,g,y){let S;const w=f(this._context),E=p(w);if(m===void 0)S=MI(this,E);else if(typeof m=="number"){if(m<0||m>=this.numberOfOutputs)throw s();S=FI(this,E,m)}else{if(g!==void 0&&(g<0||g>=this.numberOfOutputs)||Gl(m)&&y!==void 0&&(y<0||y>=m.numberOfInputs))throw s();if(S=LI(this,E,m,g,y),S.length===0)throw i()}for(const A of S){const T=u([this],A);Pc(T,l)}}},BI=(t,e,n,r,s,i,o,l,u,h,f,a,c)=>(d,p,_,v=null,m=null)=>{const g=_.value,y=new Kx(g),S=p?r(y):null,w={get defaultValue(){return g},get maxValue(){return v===null?_.maxValue:v},get minValue(){return m===null?_.minValue:m},get value(){return _.value},set value(E){_.value=E,w.setValueAtTime(E,d.context.currentTime)},cancelAndHoldAtTime(E){if(typeof _.cancelAndHoldAtTime=="function")S===null&&y.flush(d.context.currentTime),y.add(s(E)),_.cancelAndHoldAtTime(E);else{const A=Array.from(y).pop();S===null&&y.flush(d.context.currentTime),y.add(s(E));const T=Array.from(y).pop();_.cancelScheduledValues(E),A!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?_.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?_.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?_.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&_.setValueCurveAtTime(T.values,T.startTime,T.duration))}return w},cancelScheduledValues(E){return S===null&&y.flush(d.context.currentTime),y.add(i(E)),_.cancelScheduledValues(E),w},exponentialRampToValueAtTime(E,A){if(E===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;const T=d.context.currentTime;return S===null&&y.flush(T),Array.from(y).length===0&&(y.add(h(g,T)),_.setValueAtTime(g,T)),y.add(o(E,A)),_.exponentialRampToValueAtTime(E,A),w},linearRampToValueAtTime(E,A){const T=d.context.currentTime;return S===null&&y.flush(T),Array.from(y).length===0&&(y.add(h(g,T)),_.setValueAtTime(g,T)),y.add(l(E,A)),_.linearRampToValueAtTime(E,A),w},setTargetAtTime(E,A,T){return S===null&&y.flush(d.context.currentTime),y.add(u(E,A,T)),_.setTargetAtTime(E,A,T),w},setValueAtTime(E,A){return S===null&&y.flush(d.context.currentTime),y.add(h(E,A)),_.setValueAtTime(E,A),w},setValueCurveAtTime(E,A,T){const N=E instanceof Float32Array?E:new Float32Array(E);if(a!==null&&a.name==="webkitAudioContext"){const D=A+T,x=d.context.sampleRate,I=Math.ceil(A*x),R=Math.floor(D*x),b=R-I,L=new Float32Array(b);for(let P=0;P<b;P+=1){const O=(N.length-1)/T*((I+P)/x-A),M=Math.floor(O),z=Math.ceil(O);L[P]=M===z?N[M]:(1-(O-M))*N[M]+(1-(z-O))*N[z]}S===null&&y.flush(d.context.currentTime),y.add(f(L,A,T)),_.setValueCurveAtTime(L,A,T);const W=R/x;W<D&&c(w,L[L.length-1],W),c(w,N[N.length-1],D)}else S===null&&y.flush(d.context.currentTime),y.add(f(N,A,T)),_.setValueCurveAtTime(N,A,T);return w}};return n.set(w,_),e.set(w,d),t(w,S),w},zI=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if(n.type==="setTarget"){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if(n.type==="setValue"){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}else throw new Error("Can't apply an unknown automation.")}});class dw{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const WI={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},jI=(t,e,n,r,s,i,o,l,u,h,f,a,c,d)=>class extends e{constructor(_,v,m){var g;const y=l(_),S=u(y),w=f({...WI,...m});c(w);const E=ed.get(y),A=E==null?void 0:E.get(v),T=S||y.state!=="closed"?y:(g=o(y))!==null&&g!==void 0?g:y,N=s(T,S?null:_.baseLatency,h,v,A,w),D=S?r(v,w,A):null;super(_,!0,N,D);const x=[];N.parameters.forEach((R,b)=>{const L=n(this,S,R);x.push([b,L])}),this._nativeAudioWorkletNode=N,this._onprocessorerror=null,this._parameters=new dw(x),S&&t(y,this);const{activeInputs:I}=i(this);a(N,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(_){const v=typeof _=="function"?d(this,_):null;this._nativeAudioWorkletNode.onprocessorerror=v;const m=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=m!==null&&m===v?_:m}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Xl(t,e,n,r,s){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(e[n].byteLength===0)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const fw=(t,e,n,r,s)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,s):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],s)},Zl=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i=typeof e=="number"?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},UI=(t,e)=>{const n=_n(td,t),r=Ne(e);return _n(n,r)},qI=async(t,e,n,r,s,i,o)=>{const l=e===null?Math.ceil(t.context.length/128)*128:e.length,u=r.channelCount*r.numberOfInputs,h=s.reduce((v,m)=>v+m,0),f=h===0?null:n.createBuffer(h,l,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const a=wt(t),c=await UI(n,t),d=Zl(r.numberOfInputs,r.channelCount),p=Zl(r.numberOfOutputs,s),_=Array.from(t.parameters.keys()).reduce((v,m)=>({...v,[m]:new Float32Array(128)}),{});for(let v=0;v<l;v+=128){if(r.numberOfInputs>0&&e!==null)for(let m=0;m<r.numberOfInputs;m+=1)for(let g=0;g<r.channelCount;g+=1)Xl(e,d[m],g,g,v);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:m},g)=>{Xl(e,_,m,u+g,v)});for(let m=0;m<r.numberOfInputs;m+=1)for(let g=0;g<s[m];g+=1)p[m][g].byteLength===0&&(p[m][g]=new Float32Array(128));try{const m=d.map((y,S)=>a.activeInputs[S].size===0?[]:y),g=o(v/n.sampleRate,n.sampleRate,()=>c.process(m,p,_));if(f!==null)for(let y=0,S=0;y<r.numberOfOutputs;y+=1){for(let w=0;w<s[y];w+=1)fw(f,p[y],w,S+w,v);S+=s[y]}if(!g)break}catch(m){t.dispatchEvent(new ErrorEvent("processorerror",{colno:m.colno,filename:m.filename,lineno:m.lineno,message:m.message}));break}}return f},HI=(t,e,n,r,s,i,o,l,u,h,f,a,c,d,p,_)=>(v,m,g)=>{const y=new WeakMap;let S=null;const w=async(E,A)=>{let T=f(E),N=null;const D=_t(T,A),x=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(a===null){const I=x.reduce((W,P)=>W+P,0),R=s(A,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),b=[];for(let W=0;W<E.numberOfOutputs;W+=1)b.push(r(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[W]}));const L=o(A,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1});L.connect=e.bind(null,b),L.disconnect=u.bind(null,b),N=[R,b,L]}else D||(T=new a(A,v));if(y.set(A,N===null?T:N[2]),N!==null){if(S===null){if(g===void 0)throw new Error("Missing the processor constructor.");if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const P=E.channelCount*E.numberOfInputs,O=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length,M=P+O;S=qI(E,M===0?null:await(async()=>{const H=new c(M,Math.ceil(E.context.length/128)*128,A.sampleRate),K=[],ve=[];for(let le=0;le<m.numberOfInputs;le+=1)K.push(o(H,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),ve.push(s(H,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const ye=await Promise.all(Array.from(E.parameters.values()).map(async le=>{const De=i(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:le.value});return await d(H,le,De.offset),De})),J=r(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,P+O)});for(let le=0;le<m.numberOfInputs;le+=1){K[le].connect(ve[le]);for(let De=0;De<m.channelCount;De+=1)ve[le].connect(J,De,le*m.channelCount+De)}for(const[le,De]of ye.entries())De.connect(J,0,P+le),De.start(0);return J.connect(H.destination),await Promise.all(K.map(le=>p(E,H,le))),_(H)})(),A,m,x,g,h)}const I=await S,R=n(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[b,L,W]=N;I!==null&&(R.buffer=I,R.start(0)),R.connect(b);for(let P=0,O=0;P<E.numberOfOutputs;P+=1){const M=L[P];for(let z=0;z<x[P];z+=1)b.connect(M,O+z,z);O+=x[P]}return W}if(D)for(const[I,R]of E.parameters.entries())await t(A,R,T.parameters.get(I));else for(const[I,R]of E.parameters.entries())await d(A,R,T.parameters.get(I));return await p(E,A,T),T};return{render(E,A){l(A,E);const T=y.get(A);return T!==void 0?Promise.resolve(T):w(E,A)}}},$I=(t,e,n,r,s,i,o,l,u,h,f,a,c,d,p,_,v,m,g,y)=>class extends p{constructor(w,E){super(w,E),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(A,T)=>t(this,A,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(w,E,A){return new n({length:E,numberOfChannels:w,sampleRate:A})}createBufferSource(){return new r(this)}createChannelMerger(w=6){return new i(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new o(this,{numberOfOutputs:w})}createConstantSource(){return new l(this)}createConvolver(){return new u(this)}createDelay(w=1){return new f(this,{maxDelayTime:w})}createDynamicsCompressor(){return new a(this)}createGain(){return new c(this)}createIIRFilter(w,E){return new d(this,{feedback:E,feedforward:w})}createOscillator(){return new _(this)}createPanner(){return new v(this)}createPeriodicWave(w,E,A={disableNormalization:!1}){return new m(this,{...A,imag:E,real:w})}createStereoPanner(){return new g(this)}createWaveShaper(){return new y(this)}decodeAudioData(w,E,A){return h(this._nativeContext,w).then(T=>(typeof E=="function"&&E(T),T),T=>{throw typeof A=="function"&&A(T),T})}},GI={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},YI=(t,e,n,r,s,i,o,l)=>class extends t{constructor(h,f){const a=i(h),c={...GI,...f},d=s(a,c),p=o(a),_=p?n():null;super(h,!1,d,_),this._Q=e(this,p,d.Q,vt,kt),this._detune=e(this,p,d.detune,1200*Math.log2(vt),-1200*Math.log2(vt)),this._frequency=e(this,p,d.frequency,h.sampleRate/2,0),this._gain=e(this,p,d.gain,40*Math.log10(vt),kt),this._nativeBiquadFilterNode=d,l(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(h){this._nativeBiquadFilterNode.type=h}getFrequencyResponse(h,f,a){try{this._nativeBiquadFilterNode.getFrequencyResponse(h,f,a)}catch(c){throw c.code===11?r():c}if(h.length!==f.length||f.length!==a.length)throw r()}},KI=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(l,u)=>{let h=n(l);const f=_t(h,u);if(!f){const a={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(u,a)}return i.set(u,h),f?(await t(u,l.Q,h.Q),await t(u,l.detune,h.detune),await t(u,l.frequency,h.frequency),await t(u,l.gain,h.gain)):(await r(u,l.Q,h.Q),await r(u,l.detune,h.detune),await r(u,l.frequency,h.frequency),await r(u,l.gain,h.gain)),await s(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):o(l,u)}}},QI=(t,e)=>(n,r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t.get(n);if(i!==void 0)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(l=>(t.delete(n),e.set(n,l),l))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},XI={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},ZI=(t,e,n,r,s)=>class extends t{constructor(o,l){const u=r(o),h={...XI,...l},f=n(u,h),a=s(u)?e():null;super(o,!1,f,a)}},JI=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let l=e(i);if(!_t(l,o)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,numberOfInputs:l.numberOfInputs};l=t(o,h)}return r.set(o,l),await n(i,o,l),l};return{render(i,o){const l=r.get(o);return l!==void 0?Promise.resolve(l):s(i,o)}}},eN={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},tN=(t,e,n,r,s,i)=>class extends t{constructor(l,u){const h=r(l),f=i({...eN,...u}),a=n(h,f),c=s(h)?e():null;super(l,!1,a,c)}},nN=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let l=e(i);if(!_t(l,o)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,numberOfOutputs:l.numberOfOutputs};l=t(o,h)}return r.set(o,l),await n(i,o,l),l};return{render(i,o){const l=r.get(o);return l!==void 0?Promise.resolve(l):s(i,o)}}},rN=t=>(e,n,r)=>t(n,e,r),sN=t=>(e,n,r=0,s=0)=>{const i=e[r];if(i===void 0)throw t();return Ql(n)?i.connect(n,0,s):i.connect(n,0)},iN=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},oN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},aN=(t,e,n,r,s,i,o)=>class extends t{constructor(u,h){const f=s(u),a={...oN,...h},c=r(f,a),d=i(f),p=d?n():null;super(u,!1,c,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=c,this._offset=e(this,d,c.offset,vt,kt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(u){const h=typeof u=="function"?o(this,u):null;this._nativeConstantSourceNode.onended=h;const f=this._nativeConstantSourceNode.onended;this._onended=f!==null&&f===h?u:f}start(u=0){if(this._nativeConstantSourceNode.start(u),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=u),this.context.state!=="closed"){di(this);const h=()=>{this._nativeConstantSourceNode.removeEventListener("ended",h),Un(this)&&sa(this)};this._nativeConstantSourceNode.addEventListener("ended",h)}}stop(u=0){this._nativeConstantSourceNode.stop(u),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=u)}},lN=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,l=null;const u=async(h,f)=>{let a=n(h);const c=_t(a,f);if(!c){const d={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,offset:a.offset.value};a=e(f,d),o!==null&&a.start(o),l!==null&&a.stop(l)}return i.set(f,a),c?await t(f,h.offset,a.offset):await r(f,h.offset,a.offset),await s(h,f,a),a};return{set start(h){o=h},set stop(h){l=h},render(h,f){const a=i.get(f);return a!==void 0?Promise.resolve(a):u(h,f)}}},uN=t=>e=>(t[0]=e,t[0]),cN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},hN=(t,e,n,r,s,i)=>class extends t{constructor(l,u){const h=r(l),f={...cN,...u},a=n(h,f),d=s(h)?e():null;super(l,!1,a,d),this._isBufferNullified=!1,this._nativeConvolverNode=a,f.buffer!==null&&i(this,f.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(l){if(this._nativeConvolverNode.buffer=l,l===null&&this._nativeConvolverNode.buffer!==null){const u=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=u.createBuffer(1,1,u.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(l){this._nativeConvolverNode.normalize=l}},dN=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let l=e(i);if(!_t(l,o)){const h={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,disableNormalization:!l.normalize};l=t(o,h)}return r.set(o,l),ki(l)?await n(i,o,l.inputs[0]):await n(i,o,l),l};return{render(i,o){const l=r.get(o);return l!==void 0?Promise.resolve(l):s(i,o)}}},fN=(t,e)=>(n,r,s)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw i.name==="SyntaxError"?t():i}},pN=()=>new DOMException("","DataCloneError"),P_=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},mN=(t,e,n,r,s,i,o,l,u,h,f)=>(a,c)=>{const d=o(a)?a:i(a);if(s.has(c)){const p=n();return Promise.reject(p)}try{s.add(c)}catch{}return e(u,()=>u(d))?d.decodeAudioData(c).then(p=>(P_(c).catch(()=>{}),e(l,()=>l(p))||f(p),t.add(p),p)):new Promise((p,_)=>{const v=async()=>{try{await P_(c)}catch{}},m=g=>{_(g),v()};try{d.decodeAudioData(c,g=>{typeof g.copyFromChannel!="function"&&(h(g),Bf(g)),t.add(g),v().then(()=>p(g))},g=>{m(g===null?r():g)})}catch(g){m(g)}})},_N=(t,e,n,r,s,i,o,l)=>(u,h)=>{const f=e.get(u);if(f===void 0)throw new Error("Missing the expected cycle count.");const a=i(u.context),c=l(a);if(f===h){if(e.delete(u),!c&&o(u)){const d=r(u),{outputs:p}=n(u);for(const _ of p)if(oa(_)){const v=r(_[0]);t(d,v,_[1],_[2])}else{const v=s(_[0]);d.connect(v,_[1])}}}else e.set(u,f-h)},gN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},vN=(t,e,n,r,s,i,o)=>class extends t{constructor(u,h){const f=s(u),a={...gN,...h},c=r(f,a),d=i(f),p=d?n(a.maxDelayTime):null;super(u,!1,c,p),this._delayTime=e(this,d,c.delayTime),o(this,a.maxDelayTime)}get delayTime(){return this._delayTime}},yN=(t,e,n,r,s)=>i=>{const o=new WeakMap,l=async(u,h)=>{let f=n(u);const a=_t(f,h);if(!a){const c={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,delayTime:f.delayTime.value,maxDelayTime:i};f=e(h,c)}return o.set(h,f),a?await t(h,u.delayTime,f.delayTime):await r(h,u.delayTime,f.delayTime),await s(u,h,f),f};return{render(u,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},wN=t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r),CN=t=>(e,n)=>{t(e).delete(n)},SN=t=>"delayTime"in t,TN=(t,e,n)=>function r(s,i){const o=Gl(i)?i:n(t,i);if(SN(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:l}=e(o);return Array.from(l).map(u=>r([...s,o],u[0])).reduce((u,h)=>u.concat(h),[])},La=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},EN=t=>(e,n=void 0,r=void 0,s=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?La(t,e,n).disconnect():Ql(n)?r===void 0?e.forEach(i=>i.disconnect(n)):s===void 0?La(t,e,r).disconnect(n,0):La(t,e,r).disconnect(n,0,s):r===void 0?e.forEach(i=>i.disconnect(n)):La(t,e,r).disconnect(n,0),AN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},kN=(t,e,n,r,s,i,o,l)=>class extends t{constructor(h,f){const a=i(h),c={...AN,...f},d=r(a,c),p=o(a),_=p?n():null;super(h,!1,d,_),this._attack=e(this,p,d.attack),this._knee=e(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=e(this,p,d.ratio),this._release=e(this,p,d.release),this._threshold=e(this,p,d.threshold),l(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(h){const f=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=h,h>2)throw this._nativeDynamicsCompressorNode.channelCount=f,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(h){const f=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=h,h==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=f,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},xN=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(l,u)=>{let h=n(l);const f=_t(h,u);if(!f){const a={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(u,a)}return i.set(u,h),f?(await t(u,l.attack,h.attack),await t(u,l.knee,h.knee),await t(u,l.ratio,h.ratio),await t(u,l.release,h.release),await t(u,l.threshold,h.threshold)):(await r(u,l.attack,h.attack),await r(u,l.knee,h.knee),await r(u,l.ratio,h.ratio),await r(u,l.release,h.release),await r(u,l.threshold,h.threshold)),await s(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):o(l,u)}}},IN=()=>new DOMException("","EncodingError"),NN=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const s=t.document.head;if(s===null)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),l=URL.createObjectURL(o),u=t.onerror,h=()=>{t.onerror=u,URL.revokeObjectURL(l)};t.onerror=(f,a,c,d,p)=>{if(a===l||a===t.location.href&&c===1&&d===1)return h(),r(p),!1;if(u!==null)return u(f,a,c,d,p)},i.onerror=()=>{h(),r(new SyntaxError)},i.onload=()=>{h(),n()},i.src=l,i.type="module",s.appendChild(i)}}),DN=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=t(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,s)}},ON=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},bN=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},RN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},PN=(t,e,n,r,s,i)=>class extends t{constructor(l,u){const h=s(l),f={...RN,...u},a=r(h,f),c=i(h),d=c?n():null;super(l,!1,a,d),this._gain=e(this,c,a.gain,vt,kt)}get gain(){return this._gain}},MN=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(l,u)=>{let h=n(l);const f=_t(h,u);if(!f){const a={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(u,a)}return i.set(u,h),f?await t(u,l.gain,h.gain):await r(u,l.gain,h.gain),await s(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):o(l,u)}}},FN=(t,e)=>n=>e(t,n),LN=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},VN=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},BN=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},zN=t=>e=>t.get(e),st=()=>new DOMException("","InvalidStateError"),WN=t=>e=>{const n=t.get(e);if(n===void 0)throw st();return n},jN=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},UN=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Ou=()=>new DOMException("","InvalidAccessError"),qN=t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw Ou();return e.call(t,n,r,s)})(t.getFrequencyResponse)},HN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$N=(t,e,n,r,s,i)=>class extends t{constructor(l,u){const h=r(l),f=s(h),a={...HN,...u},c=e(h,f?null:l.baseLatency,a),d=f?n(a.feedback,a.feedforward):null;super(l,!1,c,d),qN(c),this._nativeIIRFilterNode=c,i(this,1)}getFrequencyResponse(l,u,h){return this._nativeIIRFilterNode.getFrequencyResponse(l,u,h)}},pw=(t,e,n,r,s,i,o,l,u,h,f)=>{const a=h.length;let c=l;for(let d=0;d<a;d+=1){let p=n[0]*h[d];for(let _=1;_<s;_+=1){const v=c-_&u-1;p+=n[_]*i[v],p-=t[_]*o[v]}for(let _=s;_<r;_+=1)p+=n[_]*i[c-_&u-1];for(let _=s;_<e;_+=1)p-=t[_]*o[c-_&u-1];i[c]=h[d],o[c]=p,c=c+1&u-1,f[d]=p}return c},GN=(t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,l=i.length,u=Math.min(o,l);if(s[0]!==1){for(let p=0;p<o;p+=1)i[p]/=s[0];for(let p=1;p<l;p+=1)s[p]/=s[0]}const h=32,f=new Float32Array(h),a=new Float32Array(h),c=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let p=0;p<d;p+=1){const _=t.getChannelData(p),v=c.getChannelData(p);f.fill(0),a.fill(0),pw(s,o,i,l,u,f,a,0,h,_,v)}return c},YN=(t,e,n,r,s)=>(i,o)=>{const l=new WeakMap;let u=null;const h=async(f,a)=>{let c=null,d=e(f);const p=_t(d,a);if(a.createIIRFilter===void 0?c=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=a.createIIRFilter(o,i)),l.set(a,c===null?d:c),c!==null){if(u===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const v=new n(f.context.destination.channelCount,f.context.length,a.sampleRate);u=(async()=>{await r(f,v,v.destination);const m=await s(v);return GN(m,a,i,o)})()}const _=await u;return c.buffer=_,c.start(0),c}return await r(f,a,d),d};return{render(f,a){const c=l.get(a);return c!==void 0?Promise.resolve(c):h(f,a)}}},KN=(t,e,n,r,s,i)=>o=>(l,u)=>{const h=t.get(l);if(h===void 0){if(!o&&i(l)){const f=r(l),{outputs:a}=n(l);for(const c of a)if(oa(c)){const d=r(c[0]);e(f,d,c[1],c[2])}else{const d=s(c[0]);f.disconnect(d,c[1])}}t.set(l,u)}else t.set(l,h+u)},QN=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},XN=(t,e)=>n=>t.has(n)||e(n),ZN=(t,e)=>n=>t.has(n)||e(n),JN=(t,e)=>n=>{const r=t.get(n);return e(r)||e(n)},eD=t=>e=>t!==null&&e instanceof t,tD=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,nD=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,rD=(t,e)=>n=>t(n)||e(n),sD=t=>e=>t!==null&&e instanceof t,iD=t=>t!==null&&t.isSecureContext,oD=(t,e,n,r)=>class extends t{constructor(i,o){const l=n(i),u=e(l,o);if(r(l))throw TypeError();super(i,!0,u,null),this._nativeMediaElementAudioSourceNode=u}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},aD={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},lD=(t,e,n,r)=>class extends t{constructor(i,o){const l=n(i);if(r(l))throw new TypeError;const u={...aD,...o},h=e(l,u);super(i,!1,h,null),this._nativeMediaStreamAudioDestinationNode=h}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},uD=(t,e,n,r)=>class extends t{constructor(i,o){const l=n(i),u=e(l,o);if(r(l))throw new TypeError;super(i,!0,u,null),this._nativeMediaStreamAudioSourceNode=u}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},cD=(t,e,n)=>class extends t{constructor(s,i){const o=n(s),l=e(o,i);super(s,!0,l,null)}},hD=(t,e,n,r,s,i)=>class extends n{constructor(l,u){super(l),this._nativeContext=l,Nu.set(this,l),r(l)&&s.set(l,new Set),this._destination=new t(this,u),this._listener=e(this,l),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(l){const u=typeof l=="function"?i(this,l):null;this._nativeContext.onstatechange=u;const h=this._nativeContext.onstatechange;this._onstatechange=h!==null&&h===u?l:h}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},jo=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},dD=(t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(l,u=0,h=0)=>{const f=i.size===0;if(e(l))return o.call(n,l,u,h),t(i,[l,u,h],a=>a[0]===l&&a[1]===u&&a[2]===h,!0),f&&r(),l;o.call(n,l,u),t(i,[l,u],a=>a[0]===l&&a[1]===u,!0),f&&r()})(n.connect),n.disconnect=(o=>(l,u,h)=>{const f=i.size>0;if(l===void 0)o.apply(n),i.clear();else if(typeof l=="number"){o.call(n,l);for(const c of i)c[1]===l&&i.delete(c)}else{e(l)?o.call(n,l,u,h):o.call(n,l,u);for(const c of i)c[0]===l&&(u===void 0||c[1]===u)&&(h===void 0||c[2]===h)&&i.delete(c)}const a=i.size===0;f&&a&&s()})(n.disconnect),n},Oe=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Ze=(t,e)=>{Oe(t,e,"channelCount"),Oe(t,e,"channelCountMode"),Oe(t,e,"channelInterpretation")},M_=t=>typeof t.getFloatTimeDomainData=="function",fD=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=(n[s]-128)*.0078125;return e}},pD=(t,e)=>(n,r)=>{const s=n.createAnalyser();if(Ze(s,r),!(r.maxDecibels>r.minDecibels))throw e();return Oe(s,r,"fftSize"),Oe(s,r,"maxDecibels"),Oe(s,r,"minDecibels"),Oe(s,r,"smoothingTimeConstant"),t(M_,()=>M_(s))||fD(s),s},mD=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Ve=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},_D=t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw st();e.call(t,r,s,i),n=!0}})(t.start)},jf=t=>{t.start=(e=>(n=0,r=0,s)=>{if(typeof s=="number"&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Uf=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},gD=(t,e,n,r,s,i,o,l,u,h,f)=>(a,c)=>{const d=a.createBufferSource();return Ze(d,c),Ve(d,c,"playbackRate"),Oe(d,c,"buffer"),Oe(d,c,"loop"),Oe(d,c,"loopEnd"),Oe(d,c,"loopStart"),e(n,()=>n(a))||_D(d),e(r,()=>r(a))||u(d),e(s,()=>s(a))||h(d,a),e(i,()=>i(a))||jf(d),e(o,()=>o(a))||f(d,a),e(l,()=>l(a))||Uf(d),t(a,d),d},vD=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,yD=(t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",l=>()=>l.call(o),l=>u=>{l.call(o,u);try{i.channelCount=u}catch(h){if(u>i.maxChannelCount)throw h}}),e(o,"channelCountMode",l=>()=>l.call(o),l=>u=>{l.call(o,u),i.channelCountMode=u}),e(o,"channelInterpretation",l=>()=>l.call(o),l=>u=>{l.call(o,u),i.channelInterpretation=u}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},wD=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,CD=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},SD=(t,e,n,r,s)=>(i,o,l,u,h,f)=>{if(l!==null)try{const a=new l(i,u,f),c=new Map;let d=null;if(Object.defineProperties(a,{channelCount:{get:()=>f.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&a.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&a.addEventListener("processorerror",d)}}}),a.addEventListener=(p=>(..._)=>{if(_[0]==="processorerror"){const v=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(v!==null){const m=c.get(_[1]);m!==void 0?_[1]=m:(_[1]=g=>{g.type==="error"?(Object.defineProperties(g,{type:{value:"processorerror"}}),v(g)):v(new ErrorEvent(_[0],{...g}))},c.set(v,_[1]))}}return p.call(a,"error",_[1],_[2]),p.call(a,..._)})(a.addEventListener),a.removeEventListener=(p=>(..._)=>{if(_[0]==="processorerror"){const v=c.get(_[1]);v!==void 0&&(c.delete(_[1]),_[1]=v)}return p.call(a,"error",_[1],_[2]),p.call(a,_[0],_[1],_[2])})(a.removeEventListener),f.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return a.connect(p).connect(i.destination),s(a,()=>p.disconnect(),()=>p.connect(i.destination))}return a}catch(a){throw a.code===11?r():a}if(h===void 0)throw r();return CD(f),e(i,o,h,f)},mw=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),TD=t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}),ED=async(t,e)=>{const n=await TD(e);return new t(n)},AD=(t,e,n,r)=>{let s=td.get(t);s===void 0&&(s=new WeakMap,td.set(t,s));const i=ED(n,r);return s.set(e,i),i},kD=(t,e,n,r,s,i,o,l,u,h,f,a,c)=>(d,p,_,v)=>{if(v.numberOfInputs===0&&v.numberOfOutputs===0)throw u();const m=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(m.some(C=>C<1))throw u();if(m.length!==v.numberOfOutputs)throw e();if(v.channelCountMode!=="explicit")throw u();const g=v.channelCount*v.numberOfInputs,y=m.reduce((C,k)=>C+k,0),S=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length;if(g+S>6||y>6)throw u();const w=new MessageChannel,E=[],A=[];for(let C=0;C<v.numberOfInputs;C+=1)E.push(o(d,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),A.push(s(d,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const T=[];if(_.parameterDescriptors!==void 0)for(const{defaultValue:C,maxValue:k,minValue:j,name:F}of _.parameterDescriptors){const V=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:v.parameterData[F]!==void 0?v.parameterData[F]:C===void 0?0:C});Object.defineProperties(V.offset,{defaultValue:{get:()=>C===void 0?0:C},maxValue:{get:()=>k===void 0?vt:k},minValue:{get:()=>j===void 0?kt:j}}),T.push(V)}const N=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+S)}),D=mw(p,d.sampleRate),x=l(d,D,g+S,Math.max(1,y)),I=s(d,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),R=[];for(let C=0;C<v.numberOfOutputs;C+=1)R.push(r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[C]}));for(let C=0;C<v.numberOfInputs;C+=1){E[C].connect(A[C]);for(let k=0;k<v.channelCount;k+=1)A[C].connect(N,k,C*v.channelCount+k)}const b=new dw(_.parameterDescriptors===void 0?[]:_.parameterDescriptors.map(({name:C},k)=>{const j=T[k];return j.connect(N,0,g+k),j.start(0),[C,j.offset]}));N.connect(x);let L=v.channelInterpretation,W=null;const P=v.numberOfOutputs===0?[x]:R,O={get bufferSize(){return D},get channelCount(){return v.channelCount},set channelCount(C){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(C){throw n()},get channelInterpretation(){return L},set channelInterpretation(C){for(const k of E)k.channelInterpretation=C;L=C},get context(){return x.context},get inputs(){return E},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return W},set onprocessorerror(C){typeof W=="function"&&O.removeEventListener("processorerror",W),W=typeof C=="function"?C:null,typeof W=="function"&&O.addEventListener("processorerror",W)},get parameters(){return b},get port(){return w.port2},addEventListener(...C){return x.addEventListener(C[0],C[1],C[2])},connect:t.bind(null,P),disconnect:h.bind(null,P),dispatchEvent(...C){return x.dispatchEvent(C[0])},removeEventListener(...C){return x.removeEventListener(C[0],C[1],C[2])}},M=new Map;w.port1.addEventListener=(C=>(...k)=>{if(k[0]==="message"){const j=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(j!==null){const F=M.get(k[1]);F!==void 0?k[1]=F:(k[1]=V=>{f(d.currentTime,d.sampleRate,()=>j(V))},M.set(j,k[1]))}}return C.call(w.port1,k[0],k[1],k[2])})(w.port1.addEventListener),w.port1.removeEventListener=(C=>(...k)=>{if(k[0]==="message"){const j=M.get(k[1]);j!==void 0&&(M.delete(k[1]),k[1]=j)}return C.call(w.port1,k[0],k[1],k[2])})(w.port1.removeEventListener);let z=null;Object.defineProperty(w.port1,"onmessage",{get:()=>z,set:C=>{typeof z=="function"&&w.port1.removeEventListener("message",z),z=typeof C=="function"?C:null,typeof z=="function"&&(w.port1.addEventListener("message",z),w.port1.start())}}),_.prototype.port=w.port1;let H=null;AD(d,O,_,v).then(C=>H=C);const ve=Zl(v.numberOfInputs,v.channelCount),ye=Zl(v.numberOfOutputs,m),J=_.parameterDescriptors===void 0?[]:_.parameterDescriptors.reduce((C,{name:k})=>({...C,[k]:new Float32Array(128)}),{});let le=!0;const De=()=>{v.numberOfOutputs>0&&x.disconnect(I);for(let C=0,k=0;C<v.numberOfOutputs;C+=1){const j=R[C];for(let F=0;F<m[C];F+=1)I.disconnect(j,k+F,F);k+=m[C]}},Q=new Map;x.onaudioprocess=({inputBuffer:C,outputBuffer:k})=>{if(H!==null){const j=a(O);for(let F=0;F<D;F+=128){for(let V=0;V<v.numberOfInputs;V+=1)for(let B=0;B<v.channelCount;B+=1)Xl(C,ve[V],B,B,F);_.parameterDescriptors!==void 0&&_.parameterDescriptors.forEach(({name:V},B)=>{Xl(C,J,V,g+B,F)});for(let V=0;V<v.numberOfInputs;V+=1)for(let B=0;B<m[V];B+=1)ye[V][B].byteLength===0&&(ye[V][B]=new Float32Array(128));try{const V=ve.map(($,Z)=>{if(j[Z].size>0)return Q.set(Z,D/128),$;const de=Q.get(Z);return de===void 0?[]:($.every(We=>We.every(qt=>qt===0))&&(de===1?Q.delete(Z):Q.set(Z,de-1)),$)});le=f(d.currentTime+F/d.sampleRate,d.sampleRate,()=>H.process(V,ye,J));for(let $=0,Z=0;$<v.numberOfOutputs;$+=1){for(let we=0;we<m[$];we+=1)fw(k,ye[$],we,Z+we,F);Z+=m[$]}}catch(V){le=!1,O.dispatchEvent(new ErrorEvent("processorerror",{colno:V.colno,filename:V.filename,lineno:V.lineno,message:V.message}))}if(!le){for(let V=0;V<v.numberOfInputs;V+=1){E[V].disconnect(A[V]);for(let B=0;B<v.channelCount;B+=1)A[F].disconnect(N,B,V*v.channelCount+B)}if(_.parameterDescriptors!==void 0){const V=_.parameterDescriptors.length;for(let B=0;B<V;B+=1){const $=T[B];$.disconnect(N,0,g+B),$.stop()}}N.disconnect(x),x.onaudioprocess=null,On?De():sr();break}}}};let On=!1;const bn=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),rr=()=>x.connect(bn).connect(d.destination),sr=()=>{x.disconnect(bn),bn.disconnect()},ee=()=>{if(le){sr(),v.numberOfOutputs>0&&x.connect(I);for(let C=0,k=0;C<v.numberOfOutputs;C+=1){const j=R[C];for(let F=0;F<m[C];F+=1)I.connect(j,k+F,F);k+=m[C]}}On=!0},Ku=()=>{le&&(rr(),De()),On=!1};return rr(),c(O,ee,Ku)},_w=(t,e)=>{const n=t.createBiquadFilter();return Ze(n,e),Ve(n,e,"Q"),Ve(n,e,"detune"),Ve(n,e,"frequency"),Ve(n,e,"gain"),Oe(n,e,"type"),n},xD=(t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,s),Ze(s,r),s},ID=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw st()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw st()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw st()}})},aa=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Ze(n,e),ID(n),n},ND=(t,e,n,r,s)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const l=i.createConstantSource();return Ze(l,o),Ve(l,o,"offset"),e(r,()=>r(i))||jf(l),e(s,()=>s(i))||Uf(l),t(i,l),l},xi=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),DD=(t,e,n,r)=>(s,{offset:i,...o})=>{const l=s.createBuffer(1,2,44100),u=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=n(s,{...o,gain:i}),f=l.getChannelData(0);f[0]=1,f[1]=1,u.buffer=l,u.loop=!0;const a={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(p){h.channelCount=p},get channelCountMode(){return h.channelCountMode},set channelCountMode(p){h.channelCountMode=p},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(p){h.channelInterpretation=p},get context(){return h.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get offset(){return h.gain},get onended(){return u.onended},set onended(p){u.onended=p},addEventListener(...p){return u.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return u.dispatchEvent(p[0])},removeEventListener(...p){return u.removeEventListener(p[0],p[1],p[2])},start(p=0){u.start.call(u,p)},stop(p=0){u.stop.call(u,p)}},c=()=>u.connect(h),d=()=>u.disconnect(h);return t(s,u),r(xi(a,h),c,d)},OD=(t,e)=>(n,r)=>{const s=n.createConvolver();if(Ze(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Oe(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),r.channelCountMode==="max"))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if(o==="max")throw t();return i.call(s,o)}),s},gw=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Ze(n,e),Ve(n,e,"delayTime"),n},bD=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Ze(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Ve(r,n,"attack"),Ve(r,n,"knee"),Ve(r,n,"ratio"),Ve(r,n,"release"),Ve(r,n,"threshold"),r},Mt=(t,e)=>{const n=t.createGain();return Ze(n,e),Ve(n,e,"gain"),n},RD=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return Ze(s,r),s};function PD(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function MD(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function F_(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=MD(n,e),n[0]+=t[r];return n}const FD=(t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:l,channelInterpretation:u,feedback:h,feedforward:f})=>{const a=mw(i,s.sampleRate),c=h instanceof Float64Array?h:new Float64Array(h),d=f instanceof Float64Array?f:new Float64Array(f),p=c.length,_=d.length,v=Math.min(p,_);if(p===0||p>20)throw r();if(c[0]===0)throw e();if(_===0||_>20)throw r();if(d[0]===0)throw e();if(c[0]!==1){for(let T=0;T<_;T+=1)d[T]/=c[0];for(let T=1;T<p;T+=1)c[T]/=c[0]}const m=n(s,a,o,o);m.channelCount=o,m.channelCountMode=l,m.channelInterpretation=u;const g=32,y=[],S=[],w=[];for(let T=0;T<o;T+=1){y.push(0);const N=new Float32Array(g),D=new Float32Array(g);N.fill(0),D.fill(0),S.push(N),w.push(D)}m.onaudioprocess=T=>{const N=T.inputBuffer,D=T.outputBuffer,x=N.numberOfChannels;for(let I=0;I<x;I+=1){const R=N.getChannelData(I),b=D.getChannelData(I);y[I]=pw(c,p,d,_,v,S[I],w[I],y[I],g,R,b)}};const E=s.sampleRate/2;return xi({get bufferSize(){return a},get channelCount(){return m.channelCount},set channelCount(T){m.channelCount=T},get channelCountMode(){return m.channelCountMode},set channelCountMode(T){m.channelCountMode=T},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(T){m.channelInterpretation=T},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener(...T){return m.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return m.dispatchEvent(T[0])},getFrequencyResponse(T,N,D){if(T.length!==N.length||N.length!==D.length)throw t();const x=T.length;for(let I=0;I<x;I+=1){const R=-Math.PI*(T[I]/E),b=[Math.cos(R),Math.sin(R)],L=F_(d,b),W=F_(c,b),P=PD(L,W);N[I]=Math.sqrt(P[0]*P[0]+P[1]*P[1]),D[I]=Math.atan2(P[1],P[0])}},removeEventListener(...T){return m.removeEventListener(T[0],T[1],T[2])}},m)},LD=(t,e)=>t.createMediaElementSource(e.mediaElement),VD=(t,e)=>{const n=t.createMediaStreamDestination();return Ze(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},BD=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s},zD=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},WD=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,jD=(t,e,n,r,s,i)=>(o,l)=>{const u=o.createOscillator();return Ze(u,l),Ve(u,l,"detune"),Ve(u,l,"frequency"),l.periodicWave!==void 0?u.setPeriodicWave(l.periodicWave):Oe(u,l,"type"),e(n,()=>n(o))||jf(u),e(r,()=>r(o))||i(u,o),e(s,()=>s(o))||Uf(u),t(o,u),u},UD=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Ze(r,n),Ve(r,n,"orientationX"),Ve(r,n,"orientationY"),Ve(r,n,"orientationZ"),Ve(r,n,"positionX"),Ve(r,n,"positionY"),Ve(r,n,"positionZ"),Oe(r,n,"coneInnerAngle"),Oe(r,n,"coneOuterAngle"),Oe(r,n,"coneOuterGain"),Oe(r,n,"distanceModel"),Oe(r,n,"maxDistance"),Oe(r,n,"panningModel"),Oe(r,n,"refDistance"),Oe(r,n,"rolloffFactor"),r)},qD=(t,e,n,r,s,i,o,l,u,h)=>(f,{coneInnerAngle:a,coneOuterAngle:c,coneOuterGain:d,distanceModel:p,maxDistance:_,orientationX:v,orientationY:m,orientationZ:g,panningModel:y,positionX:S,positionY:w,positionZ:E,refDistance:A,rolloffFactor:T,...N})=>{const D=f.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw o();Ze(D,N);const x={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(f,{...x,channelInterpretation:"speakers",numberOfInputs:6}),R=r(f,{...N,gain:1}),b=r(f,{...x,gain:1}),L=r(f,{...x,gain:0}),W=r(f,{...x,gain:0}),P=r(f,{...x,gain:0}),O=r(f,{...x,gain:0}),M=r(f,{...x,gain:0}),z=s(f,256,6,1),H=i(f,{...x,curve:new Float32Array([1,1]),oversample:"none"});let K=[v,m,g],ve=[S,w,E];const ye=new Float32Array(1);z.onaudioprocess=({inputBuffer:Q})=>{const On=[u(Q,ye,0),u(Q,ye,1),u(Q,ye,2)];On.some((rr,sr)=>rr!==K[sr])&&(D.setOrientation(...On),K=On);const bn=[u(Q,ye,3),u(Q,ye,4),u(Q,ye,5)];bn.some((rr,sr)=>rr!==ve[sr])&&(D.setPosition(...bn),ve=bn)},Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(Q){if(Q>2)throw o();R.channelCount=Q,D.channelCount=Q},get channelCountMode(){return D.channelCountMode},set channelCountMode(Q){if(Q==="max")throw o();R.channelCountMode=Q,D.channelCountMode=Q},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(Q){R.channelInterpretation=Q,D.channelInterpretation=Q},get coneInnerAngle(){return D.coneInnerAngle},set coneInnerAngle(Q){D.coneInnerAngle=Q},get coneOuterAngle(){return D.coneOuterAngle},set coneOuterAngle(Q){D.coneOuterAngle=Q},get coneOuterGain(){return D.coneOuterGain},set coneOuterGain(Q){if(Q<0||Q>1)throw e();D.coneOuterGain=Q},get context(){return D.context},get distanceModel(){return D.distanceModel},set distanceModel(Q){D.distanceModel=Q},get inputs(){return[R]},get maxDistance(){return D.maxDistance},set maxDistance(Q){if(Q<0)throw new RangeError;D.maxDistance=Q},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get orientationX(){return b.gain},get orientationY(){return L.gain},get orientationZ(){return W.gain},get panningModel(){return D.panningModel},set panningModel(Q){D.panningModel=Q},get positionX(){return P.gain},get positionY(){return O.gain},get positionZ(){return M.gain},get refDistance(){return D.refDistance},set refDistance(Q){if(Q<0)throw new RangeError;D.refDistance=Q},get rolloffFactor(){return D.rolloffFactor},set rolloffFactor(Q){if(Q<0)throw new RangeError;D.rolloffFactor=Q},addEventListener(...Q){return R.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return R.dispatchEvent(Q[0])},removeEventListener(...Q){return R.removeEventListener(Q[0],Q[1],Q[2])}};a!==J.coneInnerAngle&&(J.coneInnerAngle=a),c!==J.coneOuterAngle&&(J.coneOuterAngle=c),d!==J.coneOuterGain&&(J.coneOuterGain=d),p!==J.distanceModel&&(J.distanceModel=p),_!==J.maxDistance&&(J.maxDistance=_),v!==J.orientationX.value&&(J.orientationX.value=v),m!==J.orientationY.value&&(J.orientationY.value=m),g!==J.orientationZ.value&&(J.orientationZ.value=g),y!==J.panningModel&&(J.panningModel=y),S!==J.positionX.value&&(J.positionX.value=S),w!==J.positionY.value&&(J.positionY.value=w),E!==J.positionZ.value&&(J.positionZ.value=E),A!==J.refDistance&&(J.refDistance=A),T!==J.rolloffFactor&&(J.rolloffFactor=T),(K[0]!==1||K[1]!==0||K[2]!==0)&&D.setOrientation(...K),(ve[0]!==0||ve[1]!==0||ve[2]!==0)&&D.setPosition(...ve);const le=()=>{R.connect(D),t(R,H,0,0),H.connect(b).connect(I,0,0),H.connect(L).connect(I,0,1),H.connect(W).connect(I,0,2),H.connect(P).connect(I,0,3),H.connect(O).connect(I,0,4),H.connect(M).connect(I,0,5),I.connect(z).connect(f.destination)},De=()=>{R.disconnect(D),l(R,H,0,0),H.disconnect(b),b.disconnect(I),H.disconnect(L),L.disconnect(I),H.disconnect(W),W.disconnect(I),H.disconnect(P),P.disconnect(I),H.disconnect(O),O.disconnect(I),H.disconnect(M),M.disconnect(I),I.disconnect(z),z.disconnect(f.destination)};return h(xi(J,D),le,De)},HD=t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),l=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return l},la=(t,e,n,r)=>t.createScriptProcessor(e,n,r),$D=(t,e)=>(n,r)=>{const s=r.channelCountMode;if(s==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const i=n.createStereoPanner();return Ze(i,r),Ve(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i},GD=(t,e,n,r,s,i)=>{const l=new Float32Array([1,1]),u=Math.PI/2,h={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},f={...h,oversample:"none"},a=(p,_,v,m)=>{const g=new Float32Array(16385),y=new Float32Array(16385);for(let N=0;N<16385;N+=1){const D=N/16384*u;g[N]=Math.cos(D),y[N]=Math.sin(D)}const S=n(p,{...h,gain:0}),w=r(p,{...f,curve:g}),E=r(p,{...f,curve:l}),A=n(p,{...h,gain:0}),T=r(p,{...f,curve:y});return{connectGraph(){_.connect(S),_.connect(E.inputs===void 0?E:E.inputs[0]),_.connect(A),E.connect(v),v.connect(w.inputs===void 0?w:w.inputs[0]),v.connect(T.inputs===void 0?T:T.inputs[0]),w.connect(S.gain),T.connect(A.gain),S.connect(m,0,0),A.connect(m,0,1)},disconnectGraph(){_.disconnect(S),_.disconnect(E.inputs===void 0?E:E.inputs[0]),_.disconnect(A),E.disconnect(v),v.disconnect(w.inputs===void 0?w:w.inputs[0]),v.disconnect(T.inputs===void 0?T:T.inputs[0]),w.disconnect(S.gain),T.disconnect(A.gain),S.disconnect(m,0,0),A.disconnect(m,0,1)}}},c=(p,_,v,m)=>{const g=new Float32Array(16385),y=new Float32Array(16385),S=new Float32Array(16385),w=new Float32Array(16385),E=Math.floor(16385/2);for(let P=0;P<16385;P+=1)if(P>E){const O=(P-E)/(16384-E)*u;g[P]=Math.cos(O),y[P]=Math.sin(O),S[P]=0,w[P]=1}else{const O=P/(16384-E)*u;g[P]=1,y[P]=0,S[P]=Math.cos(O),w[P]=Math.sin(O)}const A=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=n(p,{...h,gain:0}),N=r(p,{...f,curve:g}),D=n(p,{...h,gain:0}),x=r(p,{...f,curve:y}),I=r(p,{...f,curve:l}),R=n(p,{...h,gain:0}),b=r(p,{...f,curve:S}),L=n(p,{...h,gain:0}),W=r(p,{...f,curve:w});return{connectGraph(){_.connect(A),_.connect(I.inputs===void 0?I:I.inputs[0]),A.connect(T,0),A.connect(D,0),A.connect(R,1),A.connect(L,1),I.connect(v),v.connect(N.inputs===void 0?N:N.inputs[0]),v.connect(x.inputs===void 0?x:x.inputs[0]),v.connect(b.inputs===void 0?b:b.inputs[0]),v.connect(W.inputs===void 0?W:W.inputs[0]),N.connect(T.gain),x.connect(D.gain),b.connect(R.gain),W.connect(L.gain),T.connect(m,0,0),R.connect(m,0,0),D.connect(m,0,1),L.connect(m,0,1)},disconnectGraph(){_.disconnect(A),_.disconnect(I.inputs===void 0?I:I.inputs[0]),A.disconnect(T,0),A.disconnect(D,0),A.disconnect(R,1),A.disconnect(L,1),I.disconnect(v),v.disconnect(N.inputs===void 0?N:N.inputs[0]),v.disconnect(x.inputs===void 0?x:x.inputs[0]),v.disconnect(b.inputs===void 0?b:b.inputs[0]),v.disconnect(W.inputs===void 0?W:W.inputs[0]),N.disconnect(T.gain),x.disconnect(D.gain),b.disconnect(R.gain),W.disconnect(L.gain),T.disconnect(m,0,0),R.disconnect(m,0,0),D.disconnect(m,0,1),L.disconnect(m,0,1)}}},d=(p,_,v,m,g)=>{if(_===1)return a(p,v,m,g);if(_===2)return c(p,v,m,g);throw s()};return(p,{channelCount:_,channelCountMode:v,pan:m,...g})=>{if(v==="max")throw s();const y=t(p,{...g,channelCount:1,channelCountMode:v,numberOfInputs:2}),S=n(p,{...g,channelCount:_,channelCountMode:v,gain:1}),w=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:m});let{connectGraph:E,disconnectGraph:A}=d(p,_,S,w,y);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(I){S.channelCount!==I&&(N&&A(),{connectGraph:E,disconnectGraph:A}=d(p,I,S,w,y),N&&E()),S.channelCount=I},get channelCountMode(){return S.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw s();S.channelCountMode=I},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(I){S.channelInterpretation=I},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get pan(){return w.gain},addEventListener(...I){return S.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return S.dispatchEvent(I[0])},removeEventListener(...I){return S.removeEventListener(I[0],I[1],I[2])}};let N=!1;const D=()=>{E(),N=!0},x=()=>{A(),N=!1};return i(xi(T,y),D,x)}},YD=(t,e,n,r,s,i,o)=>(l,u)=>{const h=l.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&l.createGain().gain.automationRate===void 0)return n(l,u);Ze(h,u);const f=u.curve===null||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(f!==null&&f.length<2)throw e();Oe(h,{curve:f},"curve"),Oe(h,u,"oversample");let a=null,c=!1;return o(h,"curve",_=>()=>_.call(h),_=>v=>(_.call(h,v),c&&(r(v)&&a===null?a=t(l,h):!r(v)&&a!==null&&(a(),a=null)),v)),s(h,()=>{c=!0,r(h.curve)&&(a=t(l,h))},()=>{c=!1,a!==null&&(a(),a=null)})},KD=(t,e,n,r,s)=>(i,{curve:o,oversample:l,...u})=>{const h=i.createWaveShaper(),f=i.createWaveShaper();Ze(h,u),Ze(f,u);const a=n(i,{...u,gain:1}),c=n(i,{...u,gain:-1}),d=n(i,{...u,gain:1}),p=n(i,{...u,gain:-1});let _=null,v=!1,m=null;const g={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(w){a.channelCount=w,c.channelCount=w,h.channelCount=w,d.channelCount=w,f.channelCount=w,p.channelCount=w},get channelCountMode(){return h.channelCountMode},set channelCountMode(w){a.channelCountMode=w,c.channelCountMode=w,h.channelCountMode=w,d.channelCountMode=w,f.channelCountMode=w,p.channelCountMode=w},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(w){a.channelInterpretation=w,c.channelInterpretation=w,h.channelInterpretation=w,d.channelInterpretation=w,f.channelInterpretation=w,p.channelInterpretation=w},get context(){return h.context},get curve(){return m},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)h.curve=w,f.curve=w;else{const E=w.length,A=new Float32Array(E+2-E%2),T=new Float32Array(E+2-E%2);A[0]=w[0],T[0]=-w[E-1];const N=Math.ceil((E+1)/2),D=(E+1)/2-1;for(let x=1;x<N;x+=1){const I=x/N*D,R=Math.floor(I),b=Math.ceil(I);A[x]=R===b?w[R]:(1-(I-R))*w[R]+(1-(b-I))*w[b],T[x]=R===b?-w[E-1-R]:-((1-(I-R))*w[E-1-R])-(1-(b-I))*w[E-1-b]}A[N]=E%2===1?w[N-1]:(w[N-2]+w[N-1])/2,h.curve=A,f.curve=T}m=w,v&&(r(m)&&_===null?_=t(i,a):_!==null&&(_(),_=null))},get inputs(){return[a]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get oversample(){return h.oversample},set oversample(w){h.oversample=w,f.oversample=w},addEventListener(...w){return a.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return a.dispatchEvent(w[0])},removeEventListener(...w){return a.removeEventListener(w[0],w[1],w[2])}};o!==null&&(g.curve=o instanceof Float32Array?o:new Float32Array(o)),l!==g.oversample&&(g.oversample=l);const y=()=>{a.connect(h).connect(d),a.connect(c).connect(f).connect(p).connect(d),v=!0,r(m)&&(_=t(i,a))},S=()=>{a.disconnect(h),h.disconnect(d),a.disconnect(c),c.disconnect(f),f.disconnect(p),p.disconnect(d),v=!1,_!==null&&(_(),_=null)};return s(xi(g,d),y,S)},Et=()=>new DOMException("","NotSupportedError"),QD={numberOfChannels:1},XD=(t,e,n,r,s)=>class extends t{constructor(o,l,u){let h;if(typeof o=="number"&&l!==void 0&&u!==void 0)h={length:l,numberOfChannels:o,sampleRate:u};else if(typeof o=="object")h=o;else throw new Error("The given parameters are not valid.");const{length:f,numberOfChannels:a,sampleRate:c}={...QD,...h},d=r(a,f,c);e(jo,()=>jo(d))||d.addEventListener("statechange",(()=>{let p=0;const _=v=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",_),v.stopImmediatePropagation(),this._waitForThePromiseToSettle(v)):p+=1)};return _})()),super(d,a),this._length=f,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,lw(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},ZD={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},JD=(t,e,n,r,s,i,o)=>class extends t{constructor(u,h){const f=s(u),a={...ZD,...h},c=n(f,a),d=i(f),p=d?r():null,_=u.sampleRate/2;super(u,!1,c,p),this._detune=e(this,d,c.detune,153600,-153600),this._frequency=e(this,d,c.frequency,_,-_),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&a.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=a.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(u){const h=typeof u=="function"?o(this,u):null;this._nativeOscillatorNode.onended=h;const f=this._nativeOscillatorNode.onended;this._onended=f!==null&&f===h?u:f}get type(){return this._nativeOscillatorNode.type}set type(u){this._nativeOscillatorNode.type=u,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(u){this._nativeOscillatorNode.setPeriodicWave(u),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=u)}start(u=0){if(this._nativeOscillatorNode.start(u),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=u),this.context.state!=="closed"){di(this);const h=()=>{this._nativeOscillatorNode.removeEventListener("ended",h),Un(this)&&sa(this)};this._nativeOscillatorNode.addEventListener("ended",h)}}stop(u=0){this._nativeOscillatorNode.stop(u),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=u)}},eO=(t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,l=null,u=null;const h=async(f,a)=>{let c=n(f);const d=_t(c,a);if(!d){const p={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,periodicWave:o===null?void 0:o,type:c.type};c=e(a,p),l!==null&&c.start(l),u!==null&&c.stop(u)}return i.set(a,c),d?(await t(a,f.detune,c.detune),await t(a,f.frequency,c.frequency)):(await r(a,f.detune,c.detune),await r(a,f.frequency,c.frequency)),await s(f,a,c),c};return{set periodicWave(f){o=f},set start(f){l=f},set stop(f){u=f},render(f,a){const c=i.get(a);return c!==void 0?Promise.resolve(c):h(f,a)}}},tO={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},nO=(t,e,n,r,s,i,o)=>class extends t{constructor(u,h){const f=s(u),a={...tO,...h},c=n(f,a),d=i(f),p=d?r():null;super(u,!1,c,p),this._nativePannerNode=c,this._orientationX=e(this,d,c.orientationX,vt,kt),this._orientationY=e(this,d,c.orientationY,vt,kt),this._orientationZ=e(this,d,c.orientationZ,vt,kt),this._positionX=e(this,d,c.positionX,vt,kt),this._positionY=e(this,d,c.positionY,vt,kt),this._positionZ=e(this,d,c.positionZ,vt,kt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(u){this._nativePannerNode.coneInnerAngle=u}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(u){this._nativePannerNode.coneOuterAngle=u}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(u){this._nativePannerNode.coneOuterGain=u}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(u){this._nativePannerNode.distanceModel=u}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(u){this._nativePannerNode.maxDistance=u}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(u){this._nativePannerNode.panningModel=u}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(u){this._nativePannerNode.refDistance=u}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(u){this._nativePannerNode.rolloffFactor=u}},rO=(t,e,n,r,s,i,o,l,u,h)=>()=>{const f=new WeakMap;let a=null;const c=async(d,p)=>{let _=null,v=i(d);const m={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},g={...m,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},y=_t(v,p);if("bufferSize"in v)_=r(p,{...m,gain:1});else if(!y){const S={...g,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=s(p,S)}if(f.set(p,_===null?v:_),_!==null){if(a===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new o(6,d.context.length,p.sampleRate),I=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(x.destination),a=(async()=>{const R=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(b,L)=>{const W=n(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:L===0?1:0});return await l(x,b,W.offset),W}));for(let b=0;b<6;b+=1)R[b].connect(I,0,b),R[b].start(0);return h(x)})()}const S=await a,w=r(p,{...m,gain:1});await u(d,p,w);const E=[];for(let x=0;x<S.numberOfChannels;x+=1)E.push(S.getChannelData(x));let A=[E[0][0],E[1][0],E[2][0]],T=[E[3][0],E[4][0],E[5][0]],N=r(p,{...m,gain:1}),D=s(p,{...g,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:T[0],positionY:T[1],positionZ:T[2]});w.connect(N).connect(D.inputs[0]),D.connect(_);for(let x=128;x<S.length;x+=128){const I=[E[0][x],E[1][x],E[2][x]],R=[E[3][x],E[4][x],E[5][x]];if(I.some((b,L)=>b!==A[L])||R.some((b,L)=>b!==T[L])){A=I,T=R;const b=x/p.sampleRate;N.gain.setValueAtTime(0,b),N=r(p,{...m,gain:0}),D=s(p,{...g,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),N.gain.setValueAtTime(1,b),w.connect(N).connect(D.inputs[0]),D.connect(_)}}return _}return y?(await t(p,d.orientationX,v.orientationX),await t(p,d.orientationY,v.orientationY),await t(p,d.orientationZ,v.orientationZ),await t(p,d.positionX,v.positionX),await t(p,d.positionY,v.positionY),await t(p,d.positionZ,v.positionZ)):(await l(p,d.orientationX,v.orientationX),await l(p,d.orientationY,v.orientationY),await l(p,d.orientationZ,v.orientationZ),await l(p,d.positionX,v.positionX),await l(p,d.positionY,v.positionY),await l(p,d.positionZ,v.positionZ)),ki(v)?await u(d,p,v.inputs[0]):await u(d,p,v),v};return{render(d,p){const _=f.get(p);return _!==void 0?Promise.resolve(_):c(d,p)}}},sO={disableNormalization:!1},iO=(t,e,n,r)=>class vw{constructor(i,o){const l=e(i),u=r({...sO,...o}),h=t(l,u);return n.add(h),h}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===vw.prototype||n.has(i)}},oO=(t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)),aO=(t,e,n)=>async(r,s,i)=>{const o=t(r);await Promise.all(o.activeInputs.map((l,u)=>Array.from(l).map(async([h,f])=>{const c=await e(h).render(h,s),d=r.context.destination;!n(h)&&(r!==d||!n(r))&&c.connect(i,f,u)})).reduce((l,u)=>[...l,...u],[]))},lO=(t,e,n)=>async(r,s,i)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([l,u])=>{const f=await t(l).render(l,s);n(l)||f.connect(i,u)}))},uO=(t,e,n,r)=>s=>t(jo,()=>jo(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=l=>{o.disconnect(),i(l.renderedBuffer)},o.connect(s.destination),s.startRendering()}),cO=t=>(e,n)=>{t.set(e,n)},hO=t=>(e,n)=>t.set(e,n),dO=(t,e,n,r,s,i,o,l)=>(u,h)=>n(u).render(u,h).then(()=>Promise.all(Array.from(r(h)).map(f=>n(f).render(f,h)))).then(()=>s(h)).then(f=>(typeof f.copyFromChannel!="function"?(o(f),Bf(f)):e(i,()=>i(f))||l(f),t.add(f),f)),fO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},pO=(t,e,n,r,s,i)=>class extends t{constructor(l,u){const h=s(l),f={...fO,...u},a=n(h,f),c=i(h),d=c?r():null;super(l,!1,a,d),this._pan=e(this,c,a.pan)}get pan(){return this._pan}},mO=(t,e,n,r,s)=>()=>{const i=new WeakMap,o=async(l,u)=>{let h=n(l);const f=_t(h,u);if(!f){const a={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(u,a)}return i.set(u,h),f?await t(u,l.pan,h.pan):await r(u,l.pan,h.pan),ki(h)?await s(l,u,h.inputs[0]):await s(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):o(l,u)}}},_O=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},gO=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{await r.audioWorklet.addModule(s);const l=new t(r,"a",{numberOfOutputs:0}),u=r.createOscillator();l.port.onmessage=()=>i=!0,l.onprocessorerror=()=>o=!0,u.connect(l),u.start(0),await r.startRendering(),await new Promise(h=>setTimeout(h))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o},vO=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(n.currentTime!==0)},n.startRendering()})},yO=()=>new DOMException("","UnknownError"),wO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},CO=(t,e,n,r,s,i,o)=>class extends t{constructor(u,h){const f=s(u),a={...wO,...h},c=n(f,a),p=i(f)?r():null;super(u,!0,c,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(u){if(u===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(u.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=u}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(u){this._nativeWaveShaperNode.oversample=u}},SO=(t,e,n)=>()=>{const r=new WeakMap,s=async(i,o)=>{let l=e(i);if(!_t(l,o)){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,curve:l.curve,oversample:l.oversample};l=t(o,h)}return r.set(o,l),ki(l)?await n(i,o,l.inputs[0]):await n(i,o,l),l};return{render(i,o){const l=r.get(o);return l!==void 0?Promise.resolve(l):s(i,o)}}},TO=()=>typeof window>"u"?null:window,EO=(t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),l=t(s);if(l>=n.numberOfChannels)throw e();const u=n.length,h=n.getChannelData(l),f=r.length;for(let a=o<0?-o:0;a+o<u&&a<f;a+=1)r[a]=h[a+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),l=t(s);if(l>=n.numberOfChannels)throw e();const u=n.length,h=n.getChannelData(l),f=r.length;for(let a=o<0?-o:0;a+o<u&&a<f;a+=1)h[a+o]=r[a]}},AO=t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),l=t(s);if(o<e.length)return n.call(e,r,l,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),l=t(s);if(o<e.length)return n.call(e,r,l,o)})(e.copyToChannel)},kO=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,i===null?r:i))},xO=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const l=r.numberOfInputs;for(let u=0;u<l;u+=1)s.connect(r,0,u)},()=>s.disconnect(r))},yw=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),ww=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},ua=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},IO=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),NO=t=>({...t,channelCount:t.numberOfOutputs}),DO=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Cw=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;Cw(t,e,n+1e-7)}},OO=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},bO=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},RO=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},qf=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Sw=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Hf=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},PO=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},MO=t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=i===null?r:Math.min(i.duration,r);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)},Tw=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),xi(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},Ii=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},FO=nI(gs),LO=lI(gs),VO=wN(Du),Ew=new WeakMap,BO=VN(Ew),gn=QI(new Map,new WeakMap),xn=TO(),Aw=pD(gn,In),$f=LN(wt),ut=aO(wt,$f,cs),zO=fI(Aw,Ne,ut),Ae=WN(Nu),er=WD(xn),_e=sD(er),kw=new WeakMap,xw=DN(Ii),ca=vD(xn),Gf=eD(ca),Yf=tD(xn),Iw=nD(xn),Uo=wD(xn),Ue=VI(rI(tw),aI(FO,LO,Yl,VO,Kl,wt,BO,ra,Ne,gs,Un,cs,nl),gn,KN(Jh,Kl,wt,Ne,Wo,Un),In,Ou,Et,_N(Yl,Jh,wt,Ne,Wo,Ae,Un,_e),TN(kw,wt,_n),xw,Ae,Gf,Yf,Iw,_e,Uo),WO=dI(Ue,zO,In,Aw,Ae,_e),Kf=new WeakSet,L_=mD(xn),Nw=uN(new Uint32Array(1)),Qf=EO(Nw,In),Xf=AO(Nw),Dw=mI(Kf,gn,Et,L_,er,_O(L_),Qf,Xf),bu=uI(Mt),Ow=lO($f,ia,cs),Nn=rN(Ow),Ni=gD(bu,gn,OO,bO,RO,qf,Sw,Hf,MO,kO(ua),Tw),Dn=oO(BN(ia),Ow),jO=vI(Nn,Ni,Ne,Dn,ut),vn=BI(sI(nw),kw,Vf,zI,Qx,Xx,Zx,Jx,eI,Qh,J0,ca,Cw),UO=gI(Ue,jO,vn,st,Ni,Ae,_e,Ii),qO=xI(Ue,II,In,st,yD(Mt,ua),Ae,_e,ut),HO=KI(Nn,_w,Ne,Dn,ut),vs=hO(Ew),$O=YI(Ue,vn,HO,Ou,_w,Ae,_e,vs),Br=dD(gs,Yf),GO=xO(st,Br),zr=xD(ca,GO),YO=JI(zr,Ne,ut),KO=ZI(Ue,YO,zr,Ae,_e),QO=nN(aa,Ne,ut),XO=tN(Ue,QO,aa,Ae,_e,NO),ZO=DD(bu,Ni,Mt,Br),Di=ND(bu,gn,ZO,qf,Hf),JO=lN(Nn,Di,Ne,Dn,ut),eb=aN(Ue,vn,JO,Di,Ae,_e,Ii),bw=OD(Et,ua),tb=dN(bw,Ne,ut),nb=hN(Ue,tb,bw,Ae,_e,vs),rb=yN(Nn,gw,Ne,Dn,ut),sb=vN(Ue,vn,rb,gw,Ae,_e,vs),Rw=bD(Et),ib=xN(Nn,Rw,Ne,Dn,ut),ob=kN(Ue,vn,ib,Rw,Et,Ae,_e,vs),ab=MN(Nn,Mt,Ne,Dn,ut),lb=PN(Ue,vn,ab,Mt,Ae,_e),ub=FD(Ou,st,la,Et),Ru=uO(gn,Mt,la,vO(Mt,er)),cb=YN(Ni,Ne,er,ut,Ru),hb=RD(ub),db=$N(Ue,hb,cb,Ae,_e,vs),fb=NI(vn,zr,Di,la,Et,yw,_e,ua),Pw=new WeakMap,pb=hD(qO,fb,xw,_e,Pw,Ii),Mw=jD(bu,gn,qf,Sw,Hf,Tw),mb=eO(Nn,Mw,Ne,Dn,ut),_b=JD(Ue,vn,Mw,mb,Ae,_e,Ii),Fw=iN(Ni),gb=KD(Fw,st,Mt,ww,Br),Pu=YD(Fw,st,gb,ww,Br,ca,ua),vb=qD(Yl,st,zr,Mt,la,Pu,Et,Kl,yw,Br),Lw=UD(vb),yb=rO(Nn,zr,Di,Mt,Lw,Ne,er,Dn,ut,Ru),wb=nO(Ue,vn,Lw,yb,Ae,_e,vs),Cb=HD(In),Sb=iO(Cb,Ae,new WeakSet,DO),Tb=GD(zr,aa,Mt,Pu,Et,Br),Vw=$D(Tb,Et),Eb=mO(Nn,Vw,Ne,Dn,ut),Ab=pO(Ue,vn,Vw,Eb,Ae,_e),kb=SO(Pu,Ne,ut),xb=CO(Ue,st,Pu,kb,Ae,_e,vs),Bw=iD(xn),Zf=ON(xn),zw=new WeakMap,Ib=jN(zw,er),Nb=Bw?oI(gn,Et,NN(xn),Zf,bN(tI),Ae,Ib,_e,Uo,new WeakMap,new WeakMap,gO(Uo,er),xn):void 0,Db=rD(Gf,_e),Ob=mN(Kf,gn,pN,IN,new WeakSet,Ae,Db,$l,jo,Qf,Xf),Ww=$I(Nb,WO,Dw,UO,$O,KO,XO,eb,nb,Ob,sb,ob,lb,db,pb,_b,wb,Sb,Ab,xb),bb=oD(Ue,LD,Ae,_e),Rb=lD(Ue,VD,Ae,_e),Pb=uD(Ue,BD,Ae,_e),Mb=zD(st,_e),Fb=cD(Ue,Mb,Ae),Lb=kI(Ww,st,Et,yO,bb,Rb,Pb,Fb,ca),Jf=UN(Pw),Vb=cI(Jf),jw=sN(In),Bb=CN(Jf),Uw=EN(In),qw=new WeakMap,zb=FN(qw,_n),Wb=kD(jw,In,st,zr,aa,Di,Mt,la,Et,Uw,Zf,zb,Br),jb=SD(st,Wb,Mt,Et,Br),Ub=HI(Nn,jw,Ni,zr,aa,Di,Mt,Bb,Uw,Zf,Ne,Uo,er,Dn,ut,Ru),qb=zN(zw),Hb=cO(qw),V_=Bw?jI(Vb,Ue,vn,Ub,jb,wt,qb,Ae,_e,Uo,IO,Hb,PO,Ii):void 0,$b=fN(Et,er),Gb=dO(Kf,gn,$f,Jf,Ru,$l,Qf,Xf),Yb=XD(Ww,gn,st,$b,Gb),Kb=QN(Nu,Gf),Qb=XN(Lf,Yf),Xb=ZN(Vf,Iw),Zb=JN(Nu,_e);function Qt(t){return t===void 0}function ce(t){return t!==void 0}function Jb(t){return typeof t=="function"}function hs(t){return typeof t=="number"}function es(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function eR(t){return typeof t=="boolean"}function pn(t){return Array.isArray(t)}function Qn(t){return typeof t=="string"}function Va(t){return Qn(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function ne(t,e){if(!t)throw new Error(e)}function Pr(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Hw(t){!t.isOffline&&t.state!=="running"&&ep('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let $w=!1,B_=!1;function z_(t){$w=t}function tR(t){Qt(t)&&$w&&!B_&&(B_=!0,ep("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Gw=console;function nR(...t){Gw.log(...t)}function ep(...t){Gw.warn(...t)}function rR(t){return new Lb(t)}function sR(t,e,n){return new Yb(t,e,n)}const Lt=typeof self=="object"?self:null,iR=Lt&&(Lt.hasOwnProperty("AudioContext")||Lt.hasOwnProperty("webkitAudioContext"));function oR(t,e,n){return ne(ce(V_),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(Lt==null?void 0:Lt.BaseAudioContext)?Lt==null?void 0:Lt.AudioWorkletNode:V_)(t,e,n)}function yn(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Ge(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(f){try{h(r.next(f))}catch(a){o(a)}}function u(f){try{h(r.throw(f))}catch(a){o(a)}}function h(f){f.done?i(f.value):s(f.value).then(l,u)}h((r=r.apply(t,e||[])).next())})}class aR{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ds(t){return Xb(t)}function Ir(t){return Qb(t)}function rl(t){return Zb(t)}function As(t){return Kb(t)}function lR(t){return t instanceof Dw}function uR(t,e){return t==="value"||ds(e)||Ir(e)||lR(e)}function Xs(t,...e){if(!e.length)return t;const n=e.shift();if(es(t)&&es(n))for(const r in n)uR(r,n[r])?t[r]=n[r]:es(n[r])?(t[r]||Object.assign(t,{[r]:{}}),Xs(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Xs(t,...e)}function cR(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}function te(t,e,n=[],r){const s={},i=Array.from(e);if(es(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(l=>Reflect.has(t,l))||(Xs(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),i.length===1&&es(i[0]))Xs(s,i[0]);else for(let o=0;o<n.length;o++)ce(i[o])&&(s[n[o]]=i[o]);return Xs(t,s)}function hR(t){return t.constructor.getDefaults()}function Zs(t,e){return Qt(t)?e:t}function W_(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class tr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Lt&&this.toString()===Lt.TONE_DEBUG_CLASS)&&nR(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}tr.version=Z0;const tp=1e-6;function fi(t,e){return t>e+tp}function sd(t,e){return fi(t,e)||sn(t,e)}function Jl(t,e){return t+tp<e}function sn(t,e){return Math.abs(t-e)<tp}function dR(t,e,n){return Math.max(Math.min(t,n),e)}class Xt extends tr{constructor(){super(),this.name="Timeline",this._timeline=[];const e=te(Xt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ne(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];ne(sd(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(sn(this._timeline[n].time,e)){for(let r=n;r>=0&&sn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&sd(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const l=this._timeline[o],u=this._timeline[o+1];if(sn(l[n],e)){for(let h=o;h<this._timeline.length;h++){const f=this._timeline[h];if(sn(f[n],e))o=h;else break}return o}else{if(Jl(l[n],e)&&fi(u[n],e))return o;fi(l[n],e)?i=o:r=o+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return s!==-1&&i!==-1?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):s===-1&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&sn(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&sn(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Yw=[];function Mu(t){Yw.push(t)}function fR(t){Yw.forEach(e=>e(t))}const Kw=[];function Fu(t){Kw.push(t)}function pR(t){Kw.forEach(e=>e(t))}class ha extends tr{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{Qt(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(Qt(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(Qt(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(ha.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class Qw extends ha{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class da extends Qw{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Xt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=te(da.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=rR({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new aR(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(fR(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ne(As(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ne(As(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ne(As(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ne(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ne(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ne(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ne(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return oR(this.rawContext,e,n)}addAudioWorkletModule(e){return Ge(this,void 0,void 0,function*(){ne(ce(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Ge(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return As(this._context)?this._context.resume():Promise.resolve()}close(){return Ge(this,void 0,void 0,function*(){As(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&pR(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}class mR extends Qw{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Ge(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function ze(t,e){pn(e)?e.forEach(n=>ze(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Xw(t,e){pn(e)?e.forEach(n=>Xw(t,n)):Object.defineProperty(t,e,{writable:!0})}const me=()=>{};class Ce extends tr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=me;const e=te(Ce.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Qn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:me,onload:me,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:un().sampleRate}set(e){return e instanceof Ce?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Ge(this,void 0,void 0,function*(){const n=Ce.load(e).then(r=>{this.set(r),this.onload(this)});Ce.downloads.push(n);try{yield n}finally{const r=Ce.downloads.indexOf(n);Ce.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=pn(e)&&e[0].length>0,r=n?e.length:1,s=n?e[0].length:e.length,i=un(),o=i.createBuffer(r,s,i.sampleRate),l=!n&&r===1?[e]:e;for(let u=0;u<r;u++)o.copyToChannel(l[u],u);return this._buffer=o,this}toMono(e){if(hs(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let s=0;s<r;s++){const i=this.toArray(s);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(s=>s/r),this.fromArray(n)}return this}toArray(e){if(hs(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){ne(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),s=Math.floor(n*this.sampleRate);ne(r<s,"The start time must be less than the end time");const i=s-r,o=un().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let l=0;l<this.numberOfChannels;l++)o.copyToChannel(this.getChannelData(l).subarray(r,s),l);return new Ce(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ce().fromArray(e)}static fromUrl(e){return Ge(this,void 0,void 0,function*(){return yield new Ce().load(e)})}static load(e){return Ge(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const u=n[1].split("|");let h=u[0];for(const f of u)if(Ce.supportsType(f)){h=f;break}e=e.replace(n[0],h)}const r=Ce.baseUrl===""||Ce.baseUrl.endsWith("/")?Ce.baseUrl:Ce.baseUrl+"/",s=document.createElement("a");s.href=r+e,s.pathname=(s.pathname+s.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(s.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield un().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return Ge(this,void 0,void 0,function*(){for(yield Promise.resolve();Ce.downloads.length;)yield Ce.downloads[0]})}}Ce.baseUrl="";Ce.downloads=[];class np extends da{constructor(){super({clockSource:"offline",context:rl(arguments[0])?arguments[0]:sR(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:rl(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=rl(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ge(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(){return Ge(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Ce(n)})}close(){return Promise.resolve()}}const Zw=new mR;let Xr=Zw;function un(){return Xr===Zw&&iR&&_R(new da),Xr}function _R(t,e=!1){e&&Xr.dispose(),As(t)?Xr=new da(t):rl(t)?Xr=new np(t):Xr=t}function gR(){return Xr.resume()}if(Lt&&!Lt.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Z0} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function vR(t){return Math.pow(10,t/20)}function yR(t){return 20*(Math.log(t)/Math.LN10)}function Jw(t){return Math.pow(2,t/12)}let Lu=440;function wR(){return Lu}function CR(t){Lu=t}function id(t){return Math.round(eC(t))}function eC(t){return 69+12*Math.log2(t/Lu)}function SR(t){return Lu*Math.pow(2,(t-69)/12)}class rp extends tr{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&e!=="0"&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof rp&&this.fromType(this._val),Qt(this._val))return this._noArg();if(Qn(this._val)&&Qt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(es(this._val)){let e=0;for(const n in this._val)if(ce(this._val[n])){const r=this._val[n],s=new this.constructor(this.context,n).valueOf()*r;e+=s}return e}if(ce(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Qn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class cn extends rp{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new cn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf(),l=Math.round(s/r)*r-s;return s+l*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new cn(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new cn(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return id(this.toFrequency())}_now(){return this.context.now()}}class Yt extends cn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return wR()}static set A4(e){CR(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Yt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=TR[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?s:Yt.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&e!=="0"&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(s*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new Yt(this.context,this.valueOf()*Jw(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return id(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Yt.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),ER[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return SR(e)}static ftom(e){return id(e)}}const TR={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},ER=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class co extends cn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Rt extends tr{constructor(){super();const e=te(Rt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:un()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return tR(e),new cn(this.context,e).toSeconds()}toFrequency(e){return new Yt(this.context,e).toFrequency()}toTicks(e){return new co(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{Qt(e[r])&&delete n[r]}),n}get(){const e=hR(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];ce(r)&&ce(r.value)&&ce(r.setValueAtTime)?e[n]=r.value:r instanceof Rt?e[n]=r._getPartialProperties(e[n]):pn(r)||hs(r)||Qn(r)||eR(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&ce(this[n])&&(this[n]&&ce(this[n].value)&&ce(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Rt?this[n].set(e[n]):this[n]=e[n])}),this}}class sp extends Xt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return Pr(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let s=r;s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class Re extends Rt{constructor(){const e=te(Re.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ne(ce(e.param)&&(ds(e.param)||e.param instanceof Re),"param must be an AudioParam");!ds(e.param);)e.param=e.param._param;this._swappable=ce(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Xt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ce(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Rt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ce(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ce(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return ce(this.maxValue)&&ce(this.minValue)&&Pr(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?vR(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?yR(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return ne(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(s===null)i=this._initialValue;else if(s.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const o=this._events.getBefore(s.time);let l;o===null?l=this._initialValue:l=o.value,s.type==="setTargetAtTime"&&(i=this._exponentialApproach(s.time,l,s.value,s.constant,n))}else if(r===null)i=s.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let o=s.value;if(s.type==="setTargetAtTime"){const l=this._events.getBefore(s.time);l===null?o=this._initialValue:o=l.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(s.time,o,r.time,r.value,n):i=this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return ne(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=sn(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return ne(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);ne(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),ne(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let l=1;l<e.length;l++){const u=this._fromType(e[l])*s;this.linearRampToValueAtTime(this._toType(u),n+l*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return ne(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));ne(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&sn(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let l=n;l<i;l+=o)e.linearRampToValueAtTime(this.getValueAtTime(l),l)}return this._events.forEachAfter(this.context.currentTime,s=>{s.type==="cancelScheduledValues"?e.cancelScheduledValues(s.time):s.type==="setTargetAtTime"?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){ne(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(s-n)*((i-e)/(r-e))}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class oe extends Rt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ce(this.input)?ds(this.input)||this.input instanceof Re?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ce(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ce(e)&&(e instanceof oe||Ir(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ne(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Oi(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ep("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return AR(this,e,n,r),this}chain(...e){return od(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),ce(this.input)&&(this.input instanceof oe?this.input.dispose():Ir(this.input)&&this.input.disconnect()),ce(this.output)&&(this.output instanceof oe?this.output.dispose():Ir(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function od(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof oe?n.connect(r):Ir(n)&&Oi(n,r),r),e)}function Oi(t,e,n=0,r=0){for(ne(ce(t),"Cannot connect from undefined node"),ne(ce(e),"Cannot connect to undefined node"),(e instanceof oe||Ir(e))&&ne(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ne(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof oe||e instanceof Re;)ce(e.input)&&(e=e.input);for(;t instanceof oe;)ce(t.output)&&(t=t.output);ds(e)?t.connect(e,n):t.connect(e,n,r)}function AR(t,e,n=0,r=0){if(ce(e))for(;e instanceof oe;)e=e.input;for(;!Ir(t);)ce(t.output)&&(t=t.output);ds(e)?t.disconnect(e,n):Ir(e)?t.disconnect(e,n,r):t.disconnect()}class pt extends oe{constructor(){const e=te(pt.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Re({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ze(this,"gain")}static getDefaults(){return Object.assign(oe.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class pi extends oe{constructor(e){super(e),this.onended=me,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new pt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(oe.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:me})}_startGain(e,n=1){ne(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ne(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==me&&(this.onended(this),this.onended=me,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ne(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=me,this}}class ip extends pi{constructor(){const e=te(ip.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Oi(this._source,this._gainNode),this.offset=new Re({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(pi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class it extends oe{constructor(){const e=te(it.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new ip({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(oe.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return op(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function op(t,e,n,r){(e instanceof Re||ds(e)||e instanceof it&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof it&&(e.overridden=!0)),Oi(t,e,n,r)}class ap extends Re{constructor(){const e=te(ap.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Xt(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Re.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let l=0;l<=o;l++){const u=r*l+n,h=this._exponentialApproach(i.time,i.value,s,r,u);this.linearRampToValueAtTime(this._toType(h),u)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max((n-s.time)*10,1)),o=(n-s.time)/i;for(let l=0;l<=i;l++){const u=o*l+s.time,h=this._exponentialInterpolate(s.time,s.value,n,r,u);this.linearRampToValueAtTime(this._toType(h),u)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Qt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),l=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),u=(-s+l)/o,h=(-s-l)/o;return(u>0?u:h)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class lp extends it{constructor(){const e=te(lp.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new ap({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(it.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class up extends Rt{constructor(){const e=te(up.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new sp,this._tickOffset=new Xt,this._ticksAtTime=new Xt,this._secondsAtTime=new Xt,this.frequency=new lp({context:this.context,units:e.units,value:e.frequency}),ze(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Rt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),ce(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,l=s?s.ticks:0,u=null;return this._state.forEachBetween(o.time,n+this.sampleTime,h=>{let f=o.time;const a=this._tickOffset.get(h.time);a&&a.time>=o.time&&(l=a.ticks,f=a.time),o.state==="started"&&h.state!=="started"&&(l+=this.frequency.getTicksAtTime(h.time)-this.frequency.getTicksAtTime(f),h.time!==i.time&&(u={state:h.state,time:h.time,ticks:l})),o=h}),this._state.remove(i),u&&this._ticksAtTime.add(u),l}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,l=null;return this._state.forEachBetween(i.time,e+this.sampleTime,u=>{let h=i.time;const f=this._tickOffset.get(u.time);f&&f.time>=i.time&&(o=f.seconds,h=f.time),i.state==="started"&&u.state!=="started"&&(o+=u.time-h,u.time!==r.time&&(l={state:u.state,time:u.time,seconds:o})),i=u}),this._state.remove(r),l&&this._secondsAtTime.add(l),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&s.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&s.state==="started"){const o=Math.max(s.time,e),l=this.frequency.getTicksAtTime(o),u=this.frequency.getTicksAtTime(s.time),h=l-u;let f=Math.ceil(h)-h;f=sn(f,1)?0:f;let a=this.frequency.getTimeOfTick(l+f);for(;a<n;){try{r(a,Math.round(this.getTicksAtTime(a)))}catch(c){i=c;break}a+=this.frequency.getDurationOfTicks(1,a)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Vu extends Rt{constructor(){const e=te(Vu.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=me,this._lastUpdate=0,this._state=new sp("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new up({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ze(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Rt.getDefaults(),{callback:me,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Hw(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ha.mixin(Vu);class bi extends oe{constructor(){const e=te(bi.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new pt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ze(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class cp extends oe{constructor(){const e=te(cp.getDefaults(),arguments);super(e),this.name="Destination",this.input=new bi({context:this.context}),this.output=new pt({context:this.context}),this.volume=this.input.volume,od(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),od(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Mu(t=>{t.destination=new cp({context:t})});Fu(t=>{t.destination.dispose()});class kR extends oe{constructor(){super(...arguments),this.name="Listener",this.positionX=new Re({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Re({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Re({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Re({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Re({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Re({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Re({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Re({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Re({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(oe.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Mu(t=>{t.listener=new kR({context:t})});Fu(t=>{t.listener.dispose()});class hp extends tr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=te(hp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:me,onload:me,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ne(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=me,s=me){return Qn(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ce(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new Ce(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class zs extends co{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class xR extends Rt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Xt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Mu(t=>{t.draw=new xR({context:t})});Fu(t=>{t.draw.dispose()});class IR extends tr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ne(ce(e.time),"Events must have a time property"),ne(ce(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new NR(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,s=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),n!==null?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class NR{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class DR extends tr{constructor(e){super(),this.name="TimelineValue",this._timeline=new Xt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class mi extends oe{constructor(){super(te(mi.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return op(this,e,n,r),this}}class fa extends mi{constructor(){const e=te(fa.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,pn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Jb(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(it.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++){const o=s/(i-1)*2-1;r[s]=e(o,s)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));ne(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class dp extends mi{constructor(){const e=te(dp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new fa({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(mi.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Mr{constructor(e,n){this.id=Mr._eventId++,this._remainderTime=0;const r=Object.assign(Mr.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:me,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Mr._eventId=0;class fp extends Mr{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(fp.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Mr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Jl(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new zs(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Jl(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new zs(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);fi(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Bu extends Rt{constructor(){const e=te(Bu.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new DR(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Xt,this._repeatedEvents=new IR,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Vu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ze(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Rt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),s=Math.sin(r*Math.PI)*this._swingAmount;e+=new zs(this.context,this._swingTicks*2/3).toSeconds()*s}z_(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),z_(!1)}schedule(e,n){const r=new Mr(this,{callback:e,time:new co(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new fp(this,{callback:e,duration:new cn(this.context,s).toTicks(),interval:new cn(this.context,n).toTicks(),time:new co(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new Mr(this,{callback:e,once:!0,time:new co(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new zs(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return ce(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){pn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new cn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new cn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new zs(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new zs(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),s=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),i=n+s;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),s=e-r%e;return this._clock.nextTickTime(s,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if(e.units==="time"){const u=.015625/i,h=new pt(u),f=new dp(-1),a=new pt(u);s.chain(h,f,a),s=a,i=1/i,o=[h,f,a]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/i:n=0);const l=new pt(n);return s.connect(l),l.connect(e._param),o.push(l),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Xw(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ha.mixin(Bu);Mu(t=>{t.transport=new Bu({context:t})});Fu(t=>{t.transport.dispose()});class Wt extends oe{constructor(e){super(e),this.input=void 0,this._state=new sp("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=me,this._syncedStop=me,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new bi({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ze(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,onstop:me,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=Qt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),!this._synced&&this._state.getValueAtTime(s)==="started")ne(fi(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);else if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(Zs(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(l=>{this._start(l,n,r)},s);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Hw(this.context),this._start(s,n,r);return this}stop(e){let n=Qt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||ce(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(fi(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=me,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class zu extends pi{constructor(){const e=te(zu.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Oi(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Re({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ce(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(pi.getDefaults(),{url:new Ce,loop:!1,loopEnd:0,loopStart:0,onload:me,onerror:me,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){ne(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),this.loop?n=Zs(n,this.loopStart):n=Zs(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const l=this.toSeconds(this.loopEnd)||this.buffer.duration,u=this.toSeconds(this.loopStart),h=l-u;sd(o,l)&&(o=(o-u)%h+u),sn(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Jl(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ce(r)){let l=this.toSeconds(r);l=Math.max(l,0),this.stop(i+l)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ys(t,e){return Ge(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new np(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class pp extends pi{constructor(){const e=te(pp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Oi(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Re({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Re({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ze(this,["frequency","detune"])}static getDefaults(){return Object.assign(pi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class He extends Wt{constructor(){const e=te(He.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new it({context:this.context,units:"frequency",value:e.frequency}),ze(this,"frequency"),this.detune=new it({context:this.context,units:"cents",value:e.detune}),ze(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Wt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new pp({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return He._periodicWaveCache.find(n=>n.phase===this._phase&&cR(n.partials,this._partials));{const e=He._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(ce(r)){const{partials:s,wave:i}=r;this._wave=i,this._partials=s,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[s,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(s,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),He._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:s,type:this._type,wave:this._wave}),He._periodicWaveCache.length>100&&He._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Pr(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const s=new Float32Array(e);this._partials.forEach((i,o)=>s[o]=i),this._partials=Array.from(s),this.type=this._type}}_getRealImaginary(e,n){let s=2048;const i=new Float32Array(s),o=new Float32Array(s);let l=1;if(e==="custom"){if(l=this._partials.length+1,this._partialCount=this._partials.length,s=l,this._partials.length===0)return[i,o]}else{const u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);u?(l=parseInt(u[2],10)+1,this._partialCount=parseInt(u[2],10),e=u[1],l=Math.max(l,2),s=l):this._partialCount=0,this._partials=[]}for(let u=1;u<s;++u){const h=2/(u*Math.PI);let f;switch(e){case"sine":f=u<=l?1:0,this._partials[u-1]=f;break;case"square":f=u&1?2*h:0,this._partials[u-1]=f;break;case"sawtooth":f=h*(u&1?1:-1),this._partials[u-1]=f;break;case"triangle":u&1?f=2*(h*h)*(u-1>>1&1?-1:1):f=0,this._partials[u-1]=f;break;case"custom":f=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}f!==0?(i[u]=-f*Math.sin(n*u),o[u]=f*Math.cos(n*u)):(i[u]=0,o[u]=0)}return[i,o]}_inverseFFT(e,n,r){let s=0;const i=e.length;for(let o=0;o<i;o++)s+=e[o]*Math.cos(o*r)+n[o]*Math.sin(o*r);return s}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const s=Math.PI*2,i=32;for(let o=0;o<i;o++)r=Math.max(this._inverseFFT(e,n,o/i*s),r);return dR(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}He._periodicWaveCache=[];class OR extends mi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new fa({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class _i extends it{constructor(){const e=te(_i.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new pt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(it.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Wu extends Wt{constructor(){const e=te(Wu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new OR({context:this.context}),this._modulationNode=new pt({context:this.context}),this._carrier=new He({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new He({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new _i({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ze(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(He.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ju extends Wt{constructor(){const e=te(ju.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new pt({context:this.context,gain:0}),this._carrier=new He({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new it({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new He({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new _i({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new _i({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ze(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(He.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class pa extends Wt{constructor(){const e=te(pa.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new pt({context:this.context,gain:0}),this._thresh=new fa({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new it({context:this.context,units:"audioRange",value:e.width}),this._triangle=new He({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ze(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Wt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Uu extends Wt{constructor(){const e=te(Uu.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new it({context:this.context,units:"frequency",value:e.frequency}),this.detune=new it({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ze(this,["frequency","detune"])}static getDefaults(){return Object.assign(He.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(Pr(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new He({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):me});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class qu extends Wt{constructor(){const e=te(qu.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new _i({context:this.context,value:2}),this._pulse=new pa({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new He({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ze(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Wt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const j_={am:Wu,fat:Uu,fm:ju,oscillator:He,pulse:pa,pwm:qu};class eu extends Wt{constructor(){const e=te(eu.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new it({context:this.context,units:"frequency",value:e.frequency}),this.detune=new it({context:this.context,units:"cents",value:e.detune}),ze(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(He.getDefaults(),ju.getDefaults(),Wu.getDefaults(),Uu.getDefaults(),pa.getDefaults(),qu.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=j_[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof j_[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&hs(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&hs(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Qn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Ge(this,arguments,void 0,function*(e=1024){return ys(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function tC(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Pr(i,t,e),n.set(this,i)}})}}function nr(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Pr(this.toSeconds(i),t,e),n.set(this,i)}})}}class Hu extends Wt{constructor(){const e=te(Hu.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Ce({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Wt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:me,onerror:me,playbackRate:1,reverse:!1})}load(e){return Ge(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=me){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=Zs(n,this._loopStart):n=Zs(n,0);const s=this.toSeconds(n),i=r;r=Zs(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o=o/this._playbackRate,e=this.toSeconds(e);const l=new zu({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(l),this._loop&&Qt(i)?l.start(e,s):l.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;(s=[...this._activeSources].pop())===null||s===void 0||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Pr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Pr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}yn([nr(0)],Hu.prototype,"fadeIn",void 0);yn([nr(0)],Hu.prototype,"fadeOut",void 0);class Wr extends oe{constructor(){const e=te(Wr.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new it({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(oe.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Qn(e))return e;{let r;for(r in Ba)if(Ba[r][n]===e)return r;return e}}_setCurve(e,n,r){if(Qn(r)&&Reflect.has(Ba,r)){const s=Ba[r];es(s)?e!=="_decayCurve"&&(this[e]=s[n]):this[e]=s}else if(pn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const l=1/s;s=(1-o)/l}if(s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,s,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let l=this._attackCurve;for(let u=1;u<l.length;u++)if(l[u-1]<=o&&o<=l[u]){l=this._attackCurve.slice(u),l[0]=o;break}this._sig.setValueCurveAtTime(l,e,s,n)}if(i&&this.sustain<1){const l=n*this.sustain,u=e+s;this.log("decay",u),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(l,i+u):this._sig.exponentialApproachValueAtTime(l,u,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(ne(pn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return op(this,e,n,r),this}asArray(){return Ge(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,r=new np(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=i*.1,l=i+o,u=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/l,decay:n*this.toSeconds(this.decay)/l,release:n*this.toSeconds(this.release)/l,context:r}));return u._sig.toDestination(),u.triggerAttackRelease(n*(s+o)/l,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}yn([nr(0)],Wr.prototype,"attack",void 0);yn([nr(0)],Wr.prototype,"decay",void 0);yn([tC(0,1)],Wr.prototype,"sustain",void 0);yn([nr(0)],Wr.prototype,"release",void 0);const Ba=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[],i=6.4;for(e=0;e<127;e++){n=e/127;const c=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;s[e]=c/10+n*.83}s[127]=1;const o=[],l=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*l)/l;const u=[];for(e=0;e<128;e++)n=e/127,u[e]=.5*(1-Math.cos(Math.PI*n));const h=[];for(e=0;e<128;e++){n=e/127;const c=Math.pow(n,3)*4+.2,d=Math.cos(c*Math.PI*2*n);h[e]=Math.abs(d*(1-n))}function f(c){const d=new Array(c.length);for(let p=0;p<c.length;p++)d[p]=1-c[p];return d}function a(c){return c.slice(0).reverse()}return{bounce:{In:f(h),Out:h},cosine:{In:r,Out:a(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:f(s)},sine:{In:u,Out:f(u)},step:{In:o,Out:f(o)}}})();class gi extends oe{constructor(){const e=te(gi.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new bi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ze(this,"volume")}static getDefaults(){return Object.assign(oe.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const i=s[n],o=this.context.transport.schedule(l=>{s[n]=l,r.apply(this,s)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class vi extends gi{constructor(){const e=te(vi.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(gi.getDefaults(),{detune:0,onsilence:me,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof Yt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}yn([nr(0)],vi.prototype,"portamento",void 0);class $u extends Wr{constructor(){super(te($u.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new pt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class qo extends vi{constructor(){const e=te(qo.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new eu(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new $u(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ze(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(vi.getDefaults(),{envelope:Object.assign(W_(Wr.getDefaults(),Object.keys(oe.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(W_(eu.getDefaults(),[...Object.keys(Wt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Gu extends qo{constructor(){const e=te(Gu.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ze(this,["oscillator","envelope"])}static getDefaults(){return Xs(vi.getDefaults(),qo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof Yt?e.toFrequency():e),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}yn([tC(0)],Gu.prototype,"octaves",void 0);yn([nr(0)],Gu.prototype,"pitchDecay",void 0);const nC=new Set;function mp(t){nC.add(t)}function rC(t,e){const n=`registerProcessor("${t}", ${e})`;nC.add(n)}const bR=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;mp(bR);const RR=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;mp(RR);const PR=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;mp(PR);const MR="feedback-comb-filter",FR=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;rC(MR,FR);class Yu extends gi{constructor(){const e=te(Yu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(ne(Va(r)||hs(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),Va(r)){const i=new Yt(this.context,r).toMidi();n[i]=e.urls[r]}else hs(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new hp({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(gi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:me,onerror:me,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=eC(new Yt(this.context,s).toFrequency()),o=Math.round(i),l=i-o,u=this._findClosest(o),h=o-u,f=this._buffers.get(h),a=Jw(u+l),c=new zu({url:f,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:a}).connect(this.output);c.start(n,0,f.duration/a,r),pn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(c);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new Yt(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),pn(n)?(ne(pn(e),"notes must be an array when duration is array"),e.forEach((o,l)=>{const u=n[Math.min(l,n.length-1)];this.triggerRelease(o,i+this.toSeconds(u))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(ne(Va(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Va(e)){const s=new Yt(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}yn([nr(0)],Yu.prototype,"attack",void 0);yn([nr(0)],Yu.prototype,"release",void 0);class _p extends oe{constructor(){const e=te(_p.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Re({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ze(this,"pan")}static getDefaults(){return Object.assign(oe.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const LR="bit-crusher",VR=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;rC(LR,VR);class qe extends oe{constructor(){const e=te(qe.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new pt({context:this.context}),qe._allSolos.has(this.context)||qe._allSolos.set(this.context,new Set),qe._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(oe.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),qe._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){qe._soloed.has(this.context)||qe._soloed.set(this.context,new Set),qe._soloed.get(this.context).add(this)}_removeSolo(){qe._soloed.has(this.context)&&qe._soloed.get(this.context).delete(this)}_isSoloed(){return qe._soloed.has(this.context)&&qe._soloed.get(this.context).has(this)}_noSolos(){return!qe._soloed.has(this.context)||qe._soloed.has(this.context)&&qe._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),qe._allSolos.get(this.context).delete(this),this._removeSolo(),this}}qe._allSolos=new Map;qe._soloed=new Map;class gp extends oe{constructor(){const e=te(gp.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new _p({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new bi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ze(this,["pan","volume"])}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ws extends oe{constructor(){const e=te(Ws.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new qe({solo:e.solo,context:this.context}),this._panVol=this.output=new gp({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ze(this,["pan","volume"])}static getDefaults(){return Object.assign(oe.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Ws.buses.has(e)||Ws.buses.set(e,new pt({context:this.context})),Ws.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new pt({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ws.buses=new Map;un().transport;un().destination;un().destination;un().listener;un().draw;un();function BR(){return Ce.loaded()}const zR="0.01",Mc={C_MAJOR:["B","A","G","F","E","D","C"]};let zn=null,Js=null;const vp=()=>(UR(),(!zn||!Js)&&(zn=new qo().toDestination(),Js=new $u({attack:3,decay:.1,sustain:.1,release:.1}).toDestination()),zn.connect(Js),zn),sC=(t,e)=>{zn||vp(),Js.triggerAttackRelease(1),zn.triggerAttackRelease(qR(t,e),zR)},WR=()=>{zn&&(zn.dispose(),zn=null),Js&&Js.dispose()},jR=()=>BR(),UR=async()=>{await gR(),console.log("audio context started")},qR=(t=0,e)=>{let n=0,r=6;console.log(t),t+1>e&&(n=Math.floor((t+1)/e),r=Math.max(2,r-Math.floor(t/Mc.C_MAJOR.length)));const s=Mc.C_MAJOR[(t+n)%Mc.C_MAJOR.length];return console.log("Note played:",s+r.toString()),s+r.toString()},U_=({id:t,index:e,handleTileClick:v,tileColor:r})=>{const{setScore:s,numberOfTiles:i,setNumberOfTiles:o,currentSequence:l,sequenceIndex:u,setSequenceIndex:h,setCurrentSequence:f,sequenceLength:a,setSequenceLength:c,setIsGameOver:d}=Kn(),{setIsTileFlashing:p}=Iu();function _(){let m,g=i*i;a>=Math.ceil(g/2)?(c(i+1),m=Kh(i+1,i+1),o(y=>y+1)):(m=Kh(a+1,i),c(y=>y+1)),f(m),h(0),p(!0)}function v(){if(e===l[u])sC(e,i),s(m=>m+1),u===l.length-1?_():h(m=>m+1);else try{$x(),console.log("You clicked tile:",e+1+" Wrong!"),d(!0)}catch{console.error("Failure finding wrong tile audio")}}return Y.jsx("div",{className:"tile",style:r,onClick:v},t)},HR=new Map([[" "," "],["0",""],["1","1"],["2",""],["3",""],["4",""],["5",""],["6",""],["7",""],["8",""],["9",""],["10",""],["11",""],["12",""],["13",""],["14",""],["15",""],["16",""],["17",""],["18",""],["19",""],["20",""],["ae",""],["OE",""],["oe",""],["pi",""],["Nj",""],["AE",""],["A",""],["a",""],["B",""],["b",""],["C",""],["c",""],["D",""],["d",""],["E",""],["e",""],["F",""],["f",""],["G",""],["g",""],["H",""],["h",""],["I",""],["i",""],["J",""],["j",""],["K",""],["k",""],["L",""],["l","|"],["M",""],["m",""],["N",""],["n",""],["O",""],["o",""],["P",""],["p",""],["Q",""],["q",""],["R",""],["r",""],["S",""],["s",""],["T",""],["t",""],["U",""],["u",""],["V",""],["v",""],["W",""],["w",""],["X",""],["x",""],["Y",""],["y",""],["Z",""],["z",""]]),$R=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,GR=/[\0-\x08\x0E-\x1F\x7F-\x84\x86-\x9F\u0300-\u034E\u0350-\u035B\u0363-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u200C\u200E\u200F\u202A-\u202E\u2066-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3035\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFFF9-\uFFFB]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDCA-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E\uDCA0-\uDCA3]|\uD834[\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF]/g,YR=/^(?:[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]|[a-zA-Z0-9\s])+$/;function KR(t){return YR.test(t)}function QR(t){return t.replace(GR,"").replace($R,"$1").replace(/[\u200B-\u200D\uFEFF\u2063]/g,"")}const XR=new Map,iC=new Map,q_=new Map;for(const[t,e]of HR.entries()){XR.set(t,[...e]);for(const n of e)iC.set(n,t)}function ZR(t){const e=q_.get(t);if(typeof e=="string")return e;if(KR(t))return t;let n="";for(const r of QR(t))n+=iC.get(r)||r;return q_.set(t,n),n}var oC={exports:{}},Fc={exports:{}},H_;function JR(){return H_||(H_=1,function(t,e){(function(n,r){t.exports=r()})(hr,function(){var n={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},r=Array.prototype.slice;function s(a){var c=a.length;return c?c===1?[a[0]]:c===2?[a[0],a[1]]:c===3?[a[0],a[1],a[2]]:r.call(a,0):[]}function i(a){var c={};for(var d in a)n[d]||(c[d]=a[d]);return c}function o(a){return typeof a=="function"&&a.isMemoized}function l(a,c){return a===c||a!==a&&c!==c}function u(a,c){var d={};for(var p in a)d[p]=a[p];for(var p in c)d[p]=c[p];return d}var h=function(){function a(c){this.keys=[],this.values=[],this.options=c;var d=typeof c.isMatchingKey=="function";d?this.getKeyIndex=this._getKeyIndexFromMatchingKey:c.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey=typeof c.transformKey=="function",this.shouldCloneArguments=this.canTransformKey||d,this.shouldUpdateOnAdd=typeof c.onCacheAdd=="function",this.shouldUpdateOnChange=typeof c.onCacheChange=="function",this.shouldUpdateOnHit=typeof c.onCacheHit=="function"}return Object.defineProperty(a.prototype,"size",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"snapshot",{get:function(){return{keys:s(this.keys),size:this.size,values:s(this.values)}},enumerable:!1,configurable:!0}),a.prototype._getKeyIndexFromMatchingKey=function(c){var d=this.options,p=d.isMatchingKey,_=d.maxSize,v=this.keys,m=v.length;if(!m)return-1;if(p(v[0],c))return 0;if(_>1){for(var g=1;g<m;g++)if(p(v[g],c))return g}return-1},a.prototype._getKeyIndexForMany=function(c){var d=this.options.isEqual,p=this.keys,_=p.length;if(!_)return-1;if(_===1)return this._getKeyIndexForSingle(c);var v=c.length,m,g;if(v>1){for(var y=0;y<_;y++)if(m=p[y],m.length===v){for(g=0;g<v&&d(m[g],c[g]);g++);if(g===v)return y}}else for(var y=0;y<_;y++)if(m=p[y],m.length===v&&d(m[0],c[0]))return y;return-1},a.prototype._getKeyIndexForSingle=function(c){var d=this.keys;if(!d.length)return-1;var p=d[0],_=p.length;if(c.length!==_)return-1;var v=this.options.isEqual;if(_>1){for(var m=0;m<_;m++)if(!v(p[m],c[m]))return-1;return 0}return v(p[0],c[0])?0:-1},a.prototype.orderByLru=function(c,d,p){for(var _=this.keys,v=this.values,m=_.length,g=p;g--;)_[g+1]=_[g],v[g+1]=v[g];_[0]=c,v[0]=d;var y=this.options.maxSize;m===y&&p===m?(_.pop(),v.pop()):p>=y&&(_.length=v.length=y)},a.prototype.updateAsyncCache=function(c){var d=this,p=this.options,_=p.onCacheChange,v=p.onCacheHit,m=this.keys[0],g=this.values[0];this.values[0]=g.then(function(y){return d.shouldUpdateOnHit&&v(d,d.options,c),d.shouldUpdateOnChange&&_(d,d.options,c),y},function(y){var S=d.getKeyIndex(m);throw S!==-1&&(d.keys.splice(S,1),d.values.splice(S,1)),y})},a}();function f(a,c){if(c===void 0&&(c={}),o(a))return f(a.fn,u(a.options,c));if(typeof a!="function")throw new TypeError("You must pass a function to `memoize`.");var d=c.isEqual,p=d===void 0?l:d,_=c.isMatchingKey,v=c.isPromise,m=v===void 0?!1:v,g=c.maxSize,y=g===void 0?1:g,S=c.onCacheAdd,w=c.onCacheChange,E=c.onCacheHit,A=c.transformKey,T=u({isEqual:p,isMatchingKey:_,isPromise:m,maxSize:y,onCacheAdd:S,onCacheChange:w,onCacheHit:E,transformKey:A},i(c)),N=new h(T),D=N.keys,x=N.values,I=N.canTransformKey,R=N.shouldCloneArguments,b=N.shouldUpdateOnAdd,L=N.shouldUpdateOnChange,W=N.shouldUpdateOnHit,P=function(){var O=R?s(arguments):arguments;I&&(O=A(O));var M=D.length?N.getKeyIndex(O):-1;if(M!==-1)W&&E(N,T,P),M&&(N.orderByLru(D[M],x[M],M),L&&w(N,T,P));else{var z=a.apply(this,arguments),H=R?O:s(arguments);N.orderByLru(H,z,D.length),m&&N.updateAsyncCache(P),b&&S(N,T,P),L&&w(N,T,P)}return x[0]};return P.cache=N,P.fn=a,P.isMemoized=!0,P.options=T,P}return f})}(Fc)),Fc.exports}var za={exports:{}},$_;function eP(){return $_||($_=1,function(t,e){(function(n,r){r(e)})(hr,function(n){var r=typeof WeakMap=="function",s=Object.keys;function i(x,I){return x===I||x!==x&&I!==I}function o(x){return x.constructor===Object||x.constructor==null}function l(x){return!!x&&typeof x.then=="function"}function u(x){return!!(x&&x.$$typeof)}function h(){var x=[];return{delete:function(I){for(var R=0;R<x.length;++R)if(x[R][0]===I){x.splice(R,1);return}},get:function(I){for(var R=0;R<x.length;++R)if(x[R][0]===I)return x[R][1]},set:function(I,R){for(var b=0;b<x.length;++b)if(x[b][0]===I){x[b][1]=R;return}x.push([I,R])}}}var f=function(x){return x?function(){return new WeakMap}:h}(r);function a(x){return function(R){var b=x||R;return function(W,P,O,M,z,H,K){K===void 0&&(K=f());var ve=!!W&&typeof W=="object",ye=!!P&&typeof P=="object";if(ve!==ye)return!1;if(!ve&&!ye)return b(W,P,K);var J=K.get(W);if(J&&K.get(P))return J===P;K.set(W,P),K.set(P,W);var le=b(W,P,K);return K.delete(W),K.delete(P),le}}}function c(x,I,R,b){var L=x.length;if(I.length!==L)return!1;for(;L-- >0;)if(!R(x[L],I[L],L,L,x,I,b))return!1;return!0}function d(x,I,R,b){var L=x.size===I.size;if(L&&x.size){var W={},P=0;x.forEach(function(O,M){if(L){var z=!1,H=0;I.forEach(function(K,ve){!z&&!W[H]&&(z=R(M,ve,P,H,x,I,b)&&R(O,K,M,ve,x,I,b),z&&(W[H]=!0)),H++}),P++,L=z}})}return L}var p="_owner",_=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function v(x,I,R,b){var L=s(x),W=L.length;if(s(I).length!==W)return!1;if(W)for(var P=void 0;W-- >0;){if(P=L[W],P===p){var O=u(x),M=u(I);if((O||M)&&O!==M)return!1}if(!_(I,P)||!R(x[P],I[P],P,P,x,I,b))return!1}return!0}var m=function(){return/foo/g.flags==="g"?function(I,R){return I.source===R.source&&I.flags===R.flags}:function(I,R){return I.source===R.source&&I.global===R.global&&I.ignoreCase===R.ignoreCase&&I.multiline===R.multiline&&I.unicode===R.unicode&&I.sticky===R.sticky&&I.lastIndex===R.lastIndex}}();function g(x,I,R,b){var L=x.size===I.size;if(L&&x.size){var W={};x.forEach(function(P,O){if(L){var M=!1,z=0;I.forEach(function(H,K){!M&&!W[z]&&(M=R(P,H,O,K,x,I,b),M&&(W[z]=!0)),z++}),L=M}})}return L}var y=typeof Map=="function",S=typeof Set=="function",w=Object.prototype.valueOf;function E(x){var I=typeof x=="function"?x(R):function(b,L,W,P,O,M,z){return R(b,L,z)};function R(b,L,W){if(b===L)return!0;if(b&&L&&typeof b=="object"&&typeof L=="object"){if(o(b)&&o(L))return v(b,L,I,W);var P=Array.isArray(b),O=Array.isArray(L);return P||O?P===O&&c(b,L,I,W):(P=b instanceof Date,O=L instanceof Date,P||O?P===O&&i(b.getTime(),L.getTime()):(P=b instanceof RegExp,O=L instanceof RegExp,P||O?P===O&&m(b,L):l(b)||l(L)?b===L:y&&(P=b instanceof Map,O=L instanceof Map,P||O)?P===O&&d(b,L,I,W):S&&(P=b instanceof Set,O=L instanceof Set,P||O)?P===O&&g(b,L,I,W):b.valueOf!==w||L.valueOf!==w?i(b.valueOf(),L.valueOf()):v(b,L,I,W)))}return b!==b&&L!==L}return R}var A=E(),T=E(function(){return i}),N=E(a()),D=E(a(i));n.circularDeepEqual=N,n.circularShallowEqual=D,n.createCustomEqual=E,n.deepEqual=A,n.sameValueZeroEqual=i,n.shallowEqual=T,Object.defineProperty(n,"__esModule",{value:!0})})}(za,za.exports)),za.exports}(function(t,e){(function(n,r){t.exports=r(JR(),eP())})(hr,function(n,r){function s(){return s=Object.assign?Object.assign.bind():function(C){for(var k=1;k<arguments.length;k++){var j=arguments[k];for(var F in j)Object.prototype.hasOwnProperty.call(j,F)&&(C[F]=j[F])}return C},s.apply(this,arguments)}function i(C,k){if(C==null)return{};var j={},F=Object.keys(C),V,B;for(B=0;B<F.length;B++)V=F[B],!(k.indexOf(V)>=0)&&(j[V]=C[V]);return j}var o={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function l(){for(var C=arguments.length,k=new Array(C),j=0;j<C;j++)k[j]=arguments[j];return k.reduce(function(F,V){if(typeof F=="function")return typeof V=="function"?function(){F.apply(this,arguments),V.apply(this,arguments)}:F;if(typeof V=="function")return V})}function u(){for(var C=arguments.length,k=new Array(C),j=0;j<C;j++)k[j]=arguments[j];return k.reduce(function(F,V){if(typeof F=="function")return typeof V=="function"?function(){return F(V.apply(this,arguments))}:F;if(typeof V=="function")return V})}function h(C,k){for(var j=0;j<C.length;j++)if(C[j].key===k)return j;return-1}function f(C,k){var j=typeof k=="function"?k:function(F,V){for(var B=0;B<V.length;B++)if(!C(F[B],V[B]))return!1;return!0};return function(F,V){for(var B=0;B<F.length;B++)if(F[B].length===V.length&&j(F[B],V))return B;return-1}}function a(C,k){return!k||k===o?C:s({},C,k,{onCacheAdd:l(C.onCacheAdd,k.onCacheAdd),onCacheChange:l(C.onCacheChange,k.onCacheChange),onCacheHit:l(C.onCacheHit,k.onCacheHit),transformArgs:u(C.transformArgs,k.transformArgs)})}function c(C){return typeof C=="function"&&C.isMoized}function d(C,k,j){try{var F=j||k||"anonymous";Object.defineProperty(C,"name",{configurable:!0,enumerable:!1,value:"moized("+F+")",writable:!0})}catch{}}function p(C,k,j){var F=h(C,k);F!==-1&&(clearTimeout(C[F].timeoutId),j&&C.splice(F,1))}function _(C,k){var j=setTimeout(C,k);return typeof j.unref=="function"&&j.unref(),j}function v(C,k,j,F){var V=k.maxAge;return function B($,Z,we){var de=$.keys[0];if(h(C,de)===-1){var We=function(){var wn=f(j,F),Rn=wn($.keys,de),ws=$.values[Rn];~Rn&&($.keys.splice(Rn,1),$.values.splice(Rn,1),typeof k.onCacheChange=="function"&&k.onCacheChange($,Z,we)),p(C,de,!0),typeof k.onExpire=="function"&&k.onExpire(de)===!1&&($.keys.unshift(de),$.values.unshift(ws),B($,Z,we),typeof k.onCacheChange=="function"&&k.onCacheChange($,Z,we))};C.push({expirationMethod:We,key:de,timeoutId:_(We,V)})}}}function m(C,k){return function(F){var V=F.keys[0],B=h(C,V);~B&&(p(C,V,!1),C[B].timeoutId=_(C[B].expirationMethod,k.maxAge))}}function g(C,k,j,F){var V=typeof k.maxAge=="number"&&isFinite(k.maxAge)?v(C,k,j,F):void 0;return{onCacheAdd:V,onCacheHit:V&&k.updateExpire?m(C,k):void 0}}var y={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},S=!1;function w(C){C?delete y.profiles[C]:y.profiles={}}function E(C){C===void 0&&(C=!0),y.isCollectingStats=C}function A(C){var k=C.profileName;return function(){k&&!y.profiles[k]&&(y.profiles[k]={calls:0,hits:0}),y.profiles[k].calls++}}function T(C){return function(){var k=y.profiles,j=C.profileName;k[j]||(k[j]={calls:0,hits:0}),k[j].calls++,k[j].hits++}}function N(C){return C.displayName||C.name||"Anonymous "+y.anonymousProfileNameCounter++}function D(C,k){return C?(k/C*100).toFixed(4)+"%":"0.0000%"}function x(C){!y.isCollectingStats&&!S&&(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),S=!0);var k=y.profiles;if(C){if(!k[C])return{calls:0,hits:0,usage:"0.0000%"};var j=k[C];return s({},j,{usage:D(j.calls,j.hits)})}var F=Object.keys(y.profiles).reduce(function(V,B){return V.calls+=k[B].calls,V.hits+=k[B].hits,V},{calls:0,hits:0});return s({},F,{profiles:Object.keys(k).reduce(function(V,B){return V[B]=x(B),V},{}),usage:D(F.calls,F.hits)})}function I(C){return y.isCollectingStats?{onCacheAdd:A(C),onCacheHit:T(C)}:{}}var R={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function b(C,k,j){j===void 0&&(j=[]),Object.getOwnPropertyNames(C).forEach(function(F){if(!R[F]&&j.indexOf(F)===-1){var V=Object.getOwnPropertyDescriptor(C,F);V.get||V.set?Object.defineProperty(k,F,V):k[F]=C[F]}})}function L(C,k){var j=k.expirations,F=C.options,V=f(F.isEqual,F.isMatchingKey),B=C;B.clear=function(){var $=B._microMemoizeOptions.onCacheChange,Z=B.cache;return Z.keys.length=0,Z.values.length=0,$&&$(Z,B.options,B),!0},B.clearStats=function(){w(B.options.profileName)},B.get=function($){var Z=B._microMemoizeOptions.transformKey,we=B.cache,de=Z?Z($):$,We=V(we.keys,de);return We!==-1?B.apply(this,$):void 0},B.getStats=function(){return x(B.options.profileName)},B.has=function($){var Z=B._microMemoizeOptions.transformKey,we=Z?Z($):$;return V(B.cache.keys,we)!==-1},B.keys=function(){return B.cacheSnapshot.keys},B.remove=function($){var Z=B._microMemoizeOptions,we=Z.onCacheChange,de=Z.transformKey,We=B.cache,qt=V(We.keys,de?de($):$);if(qt===-1)return!1;var wn=We.keys[qt];return We.keys.splice(qt,1),We.values.splice(qt,1),we&&we(We,B.options,B),p(j,wn,!0),!0},B.set=function($,Z){var we=B._microMemoizeOptions,de=B.cache,We=B.options,qt=we.onCacheAdd,wn=we.onCacheChange,Rn=we.transformKey,ws=Rn?Rn($):$,ir=V(de.keys,ws);if(ir===-1){var Cs=We.maxSize-1;de.size>Cs&&(de.keys.length=Cs,de.values.length=Cs),de.keys.unshift(ws),de.values.unshift(Z),We.isPromise&&de.updateAsyncCache(B),qt&&qt(de,We,B),wn&&wn(de,We,B)}else{var ma=de.keys[ir];de.values[ir]=Z,ir>0&&de.orderByLru(ma,Z,ir),We.isPromise&&de.updateAsyncCache(B),typeof wn=="function"&&wn(de,We,B)}},B.values=function(){return B.cacheSnapshot.values}}function W(C,k){var j=k.expirations,F=k.options,V=k.originalFunction,B=C.options;Object.defineProperties(C,{_microMemoizeOptions:{configurable:!0,get:function(){return B}},cacheSnapshot:{configurable:!0,get:function(){var we=C.cache;return{keys:we.keys.slice(0),size:we.size,values:we.values.slice(0)}}},expirations:{configurable:!0,get:function(){return j}},expirationsSnapshot:{configurable:!0,get:function(){return j.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return F}},originalFunction:{configurable:!0,get:function(){return V}}});var $=C;b(V,$)}function P(C,k){return L(C,k),W(C,k),C}var O=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function M(C,k,j){var F=C(s({maxArgs:2,isShallowEqual:!0},j,{isReact:!1}));k.displayName||(k.displayName=k.name||"Component");function V(B,$,Z){this.props=B,this.context=$,this.updater=Z,this.MoizedComponent=F(k)}return V.prototype.isReactComponent={},V.prototype.render=function(){return{$$typeof:O,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},b(k,V,["contextType","contextTypes"]),V.displayName="Moized("+(k.displayName||k.name||"Component")+")",d(V,k.name,j.profileName),V}function z(C){return function(k){if(C>=k.length)return k;if(C===0)return[];if(C===1)return[k[0]];if(C===2)return[k[0],k[1]];if(C===3)return[k[0],k[1],k[2]];for(var j=[],F=0;F<C;F++)j[F]=k[F];return j}}function H(C,k){for(var j=C.length,F=0;F<j;++F)if(C[F]===k)return F+1;return 0}function K(){var C=[],k=[];return function(F,V){var B=typeof V;if(B==="function"||B==="symbol")return V.toString();if(typeof V=="object"){if(C.length){var $=H(C,this);$===0?C[C.length]=this:(C.splice($),k.splice($)),k[k.length]=F;var Z=H(C,V);if(Z!==0)return"[ref="+(k.slice(0,Z).join(".")||".")+"]"}else C[0]=V,k[0]=F;return V}return""+V}}function ve(C){var k=typeof C;return C&&(k==="object"||k==="function")?JSON.stringify(C,K()):C}function ye(C){for(var k="|",j=0;j<C.length;j++)k+=ve(C[j])+"|";return[k]}function J(C){return typeof C.serializer=="function"?C.serializer:ye}function le(C,k){return C[0]===k[0]}function De(C){if(typeof C=="function")return function(k,j,F){return C(F.cache,F.options,F)}}function Q(C){return C.matchesArg||C.isDeepEqual&&r.deepEqual||C.isShallowEqual&&r.shallowEqual||r.sameValueZeroEqual}function On(C){return C.matchesKey||C.isSerialized&&le||void 0}function bn(C){return u(C.isSerialized&&J(C),typeof C.transformArgs=="function"&&C.transformArgs,typeof C.maxArgs=="number"&&z(C.maxArgs))}function rr(C){var k=C.options.updateCacheForKey,j=function(){for(var V=arguments.length,B=new Array(V),$=0;$<V;$++)B[$]=arguments[$];if(!k(B))return C.apply(this,B);var Z=C.fn.apply(this,B);return C.set(B,Z),Z};return b(C,j),j}var sr=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],ee=function C(k,j){var F=j||o;if(c(k)){var V=k.originalFunction,B=a(k.options,F);return C(V,B)}if(typeof k=="object")return function(Qu,dC){if(typeof Qu=="function"){var fC=a(k,dC);return C(Qu,fC)}var pC=a(k,Qu);return C(pC)};if(F.isReact)return M(C,k,F);var $=s({},o,F,{maxAge:typeof F.maxAge=="number"&&F.maxAge>=0?F.maxAge:o.maxAge,maxArgs:typeof F.maxArgs=="number"&&F.maxArgs>=0?F.maxArgs:o.maxArgs,maxSize:typeof F.maxSize=="number"&&F.maxSize>=0?F.maxSize:o.maxSize,profileName:F.profileName||N(k)}),Z=[];$.matchesArg,$.isDeepEqual;var we=$.isPromise;$.isReact,$.isSerialized,$.isShallowEqual,$.matchesKey,$.maxAge,$.maxArgs;var de=$.maxSize,We=$.onCacheAdd,qt=$.onCacheChange,wn=$.onCacheHit;$.onExpire,$.profileName,$.serializer;var Rn=$.updateCacheForKey;$.transformArgs,$.updateExpire;var ws=i($,sr),ir=Q($),Cs=On($),ma=g(Z,$,ir,Cs),yp=I($),uC=bn($),cC=s({},ws,{isEqual:ir,isMatchingKey:Cs,isPromise:we,maxSize:de,onCacheAdd:De(l(We,ma.onCacheAdd,yp.onCacheAdd)),onCacheChange:De(qt),onCacheHit:De(l(wn,ma.onCacheHit,yp.onCacheHit)),transformKey:uC}),hC=n(k,cC),_a=P(hC,{expirations:Z,options:$,originalFunction:k});return Rn&&(_a=rr(_a)),d(_a,k.name,F.profileName),_a};ee.clearStats=w,ee.collectStats=E,ee.compose=function(){return u.apply(void 0,arguments)||ee},ee.deep=ee({isDeepEqual:!0}),ee.getStats=x,ee.infinite=ee({maxSize:1/0}),ee.isCollectingStats=function(){return y.isCollectingStats},ee.isMoized=function(k){return typeof k=="function"&&!!k.isMoized},ee.matchesArg=function(C){return ee({matchesArg:C})},ee.matchesKey=function(C){return ee({matchesKey:C})};function Ku(C,k){if(k===!0)return ee({maxAge:C,updateExpire:k});if(typeof k=="object"){var j=k.onExpire,F=k.updateExpire;return ee({maxAge:C,onExpire:j,updateExpire:F})}return ee(typeof k=="function"?{maxAge:C,onExpire:k,updateExpire:!0}:{maxAge:C})}return ee.maxAge=Ku,ee.maxArgs=function(C){return ee({maxArgs:C})},ee.maxSize=function(C){return ee({maxSize:C})},ee.profile=function(C){return ee({profileName:C})},ee.promise=ee({isPromise:!0,updateExpire:!0}),ee.react=ee({isReact:!0}),ee.serialize=ee({isSerialized:!0}),ee.serializeWith=function(C){return ee({isSerialized:!0,serializer:C})},ee.shallow=ee({isShallowEqual:!0}),ee.transformArgs=function(C){return ee({transformArgs:C})},ee.updateCacheForKey=function(C){return ee({updateCacheForKey:C})},Object.defineProperty(ee,"default",{configurable:!1,enumerable:!1,value:ee,writable:!1}),ee})})(oC);var tP=oC.exports;const G_=eg(tP);function Y_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Wa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y_(Object(n),!0).forEach(function(r){oP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aC(t){var e=nP(t,"string");return typeof e=="symbol"?e:e+""}function rP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aC(r.key),r)}}function iP(t,e,n){return e&&sP(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oP(t,e,n){return e=aC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aP(t,e){if(t){if(typeof t=="string")return K_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(t,e)}}function K_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hi(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=aP(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,l;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,l=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw l}}}}/**
 * @license bad-words-next
 * Copyright (c) 2022, Alex Zelensky. (MIT License)
 * https://github.com/alexzel/bad-words-next
 */function lP(t){return t.replace(/[.?^${}()|[\]\\]/g,"\\$&").replace(/\b\*\b/,"")}function Q_(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var X_={placeholder:"***",placeholderMode:"replace",specialChars:/\d|[!@#$%^&*()[\];:'",.?\-_=+~`|]|a|(?:the)|(?:el)|(?:la)/,spaceChars:["",".","-",";","|"],confusables:["en","es","de","ru_lat"],maxCacheSize:100,exclusions:[]},uP=function(){function t(e){rP(this,t),this.opts=e!==void 0?Wa(Wa({},X_),e):X_,this.specialChars=this.opts.specialChars.toString().slice(1,-1),this.exclusionsRegexps=this.opts.exclusions.map(this.regexp.bind(this)),this.data={},this.ids=[];var n=Math.max(0,Math.floor(this.opts.maxCacheSize/3)),r=G_(this.preCheck,{maxSize:n});this.preCheck=r;var s=G_(this.check,{maxSize:this.opts.maxCacheSize-n});this.check=s,this.clear=function(){r.clear(),s.clear()},this.opts.data!==void 0&&this.add(this.opts.data)}return iP(t,[{key:"add",value:function(n){this.clear();var r="",s="",i=Hi(n.words),o;try{for(i.s();!(o=i.n()).done;){var l=o.value,u=lP(l);if(u!==""&&(u.startsWith("*")&&(u="[^\\s\\b^]*".concat(u.slice(1))),u.endsWith("*")&&(u="".concat(u.slice(0,-1),"[^\\s\\b$]*")),r+=r!==""?"|".concat(u):u,u.includes("_"))){var h=Hi(this.opts.spaceChars),f;try{for(h.s();!(f=h.n()).done;){var a=f.value;r+="|".concat(u.replace(/_/g,Q_(a)))}}catch(p){h.e(p)}finally{h.f()}}}}catch(p){i.e(p)}finally{i.f()}for(var c in n.lookalike){var d=Q_(c);s+=s!==""?"|".concat(d):d}this.data[n.id]=Wa(Wa({},n),{},{wordsRegexp:this.regexp(r)}),s!==""&&(this.data[n.id].lookalikeRegexp=new RegExp(s,"ig")),this.ids.push(n.id)}},{key:"prepare",value:function(n,r){var s=this,i=n;return this.data[r].lookalikeRegexp!==void 0&&(i=n.replace(this.data[r].lookalikeRegexp,function(o){if(s.data[r].lookalike[o]!==void 0)return s.data[r].lookalike[o];var l=o.toLowerCase();return s.data[r].lookalike[l]!==void 0?s.data[r].lookalike[l]:o})),this.opts.confusables.includes(r)?ZR(i):i}},{key:"regexp",value:function(n){return new RegExp("(?:^|\\b|\\s)(?:".concat(this.specialChars,")*(?:").concat(n,")(?:").concat(this.specialChars,")*(?:$|\\b|\\s)"),"i")}},{key:"preCheck",value:function(n){var r=Hi(this.ids),s;try{for(r.s();!(s=r.n()).done;){var i=s.value;if(this.data[i].wordsRegexp.test(n)||this.data[i].wordsRegexp.test(this.prepare(n,i)))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}},{key:"check",value:function(n){var r=Hi(this.ids),s;try{for(r.s();!(s=r.n()).done;){var i=s.value,o=null,l=Hi(this.exclusionsRegexps),u;try{for(l.s();!(u=l.n()).done;){var h=u.value;if(h.test(n)||(o===null&&(o=this.prepare(n,i)),h.test(o)))return!1}}catch(f){l.e(f)}finally{l.f()}if(this.data[i].wordsRegexp.test(n)||(o===null&&(o=this.prepare(n,i)),this.data[i].wordsRegexp.test(o)))return!0}}catch(f){r.e(f)}finally{r.f()}return!1}},{key:"filter",value:function(n,r){var s=this;if(n===""||!this.preCheck(n))return n;for(var i=[],o=/([\b\s])/g,l;(l=o.exec(n))!==null;)i.push(l[0]);var u=this.opts.placeholderMode==="repeat";return n.split(/[\b\s]/).map(function(h){return s.check(h)?(r!==void 0&&r(h),u?s.opts.placeholder.repeat(h.length):s.opts.placeholder):h}).reduce(function(h,f,a){return h+(a>0?i[a-1]===void 0?" ":i[a-1]:"")+f},"")}}])}();const cP="en",hP=["*fakk*","*fuck*","*fuk+er","*fuk+ers","*fukk*","*ni+g+er*","*testical*","*testicle*","anal","anil+ingus*","anus","anuses","anusez","ar+se","ar+sebadger","ar+sehead*","ar+sehol*","ashol*","ass+","ass+hol","ass+hole*","ass+wipe","aswipe","az+hol","az+hole*","b_d_s_m","ball+bag*","ball+sack*","bastard*","bbc","bellend","biatch*","bitch*","blow_job*","boff+in*","bol+ock+*","bon+er","boo+b","boo+bs","boo+bz","btch","bugg+er*","bul+shit*","butt+","butt+hol","butt+hole*","butt+much*","butt+plug*","carpet_muncher*","cawk","cawks","clit+","clit+er*","clit+or*","clit+s","clit+z","cock","cock_sucker*","cock_suckin*","cockface*","cockhead*","cockmunch*","cocknose*","cocks","cocks_sucker*","cockwomble","cockz","crap","cum","cum+er","cum+ing","cumbub+le*","cumdumpst*","cumshot*","cumwipe","cun+il+ingus*","cunt+","cuntlick*","cuntpud+le","damn*","dick","dickhead*","dicks","dickwe+d*","dickweasel","dike","dikes","dil+do*","dog+ie_styl*","dog+y_styl*","douche_bag","douche_bags","dupa","dyke","dykes","ejackulate","erotic*","escort*","fackin*","fag","fagat","faget","fagg+ot*","fagget","faggit","faggt","fagt","fan+yflap*","fatass*","feasting","fecal","fingerfack*","foreskin*","fuk","fuk+ah","fuk+in*","fy","gang+_b+ang*","get_laid","gobshit+*","god+am","god+amn*","godsd+am","godsd+amn*","gook","got_laid","hard_on","hoer","hooker*","hore","horny","horsesh+it+","idiot*","j_o_i","jack_as+","jack_off","jack_sh+it+","jap","japs","jerk_off","jiz+_stain","jiz+breath","jiz+cock","joi","kike","kinky","klit","knob","knobbing","knobhead*","kunt","kunts","kuntz","ladyboy*","lesbo","masturbat*","milf","nazi","nazis*","naziz","negr","neo_nazi+","ni+g+r","ni+g+rs","ni+gg+","nimphoman*","nip+le","nip+les","nutsack*","nutsuck*","orgas+m","orgas+mo","paedofil*","paedophil*","pedofil*","pedophil*","penis*","phuck*","pimp","pimpis","pimps","pimpz","pis+flap*","pis+ing","pis+wizard","piss+","porn","porno","prick+","puss+e","puss+y","quim","rape","raping","rectum","redneck*","s.o.b","sadism*","semen","sex","sexy","sh+-it+","sh+it+","sh+it+e","sh+it+y","sh+it_hol*","shemale*","shit+bag*","shit+house","shit+magnet","shit+pouch","skanck","skank","slut+","slut+y","strap_on","suicid*","svastik*","swastik*","swinger","threesome","thundercunt*","tit+","tit+ie","tit+ies","tit+s","tit+ywank","todger","turd","twat","twat+waf+l*","twathead*","twatty*","twunt","twunter","vagina*","viagra*","vibrator","voyeur*","voyuer*","vul+va*","wank","wanker*","wankface","wetback*","whoar","whore","wiseass+","wtf","xrated","zo+phil+i*"],dP={0:"o",1:"i",2:"z",3:"z",5:"s",8:"b",$:"s","@":"a","<":"c","!":"i","+":"t"},fP={id:cP,words:hP,lookalike:dP},Z_=new uP({data:fP});function pP({onSubmit:t}){const[e,n]=re.useState(""),r=s=>{s.preventDefault(),/^[a-zA-Z0-9]{1,11}$/g.test(e)&&!Z_.check(e)&&(t(e),n(""))};return Y.jsxs(Y.Fragment,{children:[Z_.check(e)&&Y.jsx("div",{children:"No Bad Words!"}),Y.jsxs("form",{className:"name-form",onSubmit:r,children:[Y.jsx("div",{className:"name-input-label"}),Y.jsx("input",{type:"text",autoFocus:!0,className:"name-input",placeholder:"Enter your name",value:e,onChange:s=>n(s.target.value)}),Y.jsx("button",{className:"name-form-btn",type:"submit",children:"Submit"})]})]})}var mP={VITE_API_KEY:"AIzaSyDMaahQoAqNc2cqX2PKtn6eGM5TpSfAdk8",VITE_AUTH_DOMAIN:"dev-memorygame.firebaseapp.com",VITE_DB_URL:"https://dev-memorygame-default-rtdb.firebaseio.com",VITE_PROJECT_ID:"dev-memorygame",VITE_STORAGE_BUCKET:"dev-memorygame.appspot.com",VITE_SENDER_ID:"878380505346",VITE_APP_ID:"1:878380505346:web:c69ed3af29a061bf7c8a1b",BASE_URL:"/ReactMemoryGame/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_KEY:_P,VITE_AUTH_DOMAIN:gP,VITE_DB_URL:vP,VITE_PROJECT_ID:yP,VITE_STORAGE_BUCKET:wP,VITE_SENDER_ID:CP,VITE_APP_ID:SP}=mP,TP={apiKey:_P,authDomain:gP,databaseURL:vP,projectId:yP,storageBucket:wP,messagingSenderId:CP,appId:SP},EP=sf(TP),lC=K0(EP);function AP(t,e){const n=Y0(lC,"ScoreSet/");gx(n,{name:t,score:e}).then(()=>{console.log("Data Added Successfully")}).catch(s=>{console.error("Data add unsuccessful",s)})}async function kP(){let t=[];const e=Y0(lC,"ScoreSet/");return await yx(e).then(n=>{n.forEach(r=>{if(r.exists()){const s=r.val();t.push(s)}else console.log("no data from database")})}),t.sort((n,r)=>r.score-n.score),t}const J_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAI90lEQVR4nO1cCcwkRRUe2JVDFFhg5VhOgSAQREhQkKgcCxoUCBIuEQyHciRAkCsgRBBQN8uNWcguIocHyHLJggRJOIRdXRUxKmc4l0sWlpuefq/hM6+qZqav6r+nZ3pm/v3fl3Sy/1R31at6Ve+ubTQUCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFAqFYrQB4BNg/jaY9wCw7LDpmfAA0S1ghnmI7gUwbcIvyrAAYIU2MzpMeUNOjDJlOAxZFkRBhin2uQrAp5Qxg2YK0asehsjzLIi+rEwZJEOYny1giIgwBvPZACYpYwbDkP+mGPCahzkPAFhfmVI3Q4ieSyx8GG4N5ktB9HHOaXkHUfRdZUq9DHkrsejAeuZ35q+D6BWPGPs9gCnKmHqsrI9SDFkt1r4WmB8pUPg79JumCQ0Aq6Z2fhT31kVnGDFl26hA4U9ujAIALIcoOhBEx4J5bxB9CcC648UiQRB8NrXA/0u0E93pfp+LMNwGRE3PaZmPINhoeDPpEPw7r6loleUDILoWzOcgDI8A83Q0m5sCWL4xAgDzzina/5NoJ3rJWF3AZ9pzJXq/QOEfOrzJACuZI15kwxfb9y+D6D4wzwbRyWDeC83mZhLsG9gcwvD7KZr+mJrjVABrmH+Lgid6E2G4rVP4+Q6lMA5YdVBz6BBLtH1lZoztiD0FonlgvhBER5mdXEPQD8w/T40/y/uunBLHHPf3VBDd7pnDCyD6amOQQBR9L0XEYjnyIFpSC6PsGO+B+R8g+g2ITnMh88rOGohuSvV/aoU+jgbRBzm0ivQ4f2An3lgXSSIuabcBKyIINjY7WxhH9GMwX23C28xPFyjHqox6G8x/BvMVIDoGRF8B8OkSc/hnop8o2q/SWjSbnzMbJZ++haI3q/TbHRFWWccX5eTS3wLLgOhu9931YD4PRDcam9+egn4w6SMwPwGi3zodtUtatoPo3cQ3YbiVZ67XiX4pSmAZi5N5RsavaZ3sMDyiUSfcjowPGsjuLP090Snu29mZNmAdEH0NYXgkmC8wzBO5zH05Uc84UfWTjO4ClvPOVazGEua8YTzRIs8muRnA6o06YEzC/AlfXfL77dz7T5UeE1gZRF9EGB4O5pkgustYPv1h1GMF404q0gUA1kw5lKtl9FOHKbJuu5adc9mFWT5zNKPoEGOLEy0q2cckZ/qWen/Mk0Z0H4iOA/McMP8NRB92KeLmVhx/B7cW52faZOPkiWD7/kzfieyeCAkppJRq2m4v2Y+8P7UnWij/pKHZ3DxG41VO7LxfwJCTKo0PrGccYOZ9c9uDYBMw/9Uz7iNCZ9W55y1C63na+y7zZYYgYMWeB+7ypIH5Qaesj2y/G4ZbOpP9chPykBw60Q0APtmot7LlvFxHWkxmsQyBZaoPwPytVMcLvO+KLLXhhzHN0Mr0IP+kSe7C0bewMQIw5jjR854T+gdxPqt1bJVqorNCE7dfsrJKVYkNebzaGBEAWMWY4vlMkXDMN7rvtGOytp5fNkYUkJwGsPYI0DHZxMCAFdqntxXaTzJFApeXdhWANfIw2dGMOiezNAAdqXJh+7cg2AjMD3lOy3XlO7cKsZKXvrQDwAYm4huG2yZ+D8OtzO4XMziZlZyccbLtmr5VflAJJcQ/rjssMI6AKDrYrctfMm0SfrGLfUbMgbzZc0JuLD+oWARJp/DAPs9r3AI2T/S6W5vpiTbmXWPKezcQvegTV11VTbrEUryTveqYXGZc5pmi8BojDhCd3ooeZNr8RRPy/ruVyozE70h1ltgJtclmNkS/2RgBmPoBCdPkBAudaWvLi2KlqC7C4Q/TB8Em1YhhfjTF2drLYUwiiM1YN8XouATMF5fuo8v3x+jroiILsx1NJrrT/b1vbvLOxrVm9JTIAvOTKaW+dQ9z840xIy6e2unSMDw8LY+9DqkN21xU5v2u6ZOos+3vjbywkJwcY1FZy2pugSO4Wz+ISeYmms3Neu403j8wzRG8JBZdfs9MDljH/NYyFYlOLyxgIHqpzPuV6BQxYzfJYZ72WQX64q7KoZLMQB0rwj5BsLH3XbtTL0+leBO712s6Es1zE5vuxno0tdsXp2NkYp2YSG+nwO2oduwt5/0+1RX8PTNnqVXLu3si6WuiE3sKJmYISac+g2DDAlFzmiNkkW/3ZvqX0iDbfq0LMcxzfz9nTO6WuWgjpUvcU64kyeZsJEn0uNnhRH8ytbpEP+h2kVyszG5Oou1jouo2z/hPph3GviCTVwDWzRU1RDu6ojmJz+yRU555ltm9RD90BQr3msXOK0QbxBNFB3e9Fsw/c3P5NZh38qZvmX9V242sTDbOBe/iokYSVTHiLkAYft7lyH3JmlF4ZlUMlURu4+XlO95GFB1UCyPaRKRlo8tFxETNmSC6IyE361xIMoshYutlU8SQfkSsFGULS0atXS3zd+LVKyKuC67FLRhIzW9mgYEphrDW9bBeRY5d2Add3kAuz5zp9M7e4mi5+mCpJJxSQe7LN9NMH9JvctzrU3mclRLfRtFB8Ugsomj/zP2Sjm/x08EVyWVL8/9dYdHFMFgAomtA9CMzOakwH+DNV8iYnoAemH9hRHNMCTv9J6cxdPVkvs20y6DmYAmz9bfdLL4wcL7RJbLLbFH10P/XBDDvk6Lzlljbue73h+KnEES3Fszzjl6LNqpNZCwT07bPdyWkO9dZQNALwPzNFN3zUjVg9gKobCLrWxyfqw+tb3F8X32LriaSV0UostT6DQfEEzCjDDDvnprDPblZPmuKd4yU5PM4wvALw5tFq+rEFg8sdrJ0z1G5hNMNjN+QXNz7M3cQi/XjnFE9/eMSEMc1ucAPp1KrZ3t8i3dq9y0mIpAt+FsYy73kFx+IY1sQu1P0APefBMQX+19GgeeX58hJOXdkbtwujUCzuUXOoudZjRKM3GnY9C71gHjrY/tQt9V2p0PhydPnM0IuIJ0wNN9iIgLA2gW+Rd/T0ooxYEzbbOHBlXVdnVCUgKsGecH9zxO5l24UCoVCoVAoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFIrGuMb/AXpTzM0X9uP6AAAAAElFTkSuQmCC";function xP(){const t=re.useRef(null),{score:e}=Kn(),[n,r]=re.useState(!0),[s,i]=re.useState([]),[o,l]=re.useState(!1),[u,h]=re.useState(!1);re.useEffect(()=>{f(),t.current&&(t.current.scrollHeight>t.current.clientHeight?(console.log("can scroll down"),h(!0)):(console.log("cant scroll down"),h(!1))),e===0&&r(!1)},[]);async function f(){{const c=await kP();i(c)}}const a=c=>{e===0||(AP(c,e),f()),r(!1)};return Y.jsxs("div",{className:"container-gameOver",children:[e!==0&&n&&Y.jsx(pP,{onSubmit:a}),!n&&Y.jsx("div",{className:"leaderboard-container",children:Y.jsxs("div",{className:"leaderboard",ref:t,children:[s.map((c,d)=>Y.jsxs("div",{className:"leaderboard-row",children:[Y.jsx("div",{className:"leaderboard-col",children:d+1}),Y.jsx("div",{className:"leaderboard-col",children:c.name}),Y.jsx("div",{className:"leaderboard-col",children:c.score})]},d)),o&&Y.jsx("img",{className:"scroll-indicator-up",src:J_}),u&&Y.jsx("img",{className:"scroll-indicator-down",src:J_})]})})]})}class Lc{constructor(e,n,r){this.color=e,this.value=n,this.mod=r,this.isIncrementing=!1}updateValue(){this.value>=230?this.isIncrementing=!1:this.value<=0&&(this.isIncrementing=!0),this.isIncrementing?this.value+=this.mod:this.value-=this.mod}reset(){this.color=value,this.isIncrementing=!1}}class IP{constructor(){this.red=new Lc("red",230,20),this.green=new Lc("green",230,3),this.blue=new Lc("blue",230,13)}update(){this.red.updateValue(),this.green.updateValue(),this.blue.updateValue()}}const Es=new IP;function ja({difficulty:t,level:e}){const{setGameStart:n,setLevel:r,setInLevelPicker:s}=Kn();function i(){n(!0),r(e),s(!1)}return Y.jsx("div",{onClick:()=>i(),className:"level-picker",children:t})}function NP(){return Y.jsxs("div",{className:"level-board",children:[Y.jsx(ja,{difficulty:"Easy",level:1}),Y.jsx(ja,{difficulty:"Medium",level:2}),Y.jsx(ja,{difficulty:"Hard",level:3}),Y.jsx(ja,{difficulty:"Expert",level:4})]})}const DP=()=>{const{isGameOver:t}=Kn(),{setCurrentSequence:e,setNumberOfTiles:n,setIsGameOver:r,setScore:s,setSequenceLength:i,level:o}=Kn(),{setIsTileFlashing:l}=Iu();function u(){vp(),i(Yh),n(()=>C_*o),e(Kh(Yh,C_)),s(0),r(!1),l(!0)}return Y.jsx("div",{className:"play-btn",onClick:u,children:t?"Try Again":"Play"})};function OP(){const{score:t}=Kn();return Y.jsxs("div",{id:"score",children:["Score: ",t]})}function bP(){const{setInLevelPicker:t,setInMenu:e}=Kn();function n(){e(!1),t(!0)}return Y.jsxs("div",{className:"main-menu",children:[Y.jsx("h1",{children:"./memory"}),Y.jsx("div",{className:"menu-option",onClick:()=>n(),children:"Play"}),Y.jsx("div",{className:"menu-option",children:"Settings"}),Y.jsx("div",{className:"menu-option",children:"Exit"})]})}function RP(){const{numberOfTiles:t,currentSequence:e,isGameOver:n,sequenceIndex:r,setSequenceIndex:s,gameStart:i,inMenu:o,inLevelPicker:l}=Kn(),{isTileFlashing:u,setIsTileFlashing:h,tileArr:f,setTileArr:a}=Iu(),[c,d]=re.useState(!1);re.useState(!1);let p,_=f.length;re.useEffect(()=>{d(!!u)},[u]),re.useEffect(()=>{m(),document.documentElement.style.setProperty("--numTiles",t)},[t]),re.useEffect(()=>{Es.update()},[Es]),re.useEffect(()=>{let g=0,y=[];return setTimeout(()=>{const S=()=>{f.length===t*t&&(g<e.length?(v(e[g]),g++,y.push(setTimeout(S,bx))):(s(0),h(!1)))};if(f.length&&u)try{S()}catch(w){console.error("Error flashing tiles",w)}},500),()=>{y.forEach(clearTimeout)}},[_,u]);function v(g){if(g<0||g>=f.length){console.error("Tile array wasn't updated before",f);return}const y=f[g].props.tileColor;return a(S=>{const w=[...S];return w[g]=Y.jsx("div",{className:"tile-flashing"},`tile-${g}`),w}),p=setTimeout(()=>{a(S=>{const w=[...S];return w[g]=Y.jsx(U_,{index:g,tileColor:y,className:"tile"},`tile-${g}`),w})},Ox),()=>{clearTimeout(p)}}function m(){let g=.05,y=[];for(let S=0;S<t*t;S++){let w=Lx(),E={backgroundColor:`rgba(${Math.abs(Es.red.value)}, ${Math.abs(Es.blue.value)}, ${Math.abs(Es.green.value)}, ${g})`};g=g<1?g+.1:1,y.push(Y.jsx(U_,{index:S,tileColor:E},w)),Es.update()}a(()=>y)}return Y.jsxs(Y.Fragment,{children:[Y.jsxs(Y.Fragment,{children:[o&&Y.jsx(bP,{}),l&&Y.jsx(NP,{})]}),i&&Y.jsxs(Y.Fragment,{children:[n&&Y.jsx(xP,{}),u&&Y.jsx("div",{className:"disable-input"}),!n&&Y.jsx("div",{className:`container${c?"-disabled":""}`,children:f}),i&&Y.jsx(Y.Fragment,{children:Y.jsxs("div",{className:"bottom-bar",children:[Y.jsx(DP,{}),Y.jsx(OP,{})]})})]})]})}const PP=()=>{const[t,e]=re.useState(!1);re.useEffect(()=>((async()=>{await jR(),vp(),e(!0),console.log("synth initialized")})(),()=>{WR()}),[]);const n=async()=>{sC()};return Y.jsx("div",{children:t?Y.jsx("button",{onClick:n,children:"Play Sound"}):Y.jsx("div",{children:"Loading..."})})};function MP(){return Y.jsx(Y.Fragment,{children:Y.jsx(Mx,{children:Y.jsxs(Px,{children:[Y.jsx(PP,{}),Y.jsx(Fx,{}),Y.jsx(RP,{})]})})})}Vc.createRoot(document.getElementById("root")).render(Y.jsx(DC.StrictMode,{children:Y.jsx(MP,{})}));
